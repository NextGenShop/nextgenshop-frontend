{"version":3,"sources":["assets/images/placeholder_image.png","store/api/basket/types.js","store/api/basket/reducer.js","utils/authHeader.js","store/api/basket/actions.js","store/api/basket/index.js","utils/basketUtils.js","components/Basket.js","components/VideoChat.js","store/api/product/types.js","store/api/product/reducer.js","store/api/product/actions.js","store/api/product/index.js","components/ProductCatalog.js","components/ProductSearchBox.js","views/cashier/CashierPage.js","store/api/tokens/types.js","store/api/tokens/reducer.js","store/api/tokens/actions.js","store/api/tokens/index.js","utils/speechUtils.js","assets/models/AvatarV2.glb","assets/models/Avatar.glb","utils/displayToast.js","components/ArtificialCashier.js","views/shopper/ShopperPage.js","config/index.js","store/api/auth/types.js","store/api/auth/reducer.js","store/api/auth/actions.js","store/api/auth/index.js","components/Navbar.js","views/Main.js","store/error/reducer.js","store/error/index.js","views/Login.js","store/error/selector.js","views/cashier/CashierVideoQueue.js","views/shopper/ShopperVideoQueue.js","App.js","utils/apiMiddleware.js","store/mock/MockApi.js","store/rootReducer.js","store/index.js","index.js"],"names":["GET_BASKET","UPDATE_BASKET","DELETE_BASKET","initialState","items","totalPrice","shopper","authHeader","state","token","auth","authorization","baseUrl","updateBasket","shopperId","basket","dispatch","getState","type","name","types","url","requestData","method","headers","data","getBasket","deleteBasket","clearErrors","reducer","action","response","addBasketItem","product","quantity","foundItem","find","item","productId","map","useStyles","makeStyles","theme","list","height","overflowY","price","color","palette","primary","dark","fontWeight","marginRight","spacing","total","connect","dispatchGetBasket","actions","dispatchUpdateBasket","basketData","classes","React","useEffect","Fragment","List","className","length","ListItem","ListItemAvatar","Avatar","src","image","PlaceholderImage","ListItemText","secondary","ListItemSecondaryAction","Typography","display","toFixed","IconButton","edge","aria-label","onClick","newBasket","newItems","filter","removeBasketItem","removeItem","variant","component","paper","text","background","alignItems","justifyContent","VideoChat","Paper","GET_PRODUCTS","products","getProducts","query","retailer","limit","searchParams","params","root","tooltip","backgroundColor","maxWidth","border","card","details","flexDirection","content","flex","buttons","paddingLeft","paddingBottom","media","width","productText","fontSize","smallText","mb","marginBottom","addButton","dispatchGetProducts","productActions","basketActions","searchQuery","tableView","addToBasket","TableContainer","Table","size","TableBody","TableRow","Tooltip","title","alt","TableCell","scope","align","Button","Grid","container","md","Card","CardContent","gutterBottom","CardMedia","ProductSearchBox","value","onChange","TextField","id","label","fullWidth","InputProps","startAdornment","InputAdornment","position","paddingTop","mr","mt","marginTop","divider","CashierPage","useState","setSearchQuery","Container","xs","e","target","GET_SPEECH_TO_TEXT_TOKEN","GET_TEXT_TO_SPEECH_TOKEN","GET_ASSISTANT_TOKEN","speechToTextToken","speechToTextUrl","textToSpeechToken","textToSpeechUrl","assistantToken","assistantUrl","getSpeechToTextToken","getTextToSpeechToken","getAssistantToken","accessToken","captureAudioFromMicrophone","a","mediaStream","navigator","mediaDevices","getUserMedia","video","audio","console","log","recognizeMicrophoneStream","recognizeMic","objectMode","extractResults","format","keepMicrophone","textToSpeech","voice","accept","element","synthesize","createAssistantSession","fetch","Headers","Authorization","res","json","session","session_id","messageAssistant","sessionId","message","speech","Accept","body","JSON","stringify","input","output","generic","reduce","acc","obj","response_type","includes","push","trim","replace","join","user_defined","action_type","stripSSMLTags","str","err","options","timeOut","showCloseButton","progressBar","transitionIn","transitionOut","displayToast","msg","callbackClear","toastrInstance","toastr","info","warning","error","success","onShowComplete","inner","bold","transcript","wordWrap","paddingRight","tokens","authUser","user","dispatchGetSpeechToTextToken","dispatchGetTextToSpeechToken","dispatchGetAssistantToken","loaded","setLoaded","listening","setListening","responding","setResponding","stream","setStream","setSpeechText","responseText","setResponseText","assistantSessionId","setAssistantSessionId","audioRef","useRef","testVoices","instanceId","createSession","startListening","stopAudio","on","final","speechText","alternatives","handleAssistantAction","synthesizeTextToSpeech","stop","p","parseInt","product_id","userId","product_query_string","resetProductCatalog","handleAudioPlayingEvent","handleAudioEndedEvent","audioElement","document","createElement","canPlayType","current","removeEventListener","addEventListener","pause","currentTime","ListenButton","ref","autoplay","loading","animation-name","style","AvatarV2Model","CircularProgress","config","API_URL","ENV","process","HOME_URL","APP_NAME","GET_USER","LOGIN","LOGOUT","REGISTER","localStorage","getItem","isAuthenticated","getUser","login","logout","register","setItem","flexGrow","dispatchLogout","AppBar","Toolbar","Link","to","RenderComponent","errorMessage","Array","isArray","matches","exec","requestName","requestState","heading","errorSelector","_","get","compact","first","dispatchLogin","dispatchClearErrors","email","setEmail","password","setPassword","preventDefault","Divider","CashierVideoQueue","ShopperVideoQueue","App","basename","exact","path","Main","Login","newestOnTop","closeOnToastrClick","preventDuplicates","apiMiddleware","parse","next","extraData","axios","defaults","baseURL","common","req","authTypes","split","mockUsers","handleRequest","request","then","catch","rootReducer","combineReducers","composeEnhancers","compose","composeWithDevTools","enhancers","applyMiddleware","thunk","store","createStore","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c89d7fd4.chunk.js","sourcesContent":["export default \"data:image/png;base64,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\"","export const GET_BASKET = \"basket/GET_BASKET\";\nexport const UPDATE_BASKET = \"basket/UPDATE_BASKET\";\nexport const DELETE_BASKET = \"basket/DELETE_BASKET\";\n","import * as types from \"./types\";\n\nconst initialState = {\n  items: [],\n  totalPrice: 0,\n  shopper: 0,\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case `${types.GET_BASKET}_SUCCESS`:\n    case `${types.UPDATE_BASKET}_SUCCESS`:\n      return {\n        ...state,\n        items: action.response.items,\n        totalPrice: action.response.totalPrice,\n        shopper: action.response.shopper,\n      };\n    case `${types.DELETE_BASKET}_SUCCESS`:\n      return initialState;\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","export default function authHeader(state) {\n  const token = state.auth.token;\n  if (token) {\n    return { authorization: `Token ${token}` };\n  } else {\n    return null;\n  }\n}\n","import authHeader from '../../../utils/authHeader';\nimport * as types from './types';\n\nconst baseUrl = '/basket';\n\nexport const updateBasket = (shopperId, basket) => (dispatch, getState) => {\n  dispatch({\n    type: 'API',\n    name: types.UPDATE_BASKET,\n    url: `${baseUrl}/${shopperId}`,\n    requestData: {\n      method: 'PUT',\n      headers: authHeader(getState()),\n      data: basket,\n    },\n  });\n};\n\nexport const getBasket = (shopperId) => (dispatch, getState) => {\n  dispatch({\n    type: 'API',\n    name: types.GET_BASKET,\n    url: `${baseUrl}/${shopperId}`,\n    requestData: {\n      method: 'GET',\n      headers: authHeader(getState()),\n    },\n  });\n};\n\nexport const deleteBasket = (shopperId) => (dispatch, getState) => {\n  dispatch({\n    type: 'API',\n    name: types.DELETE_BASKET,\n    url: `${baseUrl}/${shopperId}`,\n    requestData: {\n      method: 'DELETE',\n      headers: authHeader(getState()),\n    },\n  });\n};\n\nexport const clearErrors = () => (dispatch) => {\n  dispatch({\n    type: `${types.UPDATE_BASKET}_CLEARERR`,\n  });\n  dispatch({\n    type: `${types.GET_BASKET}_CLEARERR`,\n  });\n  dispatch({\n    type: `${types.DELETE_BASKET}_CLEARERR`,\n  });\n};\n","import reducer from \"./reducer\";\nimport * as actions from \"./actions\";\nimport * as types from \"./types\";\n\nexport { actions, types };\nexport default reducer;\n","const calcTotalPrice = (items) => {\n  let totalPrice = 0;\n  for (let item of items) {\n    totalPrice += item.product.price * item.quantity;\n  }\n  return totalPrice;\n};\n\nconst addBasketItem = (product, basket, quantity = 1) => {\n  let newItems = [];\n  const foundItem = basket.items.find(\n    (item) => item.product.productId === product.productId\n  );\n  if (foundItem) {\n    newItems = basket.items.map((item) =>\n      item.product.productId === foundItem.product.productId\n        ? { ...item, quantity: item.quantity + quantity }\n        : item\n    );\n  } else {\n    newItems = [...basket.items, { product, quantity }];\n  }\n  return { items: newItems };\n};\n\nconst removeBasketItem = (productId, basket) => {\n  let newItems = basket.items.map((item) => {\n    if (item.product.productId === productId) {\n      return null;\n    }\n    return item;\n  });\n  newItems = newItems.filter((item) => item !== null);\n  return { items: newItems };\n};\n\nexport { addBasketItem, removeBasketItem, calcTotalPrice };\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport { Typography } from \"@material-ui/core\";\nimport PlaceholderImage from \"../assets/images/placeholder_image.png\";\nimport { connect } from \"react-redux\";\nimport { actions } from \"../store/api/basket\";\nimport { removeBasketItem } from \"../utils/basketUtils\";\n\nconst useStyles = makeStyles((theme) => ({\n  list: {\n    height: \"29vh\",\n    overflowY: \"scroll\",\n  },\n  price: {\n    color: theme.palette.primary.dark,\n    fontWeight: 600,\n    marginRight: theme.spacing(2),\n  },\n  total: {\n    fontWeight: \"bold\",\n  },\n}));\n\nfunction Basket({\n  shopperId,\n  dispatchUpdateBasket,\n  dispatchGetBasket,\n  basket,\n}) {\n  const classes = useStyles();\n\n  React.useEffect(() => {\n    dispatchGetBasket(shopperId);\n  }, [dispatchGetBasket, shopperId]);\n\n  const removeItem = (productId) => {\n    const newBasket = removeBasketItem(productId, basket);\n    dispatchUpdateBasket(shopperId, newBasket);\n  };\n\n  return (\n    <React.Fragment>\n      <List className={classes.list}>\n        {basket && basket.items && basket.items.length > 0 ? (\n          basket.items.map((item) => (\n            <ListItem key={item.product.productId}>\n              <ListItemAvatar>\n                <Avatar\n                  src={\n                    item.product.image === \"mockImageUrl\"\n                      ? PlaceholderImage\n                      : item.product.image\n                  }\n                />\n              </ListItemAvatar>\n              <ListItemText\n                primary={item.product.name}\n                secondary={\"Qty: \" + item.quantity}\n              />\n              <ListItemSecondaryAction>\n                <Typography className={classes.price} display=\"inline\">\n                  £{(item.product.price * item.quantity).toFixed(2)}\n                </Typography>\n                <IconButton\n                  edge=\"end\"\n                  aria-label=\"delete\"\n                  onClick={() => removeItem(item.product.productId)}\n                >\n                  <DeleteIcon />\n                </IconButton>\n              </ListItemSecondaryAction>\n            </ListItem>\n          ))\n        ) : (\n          <Typography variant=\"subtitle2\">\n            Your shopping basket is empty.\n          </Typography>\n        )}\n      </List>\n      <Typography className={classes.total} variant=\"h6\" component=\"div\">\n        Total:{\" \"}\n        <Typography variant=\"h6\" display=\"inline\">\n          £ {basket && basket.totalPrice ? basket.totalPrice.toFixed(2) : 0}\n        </Typography>\n      </Typography>\n    </React.Fragment>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  basket: state.basket,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  dispatchGetBasket: (shopperId) => dispatch(actions.getBasket(shopperId)),\n  dispatchUpdateBasket: (shopperId, basketData) =>\n    dispatch(actions.updateBasket(shopperId, basketData)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Basket);\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    display: \"flex\",\n    color: theme.palette.text.secondary,\n    background: \"#eeeeee\",\n    height: \"75vh\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n}));\n\nexport default function VideoChat({ items }) {\n  const classes = useStyles();\n  return (\n    <Paper className={classes.paper}>\n      <AccountCircleIcon />\n    </Paper>\n  );\n}\n","export const GET_PRODUCTS = \"product/GET_PRODUCTS\";\n","import * as types from \"./types\";\n\nconst initialState = {\n  products: [],\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case `${types.GET_PRODUCTS}_SUCCESS`:\n      return {\n        ...state,\n        products: action.response,\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","import authHeader from \"../../../utils/authHeader\";\nimport * as types from \"./types\";\n\nconst baseUrl = \"/product\";\n\nexport const getProducts = (query, retailer, limit) => (dispatch, getState) => {\n  let searchParams = {};\n  if (query) {\n    searchParams.query = query;\n  }\n  if (retailer) {\n    searchParams.retailer = retailer;\n  }\n  if (limit) {\n    searchParams.limit = limit;\n  }\n  dispatch({\n    type: \"API\",\n    name: types.GET_PRODUCTS,\n    url: baseUrl,\n    requestData: {\n      method: \"GET\",\n      headers: authHeader(getState()),\n      params: searchParams,\n    },\n  });\n};\n\nexport const clearErrors = () => (dispatch) => {\n  dispatch({\n    type: `${types.GET_PRODUCTS}_CLEARERR`,\n  });\n};\n","import reducer from \"./reducer\";\nimport * as actions from \"./actions\";\nimport * as types from \"./types\";\n\nexport { actions, types };\nexport default reducer;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Card from \"@material-ui/core/Card\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Button from \"@material-ui/core/Button\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport PlaceholderImage from \"../assets/images/placeholder_image.png\";\nimport { connect } from \"react-redux\";\nimport { actions as productActions } from \"../store/api/product\";\nimport { actions as basketActions } from \"../store/api/basket\";\nimport { addBasketItem } from \"../utils/basketUtils\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: \"29vh\",\n    overflowY: \"scroll\",\n  },\n  tooltip: {\n    backgroundColor: \"#f5f5f9\",\n    color: \"rgba(0, 0, 0, 0.87)\",\n    maxWidth: 300,\n    border: \"1px solid #dadde9\",\n  },\n  card: {\n    display: \"flex\",\n  },\n  details: {\n    display: \"flex\",\n    flexDirection: \"column\",\n  },\n  content: {\n    flex: \"1 0 auto\",\n  },\n  buttons: {\n    display: \"flex\",\n    alignItems: \"center\",\n    paddingLeft: theme.spacing(1),\n    paddingBottom: theme.spacing(1),\n  },\n  media: {\n    width: 80,\n  },\n  productText: {\n    fontWeight: \"bold\",\n    fontSize: \"13px\",\n  },\n  smallText: {\n    fontSize: \"12px\",\n  },\n  mb: {\n    marginBottom: theme.spacing(2),\n  },\n  addButton: {\n    width: 20,\n  },\n}));\n\nfunction ProductCatalog({\n  searchQuery,\n  retailer,\n  limit,\n  tableView,\n  products,\n  shopperId,\n  dispatchGetProducts,\n  dispatchUpdateBasket,\n  basket,\n}) {\n  const classes = useStyles();\n\n  React.useEffect(() => {\n    dispatchGetProducts(searchQuery, retailer, limit);\n  }, [dispatchGetProducts, limit, retailer, searchQuery]);\n\n  const addToBasket = (product) => {\n    const newBasket = addBasketItem(product, basket);\n    dispatchUpdateBasket(shopperId, newBasket);\n  };\n\n  return tableView ? (\n    <TableContainer className={classes.root}>\n      <Table size=\"small\" aria-label=\"product catalog table\">\n        <TableBody>\n          {products.map((product) => (\n            <TableRow key={product.productId}>\n              <Tooltip\n                title={\n                  <img\n                    alt=\"product\"\n                    className={classes.media}\n                    src={\n                      product.image === \"mockImageUrl\"\n                        ? PlaceholderImage\n                        : product.image\n                    }\n                  />\n                }\n              >\n                <TableCell component=\"th\" scope=\"row\">\n                  {product.name}\n                </TableCell>\n              </Tooltip>\n              <TableCell align=\"right\">£ {product.price.toFixed(2)}</TableCell>\n              <TableCell align=\"right\">\n                <Button\n                  variant=\"contained\"\n                  size=\"small\"\n                  color=\"primary\"\n                  onClick={() => addToBasket(product)}\n                >\n                  Add to basket\n                </Button>\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  ) : (\n    <Grid container spacing={2} className={classes.root}>\n      {products.map((product) => (\n        <Grid item md={4} key={product.productId}>\n          <Card className={classes.card}>\n            <div className={classes.details}>\n              <CardContent className={classes.content}>\n                <Typography\n                  className={classes.productText}\n                  gutterBottom\n                  variant=\"subtitle2\"\n                >\n                  {product.name}\n                </Typography>\n                <Typography\n                  className={classes.smallText}\n                  display=\"inline\"\n                  variant=\"body2\"\n                  color=\"textSecondary\"\n                  component=\"p\"\n                >\n                  Price:{\" \"}\n                </Typography>\n                <Typography\n                  className={classes.smallText}\n                  display=\"inline\"\n                  variant=\"body2\"\n                  color=\"primary\"\n                  component=\"p\"\n                >\n                  £ {product.price.toFixed(2)}\n                </Typography>\n                <br />\n                <Typography\n                  className={classes.smallText}\n                  display=\"inline\"\n                  variant=\"body2\"\n                  color=\"textSecondary\"\n                  component=\"p\"\n                >\n                  Retailer:{\" \"}\n                </Typography>\n                <Typography\n                  className={classes.smallText}\n                  display=\"inline\"\n                  variant=\"body2\"\n                  color=\"primary\"\n                  component=\"p\"\n                >\n                  {product.retailer}\n                </Typography>\n              </CardContent>\n              <div className={classes.buttons}>\n                <Button\n                  className={classes.addButton}\n                  variant=\"contained\"\n                  size=\"small\"\n                  color=\"primary\"\n                  onClick={() => addToBasket(product)}\n                >\n                  Add\n                </Button>\n              </div>\n            </div>\n            <CardMedia\n              className={classes.media}\n              image={\n                product.image === \"mockImageUrl\"\n                  ? PlaceholderImage\n                  : product.image\n              }\n            />\n          </Card>\n        </Grid>\n      ))}\n    </Grid>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  products: state.product.products,\n  basket: state.basket,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  dispatchGetProducts: (query, retailer, limit) =>\n    dispatch(productActions.getProducts(query, retailer, limit)),\n  dispatchUpdateBasket: (shopperId, basketData) =>\n    dispatch(basketActions.updateBasket(shopperId, basketData)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductCatalog);\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport SearchIcon from \"@material-ui/icons/Search\";\n\nconst useStyles = makeStyles((theme) => ({\n  mb: {\n    marginBottom: theme.spacing(2),\n  },\n}));\n\nexport default function ProductSearchBox({ value, onChange }) {\n  const classes = useStyles();\n  return (\n    <TextField\n      className={classes.mb}\n      id=\"search\"\n      label=\"Search for a product\"\n      fullWidth\n      value={value}\n      onChange={onChange}\n      InputProps={{\n        startAdornment: (\n          <InputAdornment position=\"start\">\n            <SearchIcon />\n          </InputAdornment>\n        ),\n      }}\n    />\n  );\n}\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Basket from \"../../components/Basket\";\nimport VideoChat from \"../../components/VideoChat\";\nimport ProductCatalog from \"../../components/ProductCatalog\";\nimport ProductSearchBox from \"../../components/ProductSearchBox\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(2),\n  },\n  media: {\n    height: 0,\n    paddingTop: \"56.25%\", // 16:9\n  },\n  mr: {\n    marginRight: theme.spacing(1),\n  },\n  mt: {\n    marginTop: theme.spacing(3),\n  },\n  divider: {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(2),\n  },\n}));\n\nexport default function CashierPage() {\n  const classes = useStyles();\n  const [searchQuery, setSearchQuery] = React.useState(\"\");\n  const mockRetailer = \"Mock Retailer\";\n  const mockConnectedShopperId = 0;\n\n  return (\n    <Container maxWidth=\"xl\" className={classes.root}>\n      <Grid container spacing={3}>\n        <Grid item md={6}>\n          <Typography\n            variant=\"subtitle1\"\n            display=\"inline\"\n            className={classes.mr}\n          >\n            Video Call\n          </Typography>\n          <Typography variant=\"subtitle2\" display=\"inline\">\n            {\" \"}\n            Customer Name\n          </Typography>\n        </Grid>\n        <Grid item xs={6}>\n          <Grid container spacing={3}>\n            <Grid item xs={12}>\n              <Typography variant=\"subtitle1\">Product Catalogue</Typography>\n            </Grid>\n          </Grid>\n        </Grid>\n      </Grid>\n      <Grid container spacing={3}>\n        <Grid item md={6}>\n          <VideoChat />\n        </Grid>\n        <Grid item xs={6}>\n          <Grid container spacing={3}>\n            <Grid item xs={12}>\n              <ProductSearchBox\n                value={searchQuery}\n                onChange={(e) => {\n                  setSearchQuery(e.target.value);\n                }}\n              />\n              <ProductCatalog\n                tableView\n                retailer={mockRetailer}\n                searchQuery={searchQuery}\n                shopperId={mockConnectedShopperId}\n              />\n              <hr className={classes.mt} />\n              <Typography variant=\"subtitle1\">Customer Basket</Typography>\n              <Basket shopperId={mockConnectedShopperId} />\n            </Grid>\n          </Grid>\n        </Grid>\n      </Grid>\n    </Container>\n  );\n}\n","export const GET_SPEECH_TO_TEXT_TOKEN = 'tokens/GET_SPEECH_TO_TEXT_TOKEN';\nexport const GET_TEXT_TO_SPEECH_TOKEN = 'tokens/GET_TEXT_TO_SPEECH_TOKEN';\nexport const GET_ASSISTANT_TOKEN = 'tokens/GET_ASSISTANT_TOKEN';\n","import * as types from './types';\n\nconst initialState = {\n  speechToTextToken: null,\n  speechToTextUrl: null,\n  textToSpeechToken: null,\n  textToSpeechUrl: null,\n  assistantToken: null,\n  assistantUrl: null,\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case `${types.GET_SPEECH_TO_TEXT_TOKEN}_SUCCESS`:\n      return {\n        ...state,\n        speechToTextToken: action.response.accessToken,\n        speechToTextUrl: action.response.url,\n      };\n    case `${types.GET_TEXT_TO_SPEECH_TOKEN}_SUCCESS`:\n      return {\n        ...state,\n        textToSpeechToken: action.response.accessToken,\n        textToSpeechUrl: action.response.url,\n      };\n    case `${types.GET_ASSISTANT_TOKEN}_SUCCESS`:\n      return {\n        ...state,\n        assistantToken: action.response.accessToken,\n        assistantUrl: action.response.url,\n      };\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","import * as types from './types';\n\nconst baseUrl = '/tokens';\n\nexport const getSpeechToTextToken = () => (dispatch) => {\n  dispatch({\n    type: 'API',\n    name: types.GET_SPEECH_TO_TEXT_TOKEN,\n    url: `${baseUrl}/speech-to-text`,\n    requestData: {\n      method: 'GET',\n    },\n  });\n};\n\nexport const getTextToSpeechToken = () => (dispatch) => {\n  dispatch({\n    type: 'API',\n    name: types.GET_TEXT_TO_SPEECH_TOKEN,\n    url: `${baseUrl}/text-to-speech`,\n    requestData: {\n      method: 'GET',\n    },\n  });\n};\n\nexport const getAssistantToken = () => (dispatch) => {\n  dispatch({\n    type: 'API',\n    name: types.GET_ASSISTANT_TOKEN,\n    url: `${baseUrl}/assistant`,\n    requestData: {\n      method: 'GET',\n    },\n  });\n};\n","import reducer from \"./reducer\";\nimport * as actions from \"./actions\";\nimport * as types from \"./types\";\n\nexport { actions, types };\nexport default reducer;\n","import recognizeMic from \"watson-speech/speech-to-text/recognize-microphone\";\nimport synthesize from \"watson-speech/text-to-speech/synthesize\";\n\n//audio/wav is supported in Chrome, Edge, Firefox (v3.5), Opera (v11.00), Safari (v3.1)\n//audio/mp3 is supported in Chrome, IE9, Edge, Firefox (v71), Opera, Safari (v3.1)\n//ref: https://en.wikipedia.org/wiki/HTML5_audio\n\nexport const getSupportedAudioFormat = (audioElement) => {\n  if (!audioElement) {\n    audioElement = document.createElement(\"audio\");\n  }\n\n  let accept =\n    audioElement &&\n    audioElement.canPlayType === \"function\" &&\n    audioElement.canPlayType(\"audio/mp3\") !== \"\"\n      ? \"audio/mp3\"\n      : \"audio/wav\";\n\n  return accept;\n};\n\nexport const captureAudioFromMicrophone = async (\n  speechToTextUrl,\n  speechToTextToken\n) => {\n  let mediaStream = null;\n  try {\n    mediaStream = await navigator.mediaDevices.getUserMedia({\n      video: false,\n      audio: true,\n    });\n  } catch (err) {\n    console.log(err);\n  }\n\n  const recognizeMicrophoneStream = recognizeMic({\n    url: speechToTextUrl,\n    accessToken: speechToTextToken,\n    objectMode: true,\n    extractResults: true,\n    format: true,\n    mediaStream,\n    keepMicrophone: true,\n  });\n\n  return recognizeMicrophoneStream;\n};\n\nexport const textToSpeech = async (\n  textToSpeechUrl,\n  textToSpeechToken,\n  text,\n  voice,\n  accept,\n  element\n) => {\n  return synthesize({\n    url: textToSpeechUrl,\n    accessToken: textToSpeechToken,\n    text,\n    voice,\n    accept,\n    element,\n  });\n};\n\nexport const createAssistantSession = async (assistantUrl, assistantToken) => {\n  let session;\n  try {\n    const res = await fetch(`${assistantUrl}/sessions?version=2020-04-01`, {\n      method: \"post\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + assistantToken,\n        \"Content-Type\": \"application/json\",\n      }),\n    });\n    session = await res.json();\n  } catch (err) {\n    console.log(err);\n  }\n  return session ? session.session_id : null;\n};\n\nexport const messageAssistant = async (\n  assistantUrl,\n  assistantToken,\n  sessionId,\n  message\n) => {\n  let res;\n  let data = { speech: \"\", action: null };\n  try {\n    res = await fetch(\n      `${assistantUrl}/sessions/${sessionId}/message?version=2020-04-01`,\n      {\n        method: \"post\",\n        headers: new Headers({\n          Authorization: \"Bearer \" + assistantToken,\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n        }),\n        body: JSON.stringify({ input: { text: message } }),\n      }\n    );\n    res = await res.json();\n    console.log(res);\n    data.speech =\n      '<speak version=\"1.0\">' +\n      res.output.generic\n        .reduce((acc, obj) => {\n          if (obj.response_type === \"text\") {\n            if (obj.text.includes(\"[\")) {\n              acc.push(\n                '<prosody rate=\"medium\">' +\n                  obj.text\n                    .trim()\n                    .replace(/['\"\\[\\]]+/g, \"\")\n                    .replace(/,/g, \", \") +\n                  \"</prosody>\"\n              );\n            } else {\n              acc.push(\n                '<prosody rate=\"+15%\">' + obj.text.trim() + \"</prosody>\"\n              );\n            }\n          }\n          return acc;\n        }, [])\n        .join(' <break strength=\"medium\"></break>') +\n      \"</speak>\";\n    const actions = res.output.generic.reduce((acc, obj) => {\n      if (obj.response_type === \"user_defined\") {\n        if (obj.user_defined.quantity) {\n          obj.user_defined.action_type = \"add_basket\";\n        } else {\n          obj.user_defined.action_type = \"filter_product\";\n        }\n        acc.push(obj.user_defined);\n      }\n      return acc;\n    }, []);\n    data.action = actions[0];\n  } catch (err) {\n    console.log(err);\n  }\n  console.log(data);\n  return data;\n};\n\nexport const stripSSMLTags = (str) => {\n  const regex = /(<([^>]+)>)/gi;\n  try {\n    str = str.replace(regex, \"\");\n  } catch (err) {\n    console.log(err);\n  }\n  return str;\n};\n","export default __webpack_public_path__ + \"static/media/AvatarV2.4e2032d9.glb\";","export default __webpack_public_path__ + \"static/media/Avatar.11cc0c5e.glb\";","import { toastr } from \"react-redux-toastr\";\n\nlet options = {\n  timeOut: 5000,\n  showCloseButton: true,\n  progressBar: false,\n  transitionIn: \"fadeIn\",\n  transitionOut: \"fadeOut\",\n};\n\nexport const displayToast = (title, msg, type, callbackClear) => {\n  const toastrInstance =\n    type === \"info\"\n      ? toastr.info\n      : type === \"warning\"\n      ? toastr.warning\n      : type === \"danger\"\n      ? toastr.error\n      : toastr.success;\n  if (callbackClear) options.onShowComplete = callbackClear;\n  toastrInstance(title, msg, options);\n};\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport StopIcon from \"@material-ui/icons/StopOutlined\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MicRoundedIcon from \"@material-ui/icons/MicRounded\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { connect } from \"react-redux\";\nimport { actions } from \"../store/api/tokens\";\nimport { actions as basketActions } from \"../store/api/basket\";\nimport { actions as productActions } from \"../store/api/product\";\nimport {\n  getSupportedAudioFormat,\n  captureAudioFromMicrophone,\n  textToSpeech,\n  createAssistantSession,\n  messageAssistant,\n  stripSSMLTags,\n} from \"../utils/speechUtils\";\nimport { addBasketItem } from \"../utils/basketUtils\";\nimport AvatarModel from \"../assets/models/Avatar.glb\";\nimport AvatarV2Model from \"../assets/models/AvatarV2.glb\";\nimport { displayToast } from \"../utils/displayToast\";\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    display: \"flex\",\n    color: theme.palette.text.secondary,\n    background: \"#eeeeee\",\n    height: \"75vh\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  inner: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n  },\n  bold: {\n    fontWeight: \"bold\",\n  },\n  transcript: {\n    wordWrap: \"break-word\",\n    paddingLeft: theme.spacing(2),\n    paddingRight: theme.spacing(2),\n  },\n}));\n\nfunction ArtificialCashier({\n  authUser,\n  basket,\n  products,\n  speechToTextToken,\n  speechToTextUrl,\n  textToSpeechToken,\n  textToSpeechUrl,\n  assistantToken,\n  assistantUrl,\n  dispatchGetSpeechToTextToken,\n  dispatchGetTextToSpeechToken,\n  dispatchGetAssistantToken,\n  dispatchUpdateBasket,\n  dispatchGetProducts,\n}) {\n  const classes = useStyles();\n  const [loaded, setLoaded] = React.useState(false);\n  const [listening, setListening] = React.useState(false);\n  const [responding, setResponding] = React.useState(false);\n  const [stream, setStream] = React.useState(null);\n  const [speechText, setSpeechText] = React.useState(\"\");\n  const [responseText, setResponseText] = React.useState(\"\");\n  const [assistantSessionId, setAssistantSessionId] = React.useState(null);\n  const audioRef = React.useRef(null);\n\n  const testVoices = [\n    \"en-GB_JamesV3Voice\",\n    \"en-GB_KateV3Voice\",\n    \"en-GB_CharlotteV3Voice\",\n  ];\n  //ref: https://cloud.ibm.com/docs/text-to-speech?topic=text-to-speech-voices\n\n  React.useEffect(() => {\n    if (!speechToTextToken || !speechToTextUrl) {\n      dispatchGetSpeechToTextToken();\n    }\n    if (!textToSpeechToken || !textToSpeechUrl) {\n      dispatchGetTextToSpeechToken();\n    }\n    if (!assistantToken || !assistantUrl) {\n      dispatchGetAssistantToken();\n    }\n  }, [\n    dispatchGetSpeechToTextToken,\n    dispatchGetTextToSpeechToken,\n    dispatchGetAssistantToken,\n    speechToTextToken,\n    speechToTextUrl,\n    textToSpeechToken,\n    textToSpeechUrl,\n    assistantToken,\n    assistantUrl,\n  ]);\n\n  React.useEffect(() => {\n    async function createSession() {\n      const instanceId = await createAssistantSession(\n        assistantUrl,\n        assistantToken\n      );\n      setAssistantSessionId(instanceId);\n      setLoaded(true);\n      console.log(\"Done loading tokens from API.\");\n      console.log(\"Created assistant session: \" + instanceId);\n    }\n\n    if (!!assistantToken && !!assistantUrl && !assistantSessionId) {\n      createSession();\n    }\n  }, [assistantToken, assistantUrl, assistantSessionId]);\n\n  const startListening = async () => {\n    stopAudio();\n    setListening(true);\n    const stream = await captureAudioFromMicrophone(\n      speechToTextUrl,\n      speechToTextToken\n    );\n    stream.on(\"data\", async (data) => {\n      if (data && data.final) {\n        const speechText = data.alternatives[0].transcript;\n        setSpeechText(speechText);\n        console.log(speechText);\n        setListening(false);\n\n        const res = await messageAssistant(\n          assistantUrl,\n          assistantToken,\n          assistantSessionId,\n          speechText\n        );\n\n        if (res.action) {\n          handleAssistantAction(res.action);\n        }\n\n        if (res.speech) {\n          await synthesizeTextToSpeech(res.speech);\n        }\n      }\n    });\n    stream.on(\"error\", function (err) {\n      console.log(err);\n      setListening(false);\n    });\n    stream.on(\"end\", function () {\n      console.log(\"stream ended\");\n      setListening(false);\n    });\n    setStream(stream);\n  };\n\n  React.useEffect(() => {\n    if (!listening && stream !== null) {\n      stream.stop();\n      setStream(null);\n    }\n  }, [listening, stream]);\n\n  const handleAssistantAction = (action) => {\n    switch (action.action_type) {\n      case \"add_basket\":\n        const product = products.find(\n          (p) => p.productId === parseInt(action.product_id)\n        );\n        if (product) {\n          const newBasket = addBasketItem(product, basket, action.quantity);\n          dispatchUpdateBasket(authUser.userId, newBasket);\n          displayToast(\"\", \"Your shopping basket has been updated\", \"success\");\n        }\n        break;\n      case \"filter_product\":\n        if (action.product_query_string) {\n          dispatchGetProducts(action.product_query_string, \"Mock Retailer\", 3);\n          displayToast(\n            \"\",\n            \"The product catalogue has been updated to match your query\",\n            \"info\"\n          );\n        }\n        break;\n      case \"reset_context\":\n        resetProductCatalog();\n        break;\n      default:\n        break;\n    }\n  };\n\n  const resetProductCatalog = () => {\n    dispatchGetProducts(null, \"Mock Retailer\", 9);\n  };\n\n  const handleAudioPlayingEvent = () => {\n    console.log(\"AUDIO PLAYING!\");\n    setResponding(true);\n  };\n\n  const handleAudioEndedEvent = () => {\n    console.log(\"AUDIO STOPPED PLAYING!\");\n    setResponding(false);\n  };\n\n  const synthesizeTextToSpeech = async (text, voice) => {\n    if (!voice) voice = testVoices[0];\n    try {\n      const accept = getSupportedAudioFormat(audioRef);\n      const audio = await textToSpeech(\n        textToSpeechUrl,\n        textToSpeechToken,\n        text,\n        voice,\n        accept,\n        audioRef.current\n      );\n      setResponseText(stripSSMLTags(text));\n      audio.removeEventListener(\"playing\", handleAudioPlayingEvent);\n      audio.removeEventListener(\"ended\", handleAudioEndedEvent);\n      audio.addEventListener(\"playing\", handleAudioPlayingEvent);\n      audio.addEventListener(\"ended\", handleAudioEndedEvent);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const stopAudio = () => {\n    setResponseText(\"\");\n    audioRef.current.pause();\n    audioRef.current.currentTime = 0;\n  };\n\n  const ListenButton = listening ? (\n    <IconButton\n      color=\"secondary\"\n      aria-label=\"stop\"\n      onClick={() => setListening(false)}\n    >\n      <StopIcon fontSize=\"large\" />\n    </IconButton>\n  ) : (\n    <IconButton color=\"primary\" aria-label=\"speak\" onClick={startListening}>\n      <MicRoundedIcon fontSize=\"large\" />\n    </IconButton>\n  );\n\n  return (\n    <Paper className={classes.paper}>\n      <audio ref={audioRef}>\n        Your browser does not support the <code>audio</code> element.\n      </audio>\n      <div className={classes.inner}>\n        {loaded ? (\n          <React.Fragment>\n            <model-viewer\n              autoplay\n              loading=\"eager\"\n              animation-name={responding ? \"Talking\" : \"Idle\"}\n              style={{ width: \"350px\", height: \"350px\" }}\n              src={AvatarV2Model}\n            ></model-viewer>\n            {responseText && (\n              <Typography className={classes.transcript} variant=\"h6\">\n                {responseText}\n              </Typography>\n            )}\n            <br />\n            <Typography variant=\"subtitle2\">\n              {listening\n                ? \"Listening...\"\n                : \"Press the mic icon and start speaking\"}\n            </Typography>\n            {ListenButton}\n          </React.Fragment>\n        ) : (\n          <React.Fragment>\n            <Typography variant=\"subtitle2\" gutterBottom>\n              Loading... Please wait\n            </Typography>\n            <CircularProgress size={30} />\n          </React.Fragment>\n        )}\n      </div>\n    </Paper>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  speechToTextToken: state.tokens.speechToTextToken,\n  speechToTextUrl: state.tokens.speechToTextUrl,\n  textToSpeechToken: state.tokens.textToSpeechToken,\n  textToSpeechUrl: state.tokens.textToSpeechUrl,\n  assistantToken: state.tokens.assistantToken,\n  assistantUrl: state.tokens.assistantUrl,\n  basket: state.basket,\n  authUser: state.auth.user,\n  products: state.product.products,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  dispatchGetSpeechToTextToken: () => dispatch(actions.getSpeechToTextToken()),\n  dispatchGetTextToSpeechToken: () => dispatch(actions.getTextToSpeechToken()),\n  dispatchGetAssistantToken: () => dispatch(actions.getAssistantToken()),\n  dispatchUpdateBasket: (shopperId, basketData) =>\n    dispatch(basketActions.updateBasket(shopperId, basketData)),\n  dispatchGetProducts: (query, retailer, limit) =>\n    dispatch(productActions.getProducts(query, retailer, limit)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ArtificialCashier);\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport Grid from \"@material-ui/core/Grid\";\nimport ProductCatalog from \"../../components/ProductCatalog\";\nimport ProductSearchBox from \"../../components/ProductSearchBox\";\nimport ArtificialCashier from \"../../components/ArtificialCashier\";\nimport Basket from \"../../components/Basket\";\nimport { connect } from \"react-redux\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(2),\n  },\n  mt: {\n    marginTop: theme.spacing(3),\n  },\n}));\n\nfunction ShopperPage({ authUser }) {\n  const classes = useStyles();\n  const [searchQuery, setSearchQuery] = React.useState(\"\");\n\n  return (\n    <Container maxWidth=\"xl\" className={classes.root}>\n      <Grid container spacing={3}>\n        <Grid item md={6}>\n          <Typography variant=\"subtitle1\">Artificial Cashier</Typography>\n        </Grid>\n        <Grid item xs={6}>\n          <Typography variant=\"subtitle1\">Product Catalogue</Typography>\n        </Grid>\n      </Grid>\n      <Grid container spacing={3}>\n        <Grid item md={6}>\n          <ArtificialCashier />\n        </Grid>\n        <Grid item xs={6}>\n          <Grid container spacing={3}>\n            <Grid item xs={12}>\n              <ProductSearchBox\n                value={searchQuery}\n                onChange={(e) => {\n                  setSearchQuery(e.target.value);\n                }}\n              />\n            </Grid>\n          </Grid>\n          <ProductCatalog\n            retailer=\"Mock Retailer\"\n            searchQuery={searchQuery}\n            limit={9}\n            shopperId={authUser.userId}\n          />\n          <hr className={classes.mt} />\n          <Typography variant=\"subtitle1\">Shopping Basket</Typography>\n          <Basket shopperId={authUser.userId} />\n        </Grid>\n      </Grid>\n    </Container>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  authUser: state.auth.user,\n});\n\nexport default connect(mapStateToProps, null)(ShopperPage);\n","const prod = {\n  // API_URL: 'https://api.nextgenshop.co.uk',\n  API_URL: 'https://nextgenshop.pythonanywhere.com',\n};\n\nconst dev = {\n  API_URL: 'http://127.0.0.1:8000',\n};\n\nconst shared = {\n  ENV: process.env.NODE_ENV,\n  HOME_URL: 'https://www.nextgenshop.github.io/nextgenshop-frontend',\n  APP_NAME: 'NextGenShop',\n};\n\nconst config =\n  process.env.NODE_ENV === 'development'\n    ? { ...dev, ...shared }\n    : { ...prod, ...shared };\n\nexport default config;\n","export const GET_USER = \"auth/GET_USER\";\nexport const LOGIN = \"auth/LOGIN\";\nexport const LOGOUT = \"auth/LOGOUT\";\nexport const REGISTER = \"auth/REGISTER\";\n","import * as types from \"./types\";\n\nconst initialState = {\n  token: localStorage.getItem(\"token\"),\n  isAuthenticated: false,\n  user: null,\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case `${types.GET_USER}_SUCCESS`:\n      return {\n        ...state,\n        isAuthenticated: true,\n        user: action.response,\n      };\n\n    case `${types.LOGOUT}_SUCCESS`:\n    case `${types.GET_USER}_FAILURE`:\n      localStorage.removeItem(\"token\");\n      return { ...initialState, token: null };\n\n    case `${types.REGISTER}_SUCCESS`:\n    case `${types.LOGIN}_SUCCESS`:\n      localStorage.setItem(\"token\", action.response.token);\n      return {\n        ...state,\n        user: action.response.user,\n        token: action.response.token,\n        isAuthenticated: true,\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","import authHeader from '../../../utils/authHeader';\nimport * as types from './types';\n\nconst baseUrl = '/auth';\n\nexport const getUser = () => (dispatch, getState) => {\n  dispatch({\n    type: 'API',\n    name: types.GET_USER,\n    url: `${baseUrl}/user/`,\n    requestData: {\n      method: 'GET',\n      headers: authHeader(getState()),\n    },\n  });\n};\n\nexport const login = (data) => (dispatch) => {\n  dispatch({\n    type: 'API',\n    name: types.LOGIN,\n    url: `${baseUrl}/login/`,\n    requestData: {\n      method: 'POST',\n      data,\n    },\n  });\n};\n\nexport const logout = () => async (dispatch, getState) => {\n  dispatch({\n    type: 'API',\n    name: types.LOGOUT,\n    url: `${baseUrl}/logout/`,\n    requestData: {\n      method: 'GET',\n      headers: authHeader(getState()),\n    },\n  });\n};\n\nexport const register = (data) => (dispatch) => {\n  dispatch({\n    type: 'API',\n    name: types.REGISTER,\n    url: `${baseUrl}/register/`,\n    requestData: {\n      method: 'POST',\n      data,\n    },\n  });\n};\n\nexport const clearErrors = () => (dispatch) => {\n  dispatch({\n    type: `${types.LOGIN}_CLEARERR`,\n  });\n  dispatch({\n    type: `${types.REGISTER}_CLEARERR`,\n  });\n};\n","import reducer from \"./reducer\";\nimport * as actions from \"./actions\";\nimport * as types from \"./types\";\n\nexport { actions, types };\nexport default reducer;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport { Link } from \"react-router-dom\";\nimport config from \"../config\";\nimport { connect } from \"react-redux\";\nimport { actions } from \"../store/api/auth\";\nimport { displayToast } from \"../utils/displayToast\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  title: {\n    flexGrow: 1,\n  },\n}));\n\nfunction Navbar({ auth, dispatchLogout }) {\n  const classes = useStyles();\n\n  const handleLogout = () => {\n    dispatchLogout();\n    displayToast(\"\", \"You have been logged out!\", \"info\");\n  };\n\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"sticky\">\n        <Toolbar>\n          <Typography variant=\"h6\" className={classes.title}>\n            {config.APP_NAME}\n          </Typography>\n          {auth && auth.isAuthenticated ? (\n            <Button color=\"inherit\" onClick={handleLogout}>\n              Logout\n            </Button>\n          ) : (\n            <React.Fragment>\n              <Button color=\"inherit\" component={Link} to=\"/login\">\n                Login\n              </Button>\n              <Button color=\"inherit\" component={Link} to=\"/register\">\n                Register\n              </Button>\n            </React.Fragment>\n          )}\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  auth: state.auth,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  dispatchLogout: () => dispatch(actions.logout()),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Navbar);\n","import React from \"react\";\nimport CashierMain from \"./cashier/CashierPage\";\nimport ShopperMain from \"./shopper/ShopperPage\";\nimport Navbar from \"../components/Navbar\";\nimport { Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\n\nfunction Main({ auth }) {\n  if (auth && auth.isAuthenticated && auth.user) {\n    const RenderComponent = auth.user.type === \"cashier\" ? <CashierMain /> : <ShopperMain />;\n    return (\n      <React.Fragment>\n        <Navbar />\n        {RenderComponent}\n      </React.Fragment>\n    );\n  } else {\n    return <Redirect to=\"/login\" />;\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  auth: state.auth,\n});\n\nexport default connect(mapStateToProps, null)(Main);\n","const reducer = (state = {}, action) => {\n  const { type, error } = action;\n  let errorMessage = error;\n  if (Array.isArray(error)) {\n    errorMessage = error[0];\n  }\n  const matches = /(.*)_(REQUEST|FAILURE|CLEARERR)/.exec(type);\n  if (!matches) return state;\n\n  const [, requestName, requestState] = matches;\n  return {\n    ...state,\n    [requestName]: requestState === \"FAILURE\" ? errorMessage : \"\",\n  };\n};\n\nexport default reducer;\n","import reducer from './reducer';\nimport { createErrorSelector } from './selector';\nexport { createErrorSelector };\nexport default reducer;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport Button from \"@material-ui/core/Button\";\nimport { Divider, TextField } from \"@material-ui/core\";\nimport { connect } from \"react-redux\";\nimport { actions, types } from \"../store/api/auth\";\nimport { Redirect } from \"react-router-dom\";\nimport { createErrorSelector } from \"../store/error\";\nimport { displayToast } from \"../utils/displayToast\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(2),\n    height: \"80vh\",\n  },\n  heading: {\n    paddingBottom: theme.spacing(2),\n  },\n  mr: {\n    marginRight: theme.spacing(1),\n  },\n  mt: {\n    marginTop: theme.spacing(1),\n  },\n}));\n\nfunction Login({ auth, error, dispatchLogin, dispatchClearErrors }) {\n  const classes = useStyles();\n\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n\n  React.useEffect(() => {\n    if (error) {\n      displayToast(\"\", error, \"danger\", dispatchClearErrors);\n    }\n  }, [error, dispatchClearErrors]);\n\n  const loginShopper = () => {\n    dispatchLogin({ email: \"mockuser1@gmail.com\", password: \"password\" });\n  };\n\n  const loginCashier = () => {\n    dispatchLogin({ email: \"mockcashieruser@gmail.com\", password: \"password\" });\n  };\n\n  const handleLogin = (e) => {\n    e.preventDefault();\n    if (email.trim() && password) {\n      const data = { email, password };\n      dispatchLogin(data);\n    }\n    setPassword(\"\");\n  };\n\n  return auth.isAuthenticated ? (\n    <Redirect to=\"/\" />\n  ) : (\n    <Container className={classes.root} maxWidth=\"md\">\n      <Typography variant=\"h4\" className={classes.heading}>\n        NextGenShop Login\n      </Typography>\n      <TextField label=\"Email\" value={email} onChange={(e) => setEmail(e.target.value)} />\n      <TextField\n        type=\"password\"\n        label=\"Password\"\n        value={password}\n        onChange={(e) => setPassword(e.target.value)}\n      />\n      <Button className={classes.mt} color=\"primary\" variant=\"contained\" onClick={handleLogin}>\n        Login\n      </Button>\n      <Divider className={classes.mt} />\n      <div className={classes.mt}>\n        <Button className={classes.mr} variant=\"contained\" onClick={loginShopper}>\n          Login as shopper\n        </Button>\n        <Button variant=\"contained\" onClick={loginCashier}>\n          Login as cashier\n        </Button>\n      </div>\n      <Typography className={classes.mt} variant=\"caption\">\n        These buttons are for testing purposes.\n      </Typography>\n    </Container>\n  );\n}\n\nconst errorSelector = createErrorSelector([types.LOGIN]);\n\nconst mapStateToProps = (state) => ({\n  auth: state.auth,\n  error: errorSelector(state),\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  dispatchLogin: (data) => dispatch(actions.login(data)),\n  dispatchClearErrors: () => dispatch(actions.clearErrors()),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\n","import _ from \"lodash\";\n\nexport const createErrorSelector = (actions) => (state) => {\n  return (\n    _(actions)\n      .map((action) => _.get(state, `error.${action}`))\n      .compact()\n      .first() || \"\"\n  );\n};\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport Paper from \"@material-ui/core/Paper\";\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(2),\n  },\n  paper: {\n    display: \"flex\",\n    color: theme.palette.text.secondary,\n    background: \"#eeeeee\",\n    height: \"50vh\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n}));\n\nexport default function CashierVideoQueue() {\n  const classes = useStyles();\n  return (\n    <Container maxWidth=\"lg\">\n      <Typography variant=\"h2\" className={classes.heading}>\n        NextGenShop Cashier\n      </Typography>\n      <Paper className={classes.paper}>Waiting for customer...</Paper>\n    </Container>\n  );\n}\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport Paper from \"@material-ui/core/Paper\";\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(2),\n  },\n  paper: {\n    display: \"flex\",\n    color: theme.palette.text.secondary,\n    background: \"#eeeeee\",\n    height: \"50vh\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n}));\n\nexport default function ShopperVideoQueue() {\n  const classes = useStyles();\n  return (\n    <Container maxWidth=\"lg\">\n      <Typography variant=\"h2\" className={classes.heading}>\n        NextGenShop Cashier\n      </Typography>\n      <Paper className={classes.paper}>Waiting for customer...</Paper>\n    </Container>\n  );\n}\n","import React from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Main from \"./views/Main\";\nimport Login from \"./views/Login\";\nimport CashierVideoQueue from \"./views/cashier/CashierVideoQueue\";\nimport ShopperVideoQueue from \"./views/shopper/ShopperVideoQueue\";\nimport ReduxToastr from \"react-redux-toastr\";\nimport \"react-redux-toastr/lib/css/react-redux-toastr.min.css\";\n\nfunction App() {\n  return (\n    <React.Fragment>\n      <Router basename=\"/nextgenshop-frontend\">\n        <Switch>\n          <Route exact path=\"/\" component={Main} />\n          <Route path=\"/login\" component={Login} />\n          <Route path=\"/shop/queue\" component={CashierVideoQueue} />\n          <Route path=\"/cashier/queue\" component={ShopperVideoQueue} />\n        </Switch>\n      </Router>\n      <ReduxToastr\n        timeOut={5000}\n        newestOnTop={true}\n        position=\"top-center\"\n        transitionIn=\"fadeIn\"\n        transitionOut=\"fadeOut\"\n        progressBar\n        closeOnToastrClick\n        preventDuplicates\n      />\n    </React.Fragment>\n  );\n}\n\nexport default App;\n","import axios from 'axios';\nimport config from '../config';\nimport { handleRequest } from '../store/mock/MockApi';\n\n// exampleRequest {\n//   headers?: any;\n//   data?: any;\n//   params?: any;\n//   url: string;\n//   method: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';\n// }\n\nconst apiMiddleware = ({ dispatch }) => (next) => (action) => {\n  next(action);\n\n  if (action.type !== 'API') return;\n\n  const { name, url, requestData, extraData } = action;\n  axios.defaults.baseURL = config.API_URL;\n  axios.defaults.headers.common['Content-Type'] = 'application/json';\n\n  let req = {\n    url,\n    method: requestData.method,\n  };\n  if (requestData.headers) {\n    req.headers = requestData.headers;\n  }\n  if (requestData.data) {\n    req.data = requestData.data;\n  }\n  if (requestData.params) {\n    req.params = requestData.params;\n  }\n\n  // Use Mock API\n  const usedMock = handleRequest(dispatch, name, req);\n  if (!usedMock) {\n    dispatch({ type: `${name}_REQUEST` });\n    axios\n      .request(req)\n      .then(({ data }) => {\n        dispatch({ type: `${name}_SUCCESS`, response: data, extraData });\n      })\n      .catch((err) => {\n        const errorMessage = err.response\n          ? err.response.data.error\n          : 'An unknown error has occurred';\n        dispatch({ type: `${name}_FAILURE`, error: errorMessage });\n      });\n  }\n};\n\nexport default apiMiddleware;\n","import mockUsers from \"./MockUsers.json\";\nimport { calcTotalPrice } from \"../../utils/basketUtils\";\nimport { types as authTypes } from \"../api/auth\";\nimport { types as productTypes } from \"../api/product\";\nimport { types as basketTypes } from \"../api/basket\";\n\nlet mockBasket = localStorage.getItem(\"basket\")\n  ? JSON.parse(localStorage.getItem(\"basket\"))\n  : {\n      basketId: 0,\n      items: [],\n      totalPrice: 0,\n      shopper: 0,\n    };\n\nconst handleRequest = (dispatch, name, req) => {\n  let res = {};\n  if (name === authTypes.GET_USER) {\n    const token = req.headers.authorization.split(\" \")[1];\n    res = mockUsers.find((user) => user.token === token);\n    if (res) {\n      dispatch({ type: `${name}_SUCCESS`, response: res });\n    } else {\n      dispatch({ type: `${name}_FAILURE`, error: \"Invalid token\" });\n    }\n  } else if (name === authTypes.LOGIN) {\n    res = mockUsers.find(\n      (user) =>\n        user.email === req.data.email && user.password === req.data.password\n    );\n    if (res) {\n      dispatch({\n        type: `${name}_SUCCESS`,\n        response: { user: res, token: res.token },\n      });\n    } else {\n      dispatch({\n        type: `${name}_FAILURE`,\n        error: \"Incorrect email or password\",\n      });\n    }\n  } else if (name === authTypes.LOGOUT) {\n    dispatch({ type: `${name}_SUCCESS` });\n  } else if (name === productTypes.GET_PRODUCTS) {\n    return false;\n    // const searchQuery = req.params.query;\n    // const searchRetailer = req.params.retailer;\n    // const limit = req.params.limit;\n    // let products = searchRetailer\n    //   ? mockProducts.filter((product) => product.retailer === searchRetailer)\n    //   : mockProducts;\n    // products = searchQuery\n    //   ? products.filter(\n    //       (product) =>\n    //         product.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    //         product.productId.toString() === searchQuery\n    //     )\n    //   : products;\n    // if (limit) products = products.slice(0, Math.min(limit, products.length));\n    // dispatch({ type: `${name}_SUCCESS`, response: products });\n    // } else if (name === basketTypes.UPDATE_BASKET) {\n    //   if (req.data.items) {\n    //     mockBasket.items = req.data.items;\n    //   }\n    //   mockBasket.totalPrice = calcTotalPrice(mockBasket.items);\n    //   localStorage.setItem(\"basket\", JSON.stringify(mockBasket));\n    //   dispatch({ type: `${name}_SUCCESS`, response: mockBasket });\n    // } else if (name === basketTypes.GET_BASKET) {\n    //   dispatch({ type: `${name}_SUCCESS`, response: mockBasket });\n    // } else if (name === basketTypes.DELETE_BASKET) {\n    //   mockBasket = {\n    //     basketId: 0,\n    //     items: [],\n    //     totalPrice: 0,\n    //     shopper: 0,\n    //   };\n    //   localStorage.setItem(\"basket\", JSON.stringify(mockBasket));\n    //   dispatch({ type: `${name}_SUCCESS`, response: mockBasket });\n  } else {\n    return false;\n  }\n  return true;\n};\n\nexport { handleRequest };\n","import { combineReducers } from 'redux';\nimport { reducer as toastr } from 'react-redux-toastr';\nimport auth from './api/auth';\nimport product from './api/product';\nimport basket from './api/basket';\nimport tokens from './api/tokens';\nimport error from './error';\n\nconst rootReducer = combineReducers({\n  toastr,\n  auth,\n  product,\n  basket,\n  tokens,\n  error,\n});\n\nexport default rootReducer;\n","import thunk from \"redux-thunk\";\nimport { createStore, applyMiddleware, compose } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport apiMiddleware from \"../utils/apiMiddleware\";\nimport config from \"../config\";\nimport rootReducer from \"./rootReducer\";\n\nconst composeEnhancers = config.ENV === \"production\" ? compose : composeWithDevTools;\nconst enhancers = [applyMiddleware(thunk, apiMiddleware)];\nconst store = createStore(rootReducer, composeEnhancers(...enhancers));\n\nexport default store;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { Provider } from \"react-redux\";\nimport store from \"./store\";\nimport \"../src/assets/css/style.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}