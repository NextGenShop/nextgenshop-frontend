{"version":3,"sources":["assets/images/placeholder_image.png","store/api/basket/types.js","store/api/basket/reducer.js","utils/authHeader.js","store/api/basket/actions.js","store/api/basket/index.js","utils/basketUtils.js","components/Basket.js","components/VideoChat.js","store/api/product/types.js","store/api/product/reducer.js","store/api/product/actions.js","store/api/product/index.js","components/ProductCatalog.js","components/ProductSearchBox.js","utils/displayToast.js","views/cashier/CashierPage.js","store/api/tokens/types.js","store/api/tokens/reducer.js","store/api/tokens/actions.js","store/api/tokens/index.js","utils/speechUtils.js","assets/models/AvatarV2.glb","components/ArtificialCashier.js","views/shopper/ShopperPage.js","config/index.js","store/api/auth/types.js","store/api/auth/reducer.js","store/api/auth/actions.js","store/api/auth/index.js","components/Navbar.js","views/Main.js","store/error/reducer.js","store/error/index.js","views/Login.js","store/error/selector.js","components/FirstStep.js","components/SecondStep.js","components/Confirm.js","components/Success.js","components/formValidation.js","components/StepForm.js","views/shopper/CheckoutPage.js","App.js","store/mock/MockApi.js","utils/apiMiddleware.js","store/rootReducer.js","store/index.js","index.js"],"names":["GET_BASKET","UPDATE_BASKET","DELETE_BASKET","initialState","items","totalPrice","shopper","authHeader","state","token","auth","authorization","baseUrl","updateBasket","shopperId","basket","dispatch","getState","type","name","types","url","requestData","method","headers","data","getBasket","deleteBasket","clearErrors","reducer","action","response","addBasketItem","product","quantity","foundItem","find","item","productId","map","useStyles","makeStyles","theme","list","height","overflowY","price","color","palette","primary","dark","fontWeight","marginRight","spacing","total","checkoutLink","textDecoration","marginLeft","connect","dispatchGetBasket","actions","dispatchUpdateBasket","basketData","classes","React","useEffect","Fragment","List","className","length","ListItem","ListItemAvatar","Avatar","src","image","PlaceholderImage","ListItemText","secondary","ListItemSecondaryAction","Typography","display","toFixed","IconButton","edge","aria-label","onClick","newBasket","newItems","filter","removeBasketItem","removeItem","variant","component","to","Button","paper","flexDirection","text","background","alignItems","justifyContent","VideoChat","Paper","GET_PRODUCTS","products","getProducts","query","retailer","limit","searchParams","params","root","tooltip","backgroundColor","maxWidth","border","card","details","content","flex","buttons","paddingLeft","paddingBottom","media","width","productText","fontSize","smallText","mb","marginBottom","addButton","dispatchGetProducts","productActions","basketActions","searchQuery","tableView","addToBasket","TableContainer","Table","size","TableBody","TableRow","Tooltip","title","alt","TableCell","scope","align","Grid","container","md","Card","CardContent","gutterBottom","CardMedia","ProductSearchBox","value","onChange","TextField","id","label","fullWidth","InputProps","startAdornment","InputAdornment","position","options","timeOut","showCloseButton","progressBar","transitionIn","transitionOut","displayToast","msg","callbackClear","toastrInstance","toastr","info","warning","error","success","onShowComplete","paddingTop","mr","mt","marginTop","divider","CashierPage","useState","setSearchQuery","Container","xs","e","target","GET_SPEECH_TO_TEXT_TOKEN","GET_TEXT_TO_SPEECH_TOKEN","GET_ASSISTANT_TOKEN","speechToTextToken","speechToTextUrl","textToSpeechToken","textToSpeechUrl","assistantToken","assistantUrl","getSpeechToTextToken","getTextToSpeechToken","getAssistantToken","accessToken","captureAudioFromMicrophone","a","mediaStream","navigator","mediaDevices","getUserMedia","video","audio","console","log","recognizeMicrophoneStream","recognizeMic","objectMode","extractResults","format","keepMicrophone","textToSpeech","voice","accept","element","synthesize","createAssistantSession","fetch","Headers","Authorization","res","json","session","session_id","messageAssistant","sessionId","message","speech","Accept","body","JSON","stringify","input","output","generic","reduce","acc","obj","response_type","includes","push","trim","replace","join","user_defined","stripSSMLTags","str","err","inner","bold","transcript","wordWrap","paddingRight","withRouter","tokens","authUser","user","dispatchGetSpeechToTextToken","dispatchGetTextToSpeechToken","dispatchGetAssistantToken","history","loaded","setLoaded","listening","setListening","responding","setResponding","stream","setStream","setSpeechText","responseText","setResponseText","assistantSessionId","setAssistantSessionId","audioRef","useRef","redirectCheckout","setRedirectCheckout","voiceIndex","synthesizeTextToSpeech","useCallback","audioElement","document","createElement","canPlayType","current","removeEventListener","handleAudioPlayingEvent","handleAudioEndedEvent","addEventListener","instanceId","createSession","startListening","stopAudio","on","final","speechText","alternatives","handleAssistantActions","stop","action_type","p","parseInt","product_id","userId","product_query_string","resetProductCatalog","pathname","pause","currentTime","ListenButton","ref","autoplay","loading","animation-name","style","AvatarV2Model","CircularProgress","config","API_URL","ENV","process","HOME_URL","APP_NAME","GET_USER","LOGIN","LOGOUT","REGISTER","localStorage","getItem","isAuthenticated","getUser","login","logout","register","setItem","flexGrow","dispatchLogout","AppBar","Toolbar","Link","RenderComponent","errorMessage","Array","isArray","matches","exec","requestName","requestState","heading","errorSelector","_","get","compact","first","dispatchLogin","dispatchClearErrors","email","setEmail","password","setPassword","Divider","FirstStep","handleNext","handleChange","values","firstName","lastName","phone","formErrors","isValid","sm","placeholder","margin","helperText","required","disabled","SecondStep","handleBack","address1","address2","city","postcode","country","listItem","padding","disablePadding","direction","box","Success","Box","isText","RegExp","isEmail","isPhone","isZip","isNumber","labels","initialValues","fieldsValidation","validate","minLength","maxLength","StepForm","activeStep","setActiveStep","formValues","setFormValues","setFormErrors","prev","schema","test","formValidation","Stepper","alternativeLabel","Step","StepLabel","step","handleSteps","appBar","layout","breakpoints","up","stepper","button","CssBaseline","noWrap","App","basename","exact","path","Main","Login","Checkout","newestOnTop","closeOnToastrClick","preventDuplicates","handleRequest","req","authTypes","split","mockUsers","apiMiddleware","next","extraData","axios","defaults","baseURL","common","request","rootReducer","combineReducers","composeEnhancers","compose","composeWithDevTools","enhancers","applyMiddleware","thunk","store","createStore","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.36a38fee.chunk.js","sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAJYCAMAAACJuGjuAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMAUExURbe3t729vb6+vr+/v8DAwMLCwsPDw8TExMbGxsjIyMnJyczMzM7Ozs/Pz9LS0tPT09vb2+rq6vT09P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHsomCEAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjEuNv1OCegAAAq5SURBVHhe7d3teptWGoZRdyYfTZO4rub8z3VQJDewNyBAD7K0tda/2qoUXt8XIEDoBQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWvf6RuH1PBqu8fY/Cm/n0XANYVWElSCsirAShFURVoKwKsJKEFZFWAnCqggrQVgVYSUIqyKsBGFVhJXQC+twPqXxlA7nIXSEldAL66kHag5hBnpiDmEGemIOYQZ6Yg5hBnpiDmEGemIOYQZ6Yg5hBnpiDmEGemIOYQZ6Yg5hBnpiDmEGemIOYc0O9I8f59PLbz/+OP9ojrDCmhzo5y6n3uUKx8s2Pp9/NUVYYQ0O9Hs/qneHt+/nX48TVlhzA30dy+roMPvZeWGFNTbQ0bXVu8Pbt/PDasIKa2qgn+eyOjq8fTk/tCSssJYG+u1CVkeHP88PLggrrKGBvi7oqitrfE9LWGHtDHRZV1NlCSusmYEu7WqiLGGFtTLQ5V2NlyWssEYGOrbffv6c5Nhv6j14YYW1MdDPZT1dVD8/nX736Wfd1qE66iCssDYG2luKo/L8zae/y7aqZRVWWBMD/T7MZmwfqtgHO/x1/vk7YYU1MdDBCuswfiXDl+FKq1xYYYW1MNDB2mjiAGhn9mHCCmthoP0V1nRXRVnF0gorrIGBDvawZhdiUOBw/15YYQ0MdJDL7JWiX6YTFFbY4w+0X8vchvCovzEcHssSVtjjD7S/wrq4CJMPFlZYU2FVR6cqwrqVhx/op97W7fIS9LebwtrTww/0v+d//dGCJegt76H/eUNhhT38QH+e//VHP88/mzH1cGGFPfxA+6ug8/UMc/4zsS0UVlhLYS1agInHCytMWCfCChPWibDChHUirDBhnQgrTFgnwgprKSyHG+7Iww/UAdL79PADdUrnPj38QJ2Evk+PP9D+OshlM3ejqbAuL4KwbuXxB+rS5LvUwED7ayEfprgXDQx08ce/Bl35+Ne+WhjoYJU1szHsP65cWmGFtTDQZR+xH968oXyYsMKaGOhgVTRxU5DiFlrlwgorrImBuo3R/WljoINV1nGlNdwz/1LdMLJaVmGFtTHQsVtF/ni/VeQPt4r8AI0M9K+qnV9xubnth2lloMU+1KyxfTBhhTUz0OVljR6QEFZYOwNdWtb4gS5hhTU00GVljXclrLSWBvrngrJ8rdyNNDXQ4pbbNV+EeTONDfTCV/dOX2EqrLD9B9r/yMIN+LLx+7D7QF//GT8pvJ/RtVZ5lqckrLC9B3p8qza1w7ybL8MD7sdD8FP7Vu+EFbbzQE+HACbe4u/qj5+/Tuh0fi7ZGAsrbN+Bvh9a+oiy1hFW2K4D/X3IcuLqu/shrLA9Bzo4FH74dv7pfRJW2I4DHXR175tDYYXtN9Ciq+Pm8NJbsw8krLDdBlp11Tl8Pf/y/ggrbK+BjnV1z5tDYYXtNNDxru64LGGF7TPQqa6OO1r3edxBWGG7DHS6q859HncQVtgeA53t6k43h8IK22GgRVeH6mKDeyxLWGH5gZZdvdZrsDvc0RJWWHygdVdjHyct7k4VcsU1hcIKSw90rKuXl8+32Bx+eftn+6F9YYWFBzreVWf/zeHx/g3bF0FYYdmBTnY1Ulb4wtJvx+ffvh4UVlh0oDNdvbx8rcsKbg7Pt8ja/JTCCksOdLarsU/95cr696W3PqWwwoIDvdBVp9ocpna0ek+8sSxhhcUGWr7xG/0Djxx3CJzgmb9t7TLCCksNtLyn3sSfd4/N4cKXniessNBAqz/u5IfZRzaH111YWt8KZEtZwgrLDHR5VyNlXXdh6a/DDIUNZQkrLDLQNV2lVjFndaZH659QWGGJga7rqnt8bkdrvKsNTyissMBA13bVGdnR2nTcYaqr9WUJK+z6gW7oqvouic6G4w71mq9nZVnCCrt6oJu6enn5ev3m8MKdIdc9n7DCrh3oxq469eZwXVnV28HyUtVVzyessCsHur2ra3e06v/7r/Jna8oSVth1A72mq+suLK27Oka5vSxhhV010HJrtK6rsb3vpSmUXb0fvt9clrDCrhnotV116hXPks1hFeTvgLaWJaywKwZadbXlzExV1oILS6tLBvv5lGUt3LgKK2z7QKuutl1atf4ET/12cBBPWday42PCCts80FBX66+kqbeexRZ4U1nCCts60FhXnTqVmR2t+sHVY7eUJaywjQNNdrXqBE/Z1ejVXBvKElbYtoFmu1q+OZx5OziwvixhhW0aaLqrTr2FG1kVlcdjp/fGVpclrLAtA92hq5Gy6sMX5evOHUtYW5awwjYMdJeuRk/wDNdH9Upt7oDsyrKEFbZ+oDt1dfEET93V/Av3luzownFXYYWtHmj594111anb+X3coXrdSx/uqU6Qz/5DhRW2dqB7djVz3GHp28G+VWUJK2zlQIuuNl6qPm3iziHL3w72rSlLWGHrBlp2teTPu87oEa367eCyF15RlrDCVg10/6465ca2Wy1WP1l6fc7ysoQVtmagN+lq7LhD4bD8M/mLyxJW2IqB3qirsc1h37r9uqVlCSts+UBv1lWn2hz+tvZ1F5YlrLDFA71lVzNlrX/dZWUJK2zpQG/b1eSnUbe8bvlUo8sprLCFA711V92KZmxHa8PHNTrFu4HRf7ywwpYN9PZdderN4Yq3gwMLyhJW2KKBfkhX1QmeKw7zXy5LWGFLBvpBXRXHHa562YtlCStswUA/rKvO79e+8mUvlSWssMsD/ciufr/61S97oSxhhV0c6Md29R7EtreDA/NlCSvs0kA/uqvTcYer7qv8brYsYYVdGOjHd9V5DV31NVeWsMLmB3oXXeXMLI6wwmYH2lhXcwskrLC5gTbX1cwiCStsZqANdjW9UMIKmx5ok11NLpawwiYH2mhXUwsmrLCJgZYXrbTT1URZwgobH2h11WVDXY2XJayw0YG23dVoWcIKGxto1dX1J+ruTF2WsMJGBtp+V3VZf/f+W1gJdVjP0FVVVp+wEqqwnqOrubKElVCG9SxdzZQlrIQirOfparosYSUMw3qmribLElbCIKzn6mqqLGEl9MI6VLetbbyribKEldALq9R+V+NlCSthOqxn6Gp0+YWVMBnWc3RV7VZ2hJUwFVbkA1ePoC5LWAkTYU3fBbY5VVnCShgP64m6qssSVsJoWE/VVVWWsBLGwnqyrsqyhJUwEtbTdVWUJayEOqwn7GpYlrASqrCesqvBHISVUIb1pF0JK60I61m7ElbaMKyn7UpYaYOwnrcrYaX1Bhr/utRHIqwwAz0xhzADPTGHMAM9MYcwAz0xhzADPTGHsN5AD29PzLnCsF5YnAgrQVgVYSUIqyKsBGFVhJUgrIqwEoRVEVaCsCrCShBWRVgJwqoIK0FYFWElvJ5PafCvxr6GAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE5eXv4PCPm30ZytnHEAAAAASUVORK5CYII=\"","export const GET_BASKET = \"basket/GET_BASKET\";\nexport const UPDATE_BASKET = \"basket/UPDATE_BASKET\";\nexport const DELETE_BASKET = \"basket/DELETE_BASKET\";\n","import * as types from \"./types\";\n\nconst initialState = {\n  items: [],\n  totalPrice: 0,\n  shopper: 0,\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case `${types.GET_BASKET}_SUCCESS`:\n    case `${types.UPDATE_BASKET}_SUCCESS`:\n      return {\n        ...state,\n        items: action.response.items,\n        totalPrice: action.response.totalPrice,\n        shopper: action.response.shopper,\n      };\n    case `${types.DELETE_BASKET}_SUCCESS`:\n      return initialState;\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","export default function authHeader(state) {\n  const token = state.auth.token;\n  if (token) {\n    return { authorization: `Token ${token}` };\n  } else {\n    return null;\n  }\n}\n","import authHeader from '../../../utils/authHeader';\r\nimport * as types from './types';\r\n\r\nconst baseUrl = '/basket';\r\n\r\nexport const updateBasket = (shopperId, basket) => (dispatch, getState) => {\r\n  dispatch({\r\n    type: 'API',\r\n    name: types.UPDATE_BASKET,\r\n    url: `${baseUrl}/${shopperId}`,\r\n    requestData: {\r\n      method: 'PUT',\r\n      headers: authHeader(getState()),\r\n      data: basket,\r\n    },\r\n  });\r\n};\r\n\r\nexport const getBasket = (shopperId) => (dispatch, getState) => {\r\n  dispatch({\r\n    type: 'API',\r\n    name: types.GET_BASKET,\r\n    url: `${baseUrl}/${shopperId}`,\r\n    requestData: {\r\n      method: 'GET',\r\n      headers: authHeader(getState()),\r\n    },\r\n  });\r\n};\r\n\r\nexport const deleteBasket = (shopperId) => (dispatch, getState) => {\r\n  dispatch({\r\n    type: 'API',\r\n    name: types.DELETE_BASKET,\r\n    url: `${baseUrl}/${shopperId}`,\r\n    requestData: {\r\n      method: 'DELETE',\r\n      headers: authHeader(getState()),\r\n    },\r\n  });\r\n};\r\n\r\nexport const clearErrors = () => (dispatch) => {\r\n  dispatch({\r\n    type: `${types.UPDATE_BASKET}_CLEARERR`,\r\n  });\r\n  dispatch({\r\n    type: `${types.GET_BASKET}_CLEARERR`,\r\n  });\r\n  dispatch({\r\n    type: `${types.DELETE_BASKET}_CLEARERR`,\r\n  });\r\n};\r\n","import reducer from \"./reducer\";\nimport * as actions from \"./actions\";\nimport * as types from \"./types\";\n\nexport { actions, types };\nexport default reducer;\n","const calcTotalPrice = (items) => {\r\n  let totalPrice = 0;\r\n  for (let item of items) {\r\n    totalPrice += item.product.price * item.quantity;\r\n  }\r\n  return totalPrice;\r\n};\r\n\r\nconst addBasketItem = (product, basket, quantity = 1) => {\r\n  let newItems = [];\r\n  const foundItem = basket.items.find(\r\n    (item) => item.product.productId === product.productId\r\n  );\r\n  if (foundItem) {\r\n    newItems = basket.items.map((item) =>\r\n      item.product.productId === foundItem.product.productId\r\n        ? { ...item, quantity: item.quantity + quantity }\r\n        : item\r\n    );\r\n  } else {\r\n    newItems = [...basket.items, { product, quantity }];\r\n  }\r\n  return { items: newItems };\r\n};\r\n\r\nconst removeBasketItem = (productId, basket) => {\r\n  let newItems = basket.items.map((item) => {\r\n    if (item.product.productId === productId) {\r\n      return null;\r\n    }\r\n    return item;\r\n  });\r\n  newItems = newItems.filter((item) => item !== null);\r\n  return { items: newItems };\r\n};\r\n\r\nexport { addBasketItem, removeBasketItem, calcTotalPrice };\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\r\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport PlaceholderImage from \"../assets/images/placeholder_image.png\";\r\nimport { connect } from \"react-redux\";\r\nimport { actions } from \"../store/api/basket\";\r\nimport { removeBasketItem } from \"../utils/basketUtils\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  list: {\r\n    height: \"29vh\",\r\n    overflowY: \"scroll\",\r\n  },\r\n  price: {\r\n    color: theme.palette.primary.dark,\r\n    fontWeight: 600,\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  total: {\r\n    fontWeight: \"bold\",\r\n  },\r\n  checkoutLink: {\r\n    textDecoration: \"none\",\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport function Basket({ shopperId, dispatchUpdateBasket, dispatchGetBasket, basket }) {\r\n  const classes = useStyles();\r\n\r\n  React.useEffect(() => {\r\n    dispatchGetBasket(shopperId);\r\n  }, [dispatchGetBasket, shopperId]);\r\n\r\n  const removeItem = (productId) => {\r\n    const newBasket = removeBasketItem(productId, basket);\r\n    dispatchUpdateBasket(shopperId, newBasket);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <List className={classes.list}>\r\n        {basket && basket.items && basket.items.length > 0 ? (\r\n          basket.items.map((item) => (\r\n            <ListItem key={item.product.productId}>\r\n              <ListItemAvatar>\r\n                <Avatar\r\n                  src={\r\n                    item.product.image === \"mockImageUrl\" ? PlaceholderImage : item.product.image\r\n                  }\r\n                />\r\n              </ListItemAvatar>\r\n              <ListItemText primary={item.product.name} secondary={\"Qty: \" + item.quantity} />\r\n              <ListItemSecondaryAction>\r\n                <Typography className={classes.price} display=\"inline\">\r\n                  {(item.product.price * item.quantity).toFixed(2)}\r\n                </Typography>\r\n                <IconButton\r\n                  edge=\"end\"\r\n                  aria-label=\"deleteButton\"\r\n                  onClick={() => removeItem(item.product.productId)}\r\n                >\r\n                  <DeleteIcon />\r\n                </IconButton>\r\n              </ListItemSecondaryAction>\r\n            </ListItem>\r\n          ))\r\n        ) : (\r\n          <Typography variant=\"subtitle2\">Your shopping basket is empty.</Typography>\r\n        )}\r\n      </List>\r\n      <Typography className={classes.total} variant=\"h6\" component=\"div\">\r\n        Total:{\" \"}\r\n        <Typography variant=\"h6\" display=\"inline\">\r\n           {basket && basket.totalPrice ? basket.totalPrice.toFixed(2) : 0}\r\n        </Typography>\r\n        <Link to=\"/checkout\" className={classes.checkoutLink}>\r\n          <Button variant=\"outlined\" color=\"primary\">\r\n            Checkout\r\n          </Button>\r\n        </Link>\r\n      </Typography>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  basket: state.basket,\r\n});\r\n\r\nexport const mapDispatchToProps = (dispatch) => ({\r\n  dispatchGetBasket: (shopperId) => dispatch(actions.getBasket(shopperId)),\r\n  dispatchUpdateBasket: (shopperId, basketData) =>\r\n    dispatch(actions.updateBasket(shopperId, basketData)),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Basket);\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    color: theme.palette.text.secondary,\r\n    background: '#eeeeee',\r\n    height: '75vh',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n}));\r\n\r\nexport default function VideoChat() {\r\n  const classes = useStyles();\r\n  return (\r\n    <Paper className={classes.paper}>\r\n      <AccountCircleIcon />\r\n      <Typography variant='subtitle1'>\r\n        The video chat component is under development.\r\n      </Typography>\r\n    </Paper>\r\n  );\r\n}\r\n","export const GET_PRODUCTS = \"product/GET_PRODUCTS\";\n","import * as types from \"./types\";\n\nconst initialState = {\n  products: [],\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case `${types.GET_PRODUCTS}_SUCCESS`:\n      return {\n        ...state,\n        products: action.response,\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","import authHeader from '../../../utils/authHeader';\r\nimport * as types from './types';\r\n\r\nconst baseUrl = '/product';\r\n\r\nexport const getProducts = (query, retailer, limit) => (dispatch, getState) => {\r\n  let searchParams = {};\r\n  if (query) {\r\n    searchParams.query = query;\r\n  }\r\n  if (retailer) {\r\n    searchParams.retailer = retailer;\r\n  }\r\n  if (limit) {\r\n    searchParams.limit = limit;\r\n  }\r\n  dispatch({\r\n    type: 'API',\r\n    name: types.GET_PRODUCTS,\r\n    url: baseUrl,\r\n    requestData: {\r\n      method: 'GET',\r\n      headers: authHeader(getState()),\r\n      params: searchParams,\r\n    },\r\n  });\r\n};\r\n","import reducer from \"./reducer\";\nimport * as actions from \"./actions\";\nimport * as types from \"./types\";\n\nexport { actions, types };\nexport default reducer;\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Button from '@material-ui/core/Button';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport PlaceholderImage from '../assets/images/placeholder_image.png';\r\nimport { connect } from 'react-redux';\r\nimport { actions as productActions } from '../store/api/product';\r\nimport { actions as basketActions } from '../store/api/basket';\r\nimport { addBasketItem } from '../utils/basketUtils';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: '29vh',\r\n    overflowY: 'scroll',\r\n  },\r\n  tooltip: {\r\n    backgroundColor: '#f5f5f9',\r\n    color: 'rgba(0, 0, 0, 0.87)',\r\n    maxWidth: 300,\r\n    border: '1px solid #dadde9',\r\n  },\r\n  card: {\r\n    display: 'flex',\r\n  },\r\n  details: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n  },\r\n  content: {\r\n    flex: '1 0 auto',\r\n  },\r\n  buttons: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    paddingLeft: theme.spacing(1),\r\n    paddingBottom: theme.spacing(1),\r\n  },\r\n  media: {\r\n    width: 80,\r\n  },\r\n  productText: {\r\n    fontWeight: 'bold',\r\n    fontSize: '13px',\r\n  },\r\n  smallText: {\r\n    fontSize: '12px',\r\n  },\r\n  mb: {\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  addButton: {\r\n    width: 20,\r\n  },\r\n}));\r\n\r\nexport function ProductCatalog({\r\n  searchQuery,\r\n  retailer,\r\n  limit,\r\n  tableView,\r\n  products,\r\n  shopperId,\r\n  dispatchGetProducts,\r\n  dispatchUpdateBasket,\r\n  basket,\r\n}) {\r\n  const classes = useStyles();\r\n\r\n  React.useEffect(() => {\r\n    dispatchGetProducts(searchQuery, retailer, limit);\r\n  }, [dispatchGetProducts, limit, retailer, searchQuery]);\r\n\r\n  const addToBasket = (product) => {\r\n    const newBasket = addBasketItem(product, basket);\r\n    dispatchUpdateBasket(shopperId, newBasket);\r\n  };\r\n\r\n  return tableView ? (\r\n    <TableContainer className={classes.root}>\r\n      <Table size='small' aria-label='product catalog table'>\r\n        <TableBody>\r\n          {products &&\r\n            products.map((product) => (\r\n              <TableRow key={product.productId}>\r\n                <Tooltip\r\n                  title={\r\n                    <img\r\n                      alt='product'\r\n                      className={classes.media}\r\n                      src={\r\n                        product.image === 'mockImageUrl'\r\n                          ? PlaceholderImage\r\n                          : product.image\r\n                      }\r\n                    />\r\n                  }\r\n                >\r\n                  <TableCell component='th' scope='row'>\r\n                    {product.name}\r\n                  </TableCell>\r\n                </Tooltip>\r\n                <TableCell align='right'>\r\n                   {product.price.toFixed(2)}\r\n                </TableCell>\r\n                <TableCell align='right'>\r\n                  <Button\r\n                    aria-label='addToBasketButton'\r\n                    variant='contained'\r\n                    size='small'\r\n                    color='primary'\r\n                    onClick={() => addToBasket(product)}\r\n                  >\r\n                    Add to basket\r\n                  </Button>\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n  ) : (\r\n    <Grid container spacing={2} className={classes.root}>\r\n      {products &&\r\n        products.map((product) => (\r\n          <Grid item md={4} key={product.productId}>\r\n            <Card className={classes.card}>\r\n              <div className={classes.details}>\r\n                <CardContent className={classes.content}>\r\n                  <Typography\r\n                    className={classes.productText}\r\n                    gutterBottom\r\n                    variant='subtitle2'\r\n                  >\r\n                    {product.name}\r\n                  </Typography>\r\n                  <Typography\r\n                    className={classes.smallText}\r\n                    display='inline'\r\n                    variant='body2'\r\n                    color='textSecondary'\r\n                    component='p'\r\n                  >\r\n                    Price:{' '}\r\n                  </Typography>\r\n                  <Typography\r\n                    className={classes.smallText}\r\n                    display='inline'\r\n                    variant='body2'\r\n                    color='primary'\r\n                    component='p'\r\n                  >\r\n                     {product.price.toFixed(2)}\r\n                  </Typography>\r\n                  <br />\r\n                  <Typography\r\n                    className={classes.smallText}\r\n                    display='inline'\r\n                    variant='body2'\r\n                    color='textSecondary'\r\n                    component='p'\r\n                  >\r\n                    Retailer:{' '}\r\n                  </Typography>\r\n                  <Typography\r\n                    className={classes.smallText}\r\n                    display='inline'\r\n                    variant='body2'\r\n                    color='primary'\r\n                    component='p'\r\n                  >\r\n                    {product.retailer}\r\n                  </Typography>\r\n                </CardContent>\r\n                <div className={classes.buttons}>\r\n                  <Button\r\n                    className={classes.addButton}\r\n                    aria-label='addToBasketButton'\r\n                    variant='contained'\r\n                    size='small'\r\n                    color='primary'\r\n                    onClick={() => addToBasket(product)}\r\n                  >\r\n                    Add\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n              <CardMedia\r\n                className={classes.media}\r\n                image={\r\n                  product.image === 'mockImageUrl'\r\n                    ? PlaceholderImage\r\n                    : product.image\r\n                }\r\n              />\r\n            </Card>\r\n          </Grid>\r\n        ))}\r\n    </Grid>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  products: state.product.products,\r\n  basket: state.basket,\r\n});\r\n\r\nexport const mapDispatchToProps = (dispatch) => ({\r\n  dispatchGetProducts: (query, retailer, limit) =>\r\n    dispatch(productActions.getProducts(query, retailer, limit)),\r\n  dispatchUpdateBasket: (shopperId, basketData) =>\r\n    dispatch(basketActions.updateBasket(shopperId, basketData)),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductCatalog);\r\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport SearchIcon from \"@material-ui/icons/Search\";\n\nconst useStyles = makeStyles((theme) => ({\n  mb: {\n    marginBottom: theme.spacing(2),\n  },\n}));\n\nexport default function ProductSearchBox({ value, onChange }) {\n  const classes = useStyles();\n  return (\n    <TextField\n      className={classes.mb}\n      id=\"search\"\n      label=\"Search for a product\"\n      fullWidth\n      value={value}\n      onChange={onChange}\n      InputProps={{\n        startAdornment: (\n          <InputAdornment position=\"start\">\n            <SearchIcon />\n          </InputAdornment>\n        ),\n      }}\n    />\n  );\n}\n","import { toastr } from \"react-redux-toastr\";\n\nlet options = {\n  timeOut: 5000,\n  showCloseButton: true,\n  progressBar: false,\n  transitionIn: \"fadeIn\",\n  transitionOut: \"fadeOut\",\n};\n\nexport const displayToast = (title, msg, type, callbackClear) => {\n  const toastrInstance =\n    type === \"info\"\n      ? toastr.info\n      : type === \"warning\"\n      ? toastr.warning\n      : type === \"danger\"\n      ? toastr.error\n      : toastr.success;\n  if (callbackClear) options.onShowComplete = callbackClear;\n  toastrInstance(title, msg, options);\n};\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Container from '@material-ui/core/Container';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Basket from '../../components/Basket';\r\nimport VideoChat from '../../components/VideoChat';\r\nimport ProductCatalog from '../../components/ProductCatalog';\r\nimport ProductSearchBox from '../../components/ProductSearchBox';\r\nimport { displayToast } from '../../utils/displayToast';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    paddingTop: theme.spacing(2),\r\n    paddingBottom: theme.spacing(2),\r\n  },\r\n  media: {\r\n    height: 0,\r\n    paddingTop: '56.25%', // 16:9\r\n  },\r\n  mr: {\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  mt: {\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  divider: {\r\n    marginTop: theme.spacing(2),\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport default function CashierPage() {\r\n  const classes = useStyles();\r\n  const [searchQuery, setSearchQuery] = React.useState('');\r\n  const mockRetailer = 'Mock Retailer';\r\n  const mockConnectedShopperId = 0;\r\n\r\n  React.useEffect(() => {\r\n    displayToast(\r\n      '',\r\n      'The cashier page is under development and only for demonstration purposes.',\r\n      'warning'\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <Container maxWidth='xl' className={classes.root}>\r\n      <Grid container spacing={3}>\r\n        <Grid item md={6}>\r\n          <Typography\r\n            variant='subtitle1'\r\n            display='inline'\r\n            className={classes.mr}\r\n          >\r\n            Video Call\r\n          </Typography>\r\n          <Typography variant='subtitle2' display='inline'>\r\n            {' '}\r\n            Customer Name\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <Grid container spacing={3}>\r\n            <Grid item xs={12}>\r\n              <Typography variant='subtitle1'>Product Catalogue</Typography>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n      <Grid container spacing={3}>\r\n        <Grid item md={6}>\r\n          <VideoChat />\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <Grid container spacing={3}>\r\n            <Grid item xs={12}>\r\n              <ProductSearchBox\r\n                value={searchQuery}\r\n                onChange={(e) => {\r\n                  setSearchQuery(e.target.value);\r\n                }}\r\n              />\r\n              <ProductCatalog\r\n                tableView\r\n                retailer={mockRetailer}\r\n                searchQuery={searchQuery}\r\n                shopperId={mockConnectedShopperId}\r\n              />\r\n              <hr className={classes.mt} />\r\n              <Typography variant='subtitle1'>Customer Basket</Typography>\r\n              <Basket shopperId={mockConnectedShopperId} />\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n    </Container>\r\n  );\r\n}\r\n","export const GET_SPEECH_TO_TEXT_TOKEN = 'tokens/GET_SPEECH_TO_TEXT_TOKEN';\r\nexport const GET_TEXT_TO_SPEECH_TOKEN = 'tokens/GET_TEXT_TO_SPEECH_TOKEN';\r\nexport const GET_ASSISTANT_TOKEN = 'tokens/GET_ASSISTANT_TOKEN';\r\n","import * as types from './types';\r\n\r\nconst initialState = {\r\n  speechToTextToken: null,\r\n  speechToTextUrl: null,\r\n  textToSpeechToken: null,\r\n  textToSpeechUrl: null,\r\n  assistantToken: null,\r\n  assistantUrl: null,\r\n};\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case `${types.GET_SPEECH_TO_TEXT_TOKEN}_SUCCESS`:\r\n      return {\r\n        ...state,\r\n        speechToTextToken: action.response.accessToken,\r\n        speechToTextUrl: action.response.url,\r\n      };\r\n    case `${types.GET_TEXT_TO_SPEECH_TOKEN}_SUCCESS`:\r\n      return {\r\n        ...state,\r\n        textToSpeechToken: action.response.accessToken,\r\n        textToSpeechUrl: action.response.url,\r\n      };\r\n    case `${types.GET_ASSISTANT_TOKEN}_SUCCESS`:\r\n      return {\r\n        ...state,\r\n        assistantToken: action.response.accessToken,\r\n        assistantUrl: action.response.url,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import * as types from './types';\r\n\r\nconst baseUrl = '/tokens';\r\n\r\nexport const getSpeechToTextToken = () => (dispatch) => {\r\n  dispatch({\r\n    type: 'API',\r\n    name: types.GET_SPEECH_TO_TEXT_TOKEN,\r\n    url: `${baseUrl}/speech-to-text`,\r\n    requestData: {\r\n      method: 'GET',\r\n    },\r\n  });\r\n};\r\n\r\nexport const getTextToSpeechToken = () => (dispatch) => {\r\n  dispatch({\r\n    type: 'API',\r\n    name: types.GET_TEXT_TO_SPEECH_TOKEN,\r\n    url: `${baseUrl}/text-to-speech`,\r\n    requestData: {\r\n      method: 'GET',\r\n    },\r\n  });\r\n};\r\n\r\nexport const getAssistantToken = () => (dispatch) => {\r\n  dispatch({\r\n    type: 'API',\r\n    name: types.GET_ASSISTANT_TOKEN,\r\n    url: `${baseUrl}/assistant`,\r\n    requestData: {\r\n      method: 'GET',\r\n    },\r\n  });\r\n};\r\n","import reducer from \"./reducer\";\r\nimport * as actions from \"./actions\";\r\nimport * as types from \"./types\";\r\n\r\nexport { actions, types };\r\nexport default reducer;\r\n","import recognizeMic from \"watson-speech/speech-to-text/recognize-microphone\";\r\nimport synthesize from \"watson-speech/text-to-speech/synthesize\";\r\n\r\n//audio/wav is supported in Chrome, Edge, Firefox (v3.5), Opera (v11.00), Safari (v3.1)\r\n//audio/mp3 is supported in Chrome, IE9, Edge, Firefox (v71), Opera, Safari (v3.1)\r\n//ref: https://en.wikipedia.org/wiki/HTML5_audio\r\n\r\nexport const getSupportedAudioFormat = (audioElement) => {\r\n  if (!audioElement) {\r\n    audioElement = document.createElement(\"audio\");\r\n  }\r\n\r\n  let accept =\r\n    audioElement &&\r\n    typeof audioElement.canPlayType === \"function\" &&\r\n    audioElement.canPlayType(\"audio/mp3\") !== \"\"\r\n      ? \"audio/mp3\"\r\n      : \"audio/wav\";\r\n\r\n  return accept;\r\n};\r\n\r\nexport const captureAudioFromMicrophone = async (speechToTextUrl, speechToTextToken) => {\r\n  let mediaStream = null;\r\n  try {\r\n    mediaStream = await navigator.mediaDevices.getUserMedia({\r\n      video: false,\r\n      audio: true,\r\n    });\r\n  } catch (err) {\r\n    console.log(\"Could not find media devices\");\r\n  }\r\n\r\n  const recognizeMicrophoneStream = recognizeMic({\r\n    url: speechToTextUrl,\r\n    accessToken: speechToTextToken,\r\n    objectMode: true,\r\n    extractResults: true,\r\n    format: true,\r\n    mediaStream,\r\n    keepMicrophone: true,\r\n  });\r\n\r\n  return recognizeMicrophoneStream;\r\n};\r\n\r\nexport const textToSpeech = async (\r\n  textToSpeechUrl,\r\n  textToSpeechToken,\r\n  text,\r\n  voice,\r\n  accept,\r\n  element\r\n) => {\r\n  return synthesize({\r\n    url: textToSpeechUrl,\r\n    accessToken: textToSpeechToken,\r\n    text,\r\n    voice,\r\n    accept,\r\n    element,\r\n  });\r\n};\r\n\r\nexport const createAssistantSession = async (assistantUrl, assistantToken) => {\r\n  let session;\r\n  try {\r\n    const res = await fetch(`${assistantUrl}/sessions?version=2020-04-01`, {\r\n      method: \"post\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + assistantToken,\r\n        \"Content-Type\": \"application/json\",\r\n      }),\r\n    });\r\n    session = await res.json();\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n  return session ? session.session_id : null;\r\n};\r\n\r\nexport const messageAssistant = async (assistantUrl, assistantToken, sessionId, message) => {\r\n  let res;\r\n  let data = { speech: \"\", actions: [] };\r\n  try {\r\n    res = await fetch(`${assistantUrl}/sessions/${sessionId}/message?version=2020-04-01`, {\r\n      method: \"post\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + assistantToken,\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      }),\r\n      body: JSON.stringify({ input: { text: message } }),\r\n    });\r\n    res = await res.json();\r\n    data.speech =\r\n      '<speak version=\"1.0\">' +\r\n      res.output.generic\r\n        .reduce((acc, obj) => {\r\n          if (obj.response_type === \"text\") {\r\n            if (obj.text.includes(\"[\")) {\r\n              acc.push(\r\n                '<prosody rate=\"medium\">' +\r\n                  obj.text\r\n                    .trim()\r\n                    .replace(/['\"[\\]]+/g, \"\")\r\n                    .replace(/,/g, \", \") +\r\n                  \"</prosody>\"\r\n              );\r\n            } else {\r\n              acc.push('<prosody rate=\"+10%\">' + obj.text.trim() + \"</prosody>\");\r\n            }\r\n          }\r\n          return acc;\r\n        }, [])\r\n        .join(' <break strength=\"medium\"></break>') +\r\n      \"</speak>\";\r\n    const actions = res.output.generic.reduce((acc, obj) => {\r\n      if (obj.response_type === \"user_defined\") {\r\n        acc.push(obj.user_defined);\r\n      }\r\n      return acc;\r\n    }, []);\r\n    data.actions = actions;\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n  return data;\r\n};\r\n\r\nexport const stripSSMLTags = (str) => {\r\n  const regex = /(<([^>]+)>)/gi;\r\n  try {\r\n    str = str.replace(regex, \"\");\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n  return str;\r\n};\r\n","export default __webpack_public_path__ + \"static/media/AvatarV2.4e2032d9.glb\";","import React, { useCallback } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport StopIcon from \"@material-ui/icons/StopOutlined\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport MicRoundedIcon from \"@material-ui/icons/MicRounded\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { connect } from \"react-redux\";\r\nimport { actions } from \"../store/api/tokens\";\r\nimport { actions as basketActions } from \"../store/api/basket\";\r\nimport { actions as productActions } from \"../store/api/product\";\r\nimport {\r\n  getSupportedAudioFormat,\r\n  captureAudioFromMicrophone,\r\n  textToSpeech,\r\n  createAssistantSession,\r\n  messageAssistant,\r\n  stripSSMLTags,\r\n} from \"../utils/speechUtils\";\r\nimport { addBasketItem } from \"../utils/basketUtils\";\r\n// import AvatarModel from '../assets/models/Avatar.glb';\r\nimport AvatarV2Model from \"../assets/models/AvatarV2.glb\";\r\nimport { displayToast } from \"../utils/displayToast\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    display: \"flex\",\r\n    color: theme.palette.text.secondary,\r\n    background: \"#eeeeee\",\r\n    height: \"75vh\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  inner: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n  bold: {\r\n    fontWeight: \"bold\",\r\n  },\r\n  transcript: {\r\n    wordWrap: \"break-word\",\r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport function ArtificialCashier({\r\n  authUser,\r\n  basket,\r\n  products,\r\n  speechToTextToken,\r\n  speechToTextUrl,\r\n  textToSpeechToken,\r\n  textToSpeechUrl,\r\n  assistantToken,\r\n  assistantUrl,\r\n  dispatchGetSpeechToTextToken,\r\n  dispatchGetTextToSpeechToken,\r\n  dispatchGetAssistantToken,\r\n  dispatchUpdateBasket,\r\n  dispatchGetProducts,\r\n  history,\r\n}) {\r\n  const classes = useStyles();\r\n  const [loaded, setLoaded] = React.useState(false);\r\n  const [listening, setListening] = React.useState(false);\r\n  const [responding, setResponding] = React.useState(false);\r\n  const [stream, setStream] = React.useState(null);\r\n  const [speechText, setSpeechText] = React.useState(\"\");\r\n  const [responseText, setResponseText] = React.useState(\"\");\r\n  const [assistantSessionId, setAssistantSessionId] = React.useState(null);\r\n  const audioRef = React.useRef(null);\r\n  const [redirectCheckout, setRedirectCheckout] = React.useState(false);\r\n\r\n  const [voiceIndex, setVoiceIndex] = React.useState(0);\r\n  //ref: https://cloud.ibm.com/docs/text-to-speech?topic=text-to-speech-voices\r\n\r\n  React.useEffect(() => {\r\n    if (!speechToTextToken || !speechToTextUrl) {\r\n      dispatchGetSpeechToTextToken();\r\n    }\r\n    if (!textToSpeechToken || !textToSpeechUrl) {\r\n      dispatchGetTextToSpeechToken();\r\n    }\r\n    if (!assistantToken || !assistantUrl) {\r\n      dispatchGetAssistantToken();\r\n    }\r\n  }, [\r\n    dispatchGetSpeechToTextToken,\r\n    dispatchGetTextToSpeechToken,\r\n    dispatchGetAssistantToken,\r\n    speechToTextToken,\r\n    speechToTextUrl,\r\n    textToSpeechToken,\r\n    textToSpeechUrl,\r\n    assistantToken,\r\n    assistantUrl,\r\n  ]);\r\n\r\n  const synthesizeTextToSpeech = useCallback(\r\n    async (text) => {\r\n      const voices = [\"en-GB_JamesV3Voice\", \"en-GB_KateV3Voice\", \"en-GB_CharlotteV3Voice\"];\r\n      const voice = voices[voiceIndex];\r\n      try {\r\n        const accept = getSupportedAudioFormat(audioRef);\r\n        const audio = await textToSpeech(\r\n          textToSpeechUrl,\r\n          textToSpeechToken,\r\n          text,\r\n          voice,\r\n          accept,\r\n          audioRef.current\r\n        );\r\n        setResponseText(stripSSMLTags(text));\r\n        audio.removeEventListener(\"playing\", handleAudioPlayingEvent);\r\n        audio.removeEventListener(\"ended\", handleAudioEndedEvent);\r\n        audio.addEventListener(\"playing\", handleAudioPlayingEvent);\r\n        audio.addEventListener(\"ended\", handleAudioEndedEvent);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    },\r\n    [textToSpeechToken, textToSpeechUrl, voiceIndex]\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    async function createSession() {\r\n      const instanceId = await createAssistantSession(assistantUrl, assistantToken);\r\n      setAssistantSessionId(instanceId);\r\n      console.log(\"Created assistant session: \" + instanceId);\r\n    }\r\n\r\n    if (!!assistantToken && !!assistantUrl && !assistantSessionId) {\r\n      createSession();\r\n    }\r\n  }, [assistantToken, assistantUrl, assistantSessionId, textToSpeechToken, synthesizeTextToSpeech]);\r\n\r\n  React.useEffect(() => {\r\n    if (\r\n      !!speechToTextToken &&\r\n      !!speechToTextUrl &&\r\n      !!textToSpeechToken &&\r\n      !!textToSpeechUrl &&\r\n      !!assistantToken &&\r\n      !!assistantUrl &&\r\n      !!assistantSessionId &&\r\n      !loaded\r\n    ) {\r\n      setLoaded(true);\r\n      console.log(\"Done loading tokens from API.\");\r\n      synthesizeTextToSpeech(\r\n        \"Hello. Welcome to the IBM NextGen Shopping Experience. To get started, simply ask for a product that you would like to order.\"\r\n      );\r\n    }\r\n  }, [\r\n    loaded,\r\n    speechToTextToken,\r\n    speechToTextUrl,\r\n    textToSpeechToken,\r\n    textToSpeechUrl,\r\n    assistantToken,\r\n    assistantUrl,\r\n    assistantSessionId,\r\n    synthesizeTextToSpeech,\r\n  ]);\r\n\r\n  const startListening = async () => {\r\n    stopAudio();\r\n    setListening(true);\r\n    const stream = await captureAudioFromMicrophone(speechToTextUrl, speechToTextToken);\r\n    stream.on(\"data\", async (data) => {\r\n      if (data && data.final) {\r\n        const speechText = data.alternatives[0].transcript;\r\n        setSpeechText(speechText);\r\n        console.log(speechText);\r\n        setListening(false);\r\n\r\n        const res = await messageAssistant(\r\n          assistantUrl,\r\n          assistantToken,\r\n          assistantSessionId,\r\n          speechText\r\n        );\r\n\r\n        if (res.speech) {\r\n          await synthesizeTextToSpeech(res.speech);\r\n        }\r\n\r\n        if (res.actions) {\r\n          handleAssistantActions(res.actions);\r\n        }\r\n      }\r\n    });\r\n    stream.on(\"error\", function (err) {\r\n      console.log(err);\r\n      setListening(false);\r\n    });\r\n    stream.on(\"end\", function () {\r\n      console.log(\"stream ended\");\r\n      setListening(false);\r\n    });\r\n    setStream(stream);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (!listening && stream !== null) {\r\n      stream.stop();\r\n      setStream(null);\r\n    }\r\n  }, [listening, stream]);\r\n\r\n  const handleAssistantActions = (actions) => {\r\n    if (actions) {\r\n      for (let action of actions) {\r\n        switch (action.action_type) {\r\n          case \"add_basket\":\r\n            const product = products.find((p) => p.productId === parseInt(action.product_id));\r\n            if (product) {\r\n              const newBasket = addBasketItem(product, basket, action.quantity);\r\n              dispatchUpdateBasket(authUser.userId, newBasket);\r\n              displayToast(\"\", \"Your shopping basket has been updated\", \"success\");\r\n            }\r\n            break;\r\n          case \"filter_product\":\r\n            if (action.product_query_string) {\r\n              dispatchGetProducts(action.product_query_string, \"Mock Retailer\", 3);\r\n              displayToast(\r\n                \"\",\r\n                \"The product catalogue has been updated to match your query\",\r\n                \"info\"\r\n              );\r\n            }\r\n            break;\r\n          case \"reset_context\":\r\n            resetProductCatalog();\r\n            break;\r\n          case \"checkout\":\r\n            setRedirectCheckout(true);\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const resetProductCatalog = () => {\r\n    dispatchGetProducts(null, \"Mock Retailer\", 9);\r\n  };\r\n\r\n  const handleAudioPlayingEvent = () => {\r\n    console.log(\"AUDIO PLAYING!\");\r\n    setResponding(true);\r\n  };\r\n\r\n  const handleAudioEndedEvent = () => {\r\n    console.log(\"AUDIO STOPPED PLAYING!\");\r\n    setResponding(false);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (redirectCheckout && !responding) {\r\n      setRedirectCheckout(false);\r\n      history.push({\r\n        pathname: \"/checkout\",\r\n      });\r\n    }\r\n  }, [history, redirectCheckout, responding]);\r\n\r\n  const stopAudio = () => {\r\n    setResponseText(\"\");\r\n    try {\r\n      audioRef.current.pause();\r\n      audioRef.current.currentTime = 0;\r\n    } catch (err) {}\r\n  };\r\n\r\n  const ListenButton = listening ? (\r\n    <IconButton\r\n      id=\"stopListenButton\"\r\n      color=\"secondary\"\r\n      aria-label=\"stop\"\r\n      onClick={() => setListening(false)}\r\n    >\r\n      <StopIcon fontSize=\"large\" />\r\n    </IconButton>\r\n  ) : (\r\n    <IconButton id=\"startListenButton\" color=\"primary\" aria-label=\"speak\" onClick={startListening}>\r\n      <MicRoundedIcon fontSize=\"large\" />\r\n    </IconButton>\r\n  );\r\n\r\n  return (\r\n    <Paper className={classes.paper}>\r\n      <audio ref={audioRef}>\r\n        Your browser does not support the <code>audio</code> element.\r\n      </audio>\r\n      <div className={classes.inner}>\r\n        {loaded ? (\r\n          <React.Fragment>\r\n            <model-viewer\r\n              autoplay\r\n              loading=\"eager\"\r\n              animation-name={responding ? \"Talking\" : \"Idle\"}\r\n              style={{ width: \"350px\", height: \"350px\" }}\r\n              src={AvatarV2Model}\r\n            ></model-viewer>\r\n            {responseText.trim().length > 0 && (\r\n              <Typography className={classes.transcript} variant=\"h6\">\r\n                {responseText}\r\n              </Typography>\r\n            )}\r\n            <br />\r\n            <Typography id=\"listenText\" variant=\"subtitle2\">\r\n              {listening ? \"Listening...\" : \"Press the mic icon and start speaking\"}\r\n            </Typography>\r\n            {ListenButton}\r\n          </React.Fragment>\r\n        ) : (\r\n          <React.Fragment>\r\n            <Typography id=\"loadingText\" variant=\"subtitle2\" gutterBottom>\r\n              Loading... Please wait\r\n            </Typography>\r\n            <CircularProgress size={30} />\r\n          </React.Fragment>\r\n        )}\r\n      </div>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  speechToTextToken: state.tokens.speechToTextToken,\r\n  speechToTextUrl: state.tokens.speechToTextUrl,\r\n  textToSpeechToken: state.tokens.textToSpeechToken,\r\n  textToSpeechUrl: state.tokens.textToSpeechUrl,\r\n  assistantToken: state.tokens.assistantToken,\r\n  assistantUrl: state.tokens.assistantUrl,\r\n  basket: state.basket,\r\n  authUser: state.auth.user,\r\n  products: state.product.products,\r\n});\r\n\r\n// exported for unit testing\r\nexport const mapDispatchToProps = (dispatch) => ({\r\n  dispatchGetSpeechToTextToken: () => dispatch(actions.getSpeechToTextToken()),\r\n  dispatchGetTextToSpeechToken: () => dispatch(actions.getTextToSpeechToken()),\r\n  dispatchGetAssistantToken: () => dispatch(actions.getAssistantToken()),\r\n  dispatchUpdateBasket: (shopperId, basketData) =>\r\n    dispatch(basketActions.updateBasket(shopperId, basketData)),\r\n  dispatchGetProducts: (query, retailer, limit) =>\r\n    dispatch(productActions.getProducts(query, retailer, limit)),\r\n});\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(ArtificialCashier));\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Container from '@material-ui/core/Container';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport ProductCatalog from '../../components/ProductCatalog';\r\nimport ProductSearchBox from '../../components/ProductSearchBox';\r\nimport ArtificialCashier from '../../components/ArtificialCashier';\r\nimport Basket from '../../components/Basket';\r\nimport { connect } from 'react-redux';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    paddingTop: theme.spacing(2),\r\n    paddingBottom: theme.spacing(2),\r\n  },\r\n  mt: {\r\n    marginTop: theme.spacing(3),\r\n  },\r\n}));\r\n\r\nexport function ShopperPage({ authUser }) {\r\n  const classes = useStyles();\r\n  const [searchQuery, setSearchQuery] = React.useState('');\r\n\r\n  return (\r\n    <Container maxWidth='xl' className={classes.root}>\r\n      <Grid container spacing={3}>\r\n        <Grid item md={6}>\r\n          <Typography variant='subtitle1'>Artificial Cashier</Typography>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <Typography variant='subtitle1'>Product Catalogue</Typography>\r\n        </Grid>\r\n      </Grid>\r\n      <Grid container spacing={3}>\r\n        <Grid item md={6}>\r\n          <ArtificialCashier />\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <Grid container spacing={3}>\r\n            <Grid item xs={12}>\r\n              <ProductSearchBox\r\n                value={searchQuery}\r\n                onChange={(e) => {\r\n                  setSearchQuery(e.target.value);\r\n                }}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n          <ProductCatalog\r\n            retailer='Mock Retailer'\r\n            searchQuery={searchQuery}\r\n            limit={9}\r\n            shopperId={authUser.userId}\r\n          />\r\n          <hr className={classes.mt} />\r\n          <Typography variant='subtitle1'>Shopping Basket</Typography>\r\n          <Basket shopperId={authUser.userId} />\r\n        </Grid>\r\n      </Grid>\r\n    </Container>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  authUser: state.auth.user,\r\n});\r\n\r\nexport default connect(mapStateToProps, null)(ShopperPage);\r\n","const prod = {\r\n  // API_URL: 'https://api.nextgenshop.co.uk',\r\n  API_URL: \"https://nextgenshop.pythonanywhere.com\",\r\n};\r\n\r\nconst dev = {\r\n  // API_URL: 'http://127.0.0.1:8000',\r\n  API_URL: \"https://nextgenshop.pythonanywhere.com\",\r\n};\r\n\r\nconst shared = {\r\n  ENV: process.env.NODE_ENV,\r\n  HOME_URL: \"https://www.nextgenshop.github.io/nextgenshop-frontend\",\r\n  APP_NAME: \"NextGenShop\",\r\n};\r\n\r\nconst config =\r\n  process.env.NODE_ENV === \"development\" ? { ...dev, ...shared } : { ...prod, ...shared };\r\n\r\nexport default config;\r\n","export const GET_USER = \"auth/GET_USER\";\nexport const LOGIN = \"auth/LOGIN\";\nexport const LOGOUT = \"auth/LOGOUT\";\nexport const REGISTER = \"auth/REGISTER\";\n","import * as types from \"./types\";\n\nconst initialState = {\n  token: localStorage.getItem(\"token\"),\n  isAuthenticated: false,\n  user: null,\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case `${types.GET_USER}_SUCCESS`:\n      return {\n        ...state,\n        isAuthenticated: true,\n        user: action.response,\n      };\n\n    case `${types.LOGOUT}_SUCCESS`:\n    case `${types.GET_USER}_FAILURE`:\n      localStorage.removeItem(\"token\");\n      return { ...initialState, token: null };\n\n    case `${types.REGISTER}_SUCCESS`:\n    case `${types.LOGIN}_SUCCESS`:\n      localStorage.setItem(\"token\", action.response.token);\n      return {\n        ...state,\n        user: action.response.user,\n        token: action.response.token,\n        isAuthenticated: true,\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","import authHeader from '../../../utils/authHeader';\r\nimport * as types from './types';\r\n\r\nconst baseUrl = '/auth';\r\n\r\nexport const getUser = () => (dispatch, getState) => {\r\n  dispatch({\r\n    type: 'API',\r\n    name: types.GET_USER,\r\n    url: `${baseUrl}/user/`,\r\n    requestData: {\r\n      method: 'GET',\r\n      headers: authHeader(getState()),\r\n    },\r\n  });\r\n};\r\n\r\nexport const login = (data) => (dispatch) => {\r\n  dispatch({\r\n    type: 'API',\r\n    name: types.LOGIN,\r\n    url: `${baseUrl}/login/`,\r\n    requestData: {\r\n      method: 'POST',\r\n      data,\r\n    },\r\n  });\r\n};\r\n\r\nexport const logout = () => async (dispatch, getState) => {\r\n  dispatch({\r\n    type: 'API',\r\n    name: types.LOGOUT,\r\n    url: `${baseUrl}/logout/`,\r\n    requestData: {\r\n      method: 'GET',\r\n      headers: authHeader(getState()),\r\n    },\r\n  });\r\n};\r\n\r\nexport const register = (data) => (dispatch) => {\r\n  dispatch({\r\n    type: 'API',\r\n    name: types.REGISTER,\r\n    url: `${baseUrl}/register/`,\r\n    requestData: {\r\n      method: 'POST',\r\n      data,\r\n    },\r\n  });\r\n};\r\n\r\nexport const clearErrors = () => (dispatch) => {\r\n  dispatch({\r\n    type: `${types.LOGIN}_CLEARERR`,\r\n  });\r\n  dispatch({\r\n    type: `${types.REGISTER}_CLEARERR`,\r\n  });\r\n};\r\n","import reducer from \"./reducer\";\nimport * as actions from \"./actions\";\nimport * as types from \"./types\";\n\nexport { actions, types };\nexport default reducer;\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport { Link } from 'react-router-dom';\r\nimport config from '../config';\r\nimport { connect } from 'react-redux';\r\nimport { actions } from '../store/api/auth';\r\nimport { displayToast } from '../utils/displayToast';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n}));\r\n\r\nexport function Navbar({ auth, dispatchLogout }) {\r\n  const classes = useStyles();\r\n\r\n  const handleLogout = () => {\r\n    dispatchLogout();\r\n    displayToast('', 'You have been logged out!', 'info');\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <AppBar position='sticky'>\r\n        <Toolbar>\r\n          <Typography variant='h6' className={classes.title}>\r\n            {config.APP_NAME}\r\n          </Typography>\r\n          {auth && auth.isAuthenticated ? (\r\n            <Button id='logoutButton' color='inherit' onClick={handleLogout}>\r\n              Logout\r\n            </Button>\r\n          ) : (\r\n            <React.Fragment>\r\n              <Button color='inherit' component={Link} to='/login'>\r\n                Login\r\n              </Button>\r\n              <Button color='inherit' component={Link} to='/register'>\r\n                Register\r\n              </Button>\r\n            </React.Fragment>\r\n          )}\r\n        </Toolbar>\r\n      </AppBar>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  auth: state.auth,\r\n});\r\n\r\nexport const mapDispatchToProps = (dispatch) => ({\r\n  dispatchLogout: () => dispatch(actions.logout()),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Navbar);\r\n","import React from 'react';\r\nimport CashierMain from './cashier/CashierPage';\r\nimport ShopperMain from './shopper/ShopperPage';\r\nimport Navbar from '../components/Navbar';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nexport function Main({ auth }) {\r\n  if (auth && auth.isAuthenticated && auth.user) {\r\n    const RenderComponent =\r\n      auth.user.type === 'cashier' ? <CashierMain /> : <ShopperMain />;\r\n    return (\r\n      <React.Fragment>\r\n        <Navbar />\r\n        {RenderComponent}\r\n      </React.Fragment>\r\n    );\r\n  } else {\r\n    return <Redirect to='/login' />;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  auth: state.auth,\r\n});\r\n\r\nexport default connect(mapStateToProps, null)(Main);\r\n","const reducer = (state = {}, action) => {\n  const { type, error } = action;\n  let errorMessage = error;\n  if (Array.isArray(error)) {\n    errorMessage = error[0];\n  }\n  const matches = /(.*)_(REQUEST|FAILURE|CLEARERR)/.exec(type);\n  if (!matches) return state;\n\n  const [, requestName, requestState] = matches;\n  return {\n    ...state,\n    [requestName]: requestState === \"FAILURE\" ? errorMessage : \"\",\n  };\n};\n\nexport default reducer;\n","import reducer from './reducer';\nimport { createErrorSelector } from './selector';\nexport { createErrorSelector };\nexport default reducer;\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Container from '@material-ui/core/Container';\r\nimport Button from '@material-ui/core/Button';\r\nimport { Divider, TextField } from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\nimport { actions, types } from '../store/api/auth';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { createErrorSelector } from '../store/error';\r\nimport { displayToast } from '../utils/displayToast';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    paddingTop: theme.spacing(2),\r\n    paddingBottom: theme.spacing(2),\r\n    height: '80vh',\r\n  },\r\n  heading: {\r\n    paddingBottom: theme.spacing(2),\r\n  },\r\n  mr: {\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  mt: {\r\n    marginTop: theme.spacing(1),\r\n  },\r\n}));\r\n\r\nexport function Login({ auth, error, dispatchLogin, dispatchClearErrors }) {\r\n  const classes = useStyles();\r\n\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    if (error) {\r\n      displayToast('', error, 'danger', dispatchClearErrors);\r\n    }\r\n  }, [error, dispatchClearErrors]);\r\n\r\n  const loginShopper = () => {\r\n    dispatchLogin({ email: 'mockuser1@gmail.com', password: 'password' });\r\n  };\r\n\r\n  const loginCashier = () => {\r\n    dispatchLogin({ email: 'mockcashieruser@gmail.com', password: 'password' });\r\n  };\r\n\r\n  const handleLogin = () => {\r\n    if (email.trim() && password) {\r\n      const data = { email, password };\r\n      dispatchLogin(data);\r\n    }\r\n    setPassword('');\r\n  };\r\n\r\n  return auth && auth.isAuthenticated ? (\r\n    <Redirect to='/' />\r\n  ) : (\r\n    <Container className={classes.root} maxWidth='md'>\r\n      <Typography variant='h4' className={classes.heading}>\r\n        NextGenShop Login\r\n      </Typography>\r\n      <TextField\r\n        id='emailTextField'\r\n        label='Email'\r\n        value={email}\r\n        onChange={(e) => setEmail(e.target.value)}\r\n      />\r\n      <TextField\r\n        id='passwordTextField'\r\n        type='password'\r\n        label='Password'\r\n        value={password}\r\n        onChange={(e) => setPassword(e.target.value)}\r\n      />\r\n      <Button\r\n        id='loginButton'\r\n        className={classes.mt}\r\n        color='primary'\r\n        variant='contained'\r\n        onClick={handleLogin}\r\n      >\r\n        Login\r\n      </Button>\r\n      <Divider className={classes.mt} />\r\n      <div className={classes.mt}>\r\n        <Button\r\n          id='loginShopperButton'\r\n          className={classes.mr}\r\n          variant='contained'\r\n          onClick={loginShopper}\r\n        >\r\n          Login as shopper\r\n        </Button>\r\n        <Button\r\n          id='loginCashierButton'\r\n          variant='contained'\r\n          onClick={loginCashier}\r\n        >\r\n          Login as cashier\r\n        </Button>\r\n      </div>\r\n      <Typography className={classes.mt} variant='caption'>\r\n        These buttons are for testing purposes.\r\n      </Typography>\r\n    </Container>\r\n  );\r\n}\r\n\r\nconst errorSelector = createErrorSelector([types.LOGIN]);\r\n\r\nconst mapStateToProps = (state) => ({\r\n  auth: state.auth,\r\n  error: errorSelector(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  dispatchLogin: (data) => dispatch(actions.login(data)),\r\n  dispatchClearErrors: () => dispatch(actions.clearErrors()),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\r\n","import _ from \"lodash\";\n\nexport const createErrorSelector = (actions) => (state) => {\n  return (\n    _(actions)\n      .map((action) => _.get(state, `error.${action}`))\n      .compact()\n      .first() || \"\"\n  );\n};\n","import React, { Fragment } from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\n// Destructuring props\r\nconst FirstStep = ({\r\n  handleNext,\r\n  handleChange,\r\n  values: { firstName, lastName, email, phone },\r\n  formErrors,\r\n}) => {\r\n  // Check if all values are not empty or if there are some error\r\n  const isValid =\r\n    firstName.length > 0 &&\r\n    !formErrors.firstName &&\r\n    lastName.length > 0 &&\r\n    !formErrors.lastName &&\r\n    email.length > 0 &&\r\n    !formErrors.email &&\r\n    phone.length > 0 &&\r\n    !formErrors.phone;\r\n\r\n  return (\r\n    <Fragment>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        Shipping address\r\n      </Typography>\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={12} sm={6}>\r\n          <TextField\r\n            fullWidth\r\n            label=\"First Name\"\r\n            name=\"firstName\"\r\n            placeholder=\"Your first name\"\r\n            margin=\"normal\"\r\n            value={firstName || \"\"}\r\n            onChange={handleChange}\r\n            error={!!formErrors.firstName}\r\n            helperText={formErrors.firstName}\r\n            required\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <TextField\r\n            fullWidth\r\n            label=\"Last Name\"\r\n            name=\"lastName\"\r\n            placeholder=\"Your last name\"\r\n            margin=\"normal\"\r\n            value={lastName || \"\"}\r\n            onChange={handleChange}\r\n            error={!!formErrors.lastName}\r\n            helperText={formErrors.lastName}\r\n            required\r\n          />\r\n        </Grid>\r\n\r\n        <Grid item xs={12} sm={6}>\r\n          <TextField\r\n            fullWidth\r\n            label=\"Email\"\r\n            name=\"email\"\r\n            placeholder=\"Your email address\"\r\n            type=\"email\"\r\n            value={email || \"\"}\r\n            onChange={handleChange}\r\n            margin=\"normal\"\r\n            error={!!formErrors.email}\r\n            helperText={formErrors.email}\r\n            required\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <TextField\r\n            fullWidth\r\n            label=\"Phone number\"\r\n            name=\"phone\"\r\n            placeholder=\"i.e: xxx-xxx-xxxx\"\r\n            value={phone || \"\"}\r\n            onChange={handleChange}\r\n            error={!!formErrors.phone}\r\n            helperText={formErrors.phone}\r\n            margin=\"normal\"\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      <div\r\n        style={{ display: \"flex\", marginTop: 50, justifyContent: \"flex-end\" }}\r\n      >\r\n        <Button\r\n          variant=\"contained\"\r\n          disabled={!isValid}\r\n          color=\"primary\"\r\n          onClick={isValid ? handleNext : null}\r\n        >\r\n          Next\r\n        </Button>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default FirstStep;\r\n","import React from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\n// Destructuring props\r\nconst SecondStep = ({\r\n  handleNext,\r\n  handleBack,\r\n  handleChange,\r\n  values: { address1, address2, city, state, postcode, country },\r\n  formErrors,\r\n}) => {\r\n  // Check if all values are not empty or if there are some error\r\n  const isValid =\r\n    address1.length > 0 &&\r\n    !formErrors.address1 &&\r\n    address2.length > 0 &&\r\n    !formErrors.address2 &&\r\n    city.length > 0 &&\r\n    !formErrors.city &&\r\n    state.length > 0 &&\r\n    !formErrors.state &&\r\n    postcode.length > 0 &&\r\n    !formErrors.postcode &&\r\n    country.length > 0 &&\r\n    !formErrors.country;\r\n\r\n  return (\r\n    <>\r\n      <Grid container spacing={2}>\r\n        <Grid item xs={12} sm={6}>\r\n          <TextField\r\n            fullWidth\r\n            label=\"Address1\"\r\n            name=\"address1\"\r\n            placeholder=\"Enter your address\"\r\n            value={address1 || \"\"}\r\n            margin=\"normal\"\r\n            onChange={handleChange}\r\n            error={!!formErrors.address1}\r\n            helperText={formErrors.address1}\r\n            required\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <TextField\r\n            fullWidth\r\n            label=\"Number\"\r\n            name=\"address2\"\r\n            placeholder=\"Enter your address number\"\r\n            value={address2 || \"\"}\r\n            margin=\"normal\"\r\n            onChange={handleChange}\r\n            error={!!formErrors.address2}\r\n            helperText={formErrors.address2}\r\n            required\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <TextField\r\n            fullWidth\r\n            label=\"City\"\r\n            name=\"city\"\r\n            placeholder=\"Enter your City\"\r\n            value={city || \"\"}\r\n            margin=\"normal\"\r\n            onChange={handleChange}\r\n            error={!!formErrors.city}\r\n            helperText={formErrors.city}\r\n            required\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <TextField\r\n            fullWidth\r\n            label=\"State\"\r\n            name=\"state\"\r\n            placeholder=\"Enter your State/Region\"\r\n            value={state || \"\"}\r\n            margin=\"normal\"\r\n            onChange={handleChange}\r\n            error={!!formErrors.state}\r\n            helperText={formErrors.state}\r\n            required\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <TextField\r\n            fullWidth\r\n            label=\"Postcode\"\r\n            name=\"postcode\"\r\n            placeholder=\"Enter your postcode\"\r\n            value={postcode || \"\"}\r\n            margin=\"normal\"\r\n            onChange={handleChange}\r\n            error={!!formErrors.postcode}\r\n            helperText={formErrors.postcode}\r\n            required\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <TextField\r\n            fullWidth\r\n            label=\"Country\"\r\n            name=\"country\"\r\n            placeholder=\"Enter your country\"\r\n            value={country || \"\"}\r\n            margin=\"normal\"\r\n            onChange={handleChange}\r\n            error={!!formErrors.country}\r\n            helperText={formErrors.country}\r\n            required\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      <div\r\n        style={{ display: \"flex\", marginTop: 50, justifyContent: \"flex-end\" }}\r\n      >\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"default\"\r\n          onClick={handleBack}\r\n          style={{ marginRight: 10 }}\r\n        >\r\n          Back\r\n        </Button>\r\n        <Button\r\n          variant=\"contained\"\r\n          disabled={!isValid}\r\n          color=\"primary\"\r\n          onClick={isValid ? handleNext : null}\r\n        >\r\n          Next\r\n        </Button>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SecondStep;\r\n","import React from \"react\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  listItem: {\r\n    padding: theme.spacing(1, 0),\r\n  },\r\n  total: {\r\n    fontWeight: 700,\r\n  },\r\n  title: {\r\n    marginTop: theme.spacing(2),\r\n  },\r\n}));\r\n// Destructure props\r\nexport function Confirm({ handleNext, handleBack, values, basket }) {\r\n  const {\r\n    firstName,\r\n    lastName,\r\n    email,\r\n    phone,\r\n    address1,\r\n    address2,\r\n    city,\r\n    state,\r\n    postcode,\r\n    country,\r\n  } = values;\r\n  const classes = useStyles();\r\n\r\n  const handleSubmit = () => {\r\n    // Do whatever with the values\r\n    console.log(values);\r\n    // Show last compinent or success message\r\n    handleNext();\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        Order summary\r\n      </Typography>\r\n      <List disablePadding>\r\n        {basket &&\r\n          basket.items &&\r\n          basket.items.map((item) => (\r\n            <ListItem className={classes.list} key={item.product.name}>\r\n              <ListItemText\r\n                primary={item.product.name}\r\n                secondary={\"Quantity: \" + item.quantity}\r\n              />\r\n              <Typography variant=\"body2\">\r\n                {(item.product.price * item.quantity).toFixed(2)}\r\n              </Typography>\r\n            </ListItem>\r\n          ))}\r\n        <ListItem className={classes.list}>\r\n          <ListItemText primary=\"Total\" />\r\n          <Typography variant=\"subtitle1\" className={classes.total}>\r\n            {basket ? basket.totalPrice : 0}\r\n          </Typography>\r\n        </ListItem>\r\n      </List>\r\n      <Grid container spacing={2}>\r\n        <Grid item xs={12} sm={6}>\r\n          <Typography variant=\"h6\" gutterBottom className={classes.title}>\r\n            Shipping\r\n          </Typography>\r\n          <Grid container>\r\n            <React.Fragment>\r\n              <Grid item xs={6}>\r\n                Address:\r\n                <Typography gutterBottom>{address1}</Typography>\r\n              </Grid>\r\n              <Grid item xs={6}>\r\n                Number:\r\n                <Typography gutterBottom>{address2}</Typography>\r\n              </Grid>\r\n              <Grid item xs={6}>\r\n                City:\r\n                <Typography gutterBottom>{city}</Typography>\r\n              </Grid>\r\n              <Grid item xs={6}>\r\n                State/Region:\r\n                <Typography gutterBottom>{state}</Typography>\r\n              </Grid>\r\n              <Grid item xs={6}>\r\n                Postcode:\r\n                <Typography gutterBottom>{postcode}</Typography>\r\n              </Grid>\r\n              <Grid item xs={6}>\r\n                Country:\r\n                <Typography gutterBottom>{country}</Typography>\r\n              </Grid>\r\n            </React.Fragment>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item container direction=\"column\" xs={12} sm={6}>\r\n          <Typography variant=\"h6\" gutterBottom className={classes.title}>\r\n            Contact details\r\n          </Typography>\r\n          <Grid container>\r\n            <React.Fragment>\r\n              <Grid item xs={6}>\r\n                First Name:\r\n                <Typography gutterBottom>{firstName}</Typography>\r\n              </Grid>\r\n              <Grid item xs={6}>\r\n                Last Name:\r\n                <Typography gutterBottom>{lastName}</Typography>\r\n              </Grid>\r\n              <Grid item xs={6}>\r\n                Email:\r\n                <Typography gutterBottom>{email}</Typography>\r\n              </Grid>\r\n              <Grid item xs={6}>\r\n                Phone Number:\r\n                <Typography gutterBottom>{phone}</Typography>\r\n              </Grid>\r\n            </React.Fragment>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n      <div\r\n        style={{ display: \"flex\", marginTop: 50, justifyContent: \"flex-end\" }}\r\n      >\r\n        <Button variant=\"contained\" color=\"default\" onClick={handleBack}>\r\n          Back\r\n        </Button>\r\n        <Button\r\n          style={{ marginLeft: 10 }}\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          onClick={handleSubmit}\r\n        >\r\n          Confirm & Continue\r\n        </Button>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\nconst mapStateToProps = (state) => ({\r\n  basket: state.basket,\r\n});\r\n\r\nexport default connect(mapStateToProps, null)(Confirm);\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  box: {\r\n    padding: theme.spacing(3),\r\n  },\r\n  title: {\r\n    marginTop: 30,\r\n  },\r\n}));\r\n\r\nconst Success = () => {\r\n  const classes = useStyles();\r\n  return (\r\n    <Box className={classes.box}>\r\n      <Typography variant=\"h2\" align=\"center\">\r\n        Thank you!\r\n      </Typography>\r\n      <Typography component=\"p\" align=\"center\" className={classes.title}>\r\n        You will get an email with further instructions for payment.\r\n      </Typography>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Success;\r\n","const isText = RegExp(/^[A-Z ]+$/i);\r\nconst isEmail = RegExp(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i);\r\nconst isPhone = RegExp(/^\\D?(\\d{3})\\D?\\D?(\\d{3})\\D?(\\d{4,6})$/); // us\r\nconst isZip = RegExp(/^[0-9]{5}([- /]?[0-9]{4})?$/); // us\r\nconst isNumber = RegExp(/^\\d+$/);\r\n\r\nexport default function formValidation(name, value, schema) {\r\n  const { validate, minLength, maxLength } = schema[name];\r\n  let error = \"\";\r\n\r\n  if (minLength && value.length < minLength)\r\n    error = `Minimum of ${minLength} characters are required.`;\r\n  else if (maxLength && value.length > maxLength)\r\n    error = `Maximum length of ${maxLength} exceeded!`;\r\n  if (!validate) return;\r\n\r\n  switch (validate) {\r\n    case \"text\":\r\n      if (!isText.test(value)) error = \"This field accepts text only.\";\r\n      break;\r\n\r\n    case \"number\":\r\n      if (!isNumber.test(value)) error = \"This field accepts numbers only.\";\r\n      break;\r\n\r\n    case \"email\":\r\n      if (!isEmail.test(value)) error = \"Please enter a valid email address.\";\r\n      break;\r\n\r\n    case \"phone\":\r\n      if (!isPhone.test(value))\r\n        error = \"Please enter a valid phone number. i.e: xxx-xxx-xxxx\";\r\n      break;\r\n\r\n    case \"postcode\":\r\n      if (!isZip.test(value)) error = \"Please enter a valid zip code.\";\r\n      break;\r\n\r\n    case \"checkbox\":\r\n      if (!value) error = \"Please select a value.\";\r\n      break;\r\n\r\n    default:\r\n      break;\r\n  }\r\n\r\n  return error;\r\n}\r\n","import React, { useState } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Stepper from \"@material-ui/core/Stepper\";\r\nimport Step from \"@material-ui/core/Step\";\r\nimport StepLabel from \"@material-ui/core/StepLabel\";\r\nimport FirstStep from \"./FirstStep\";\r\nimport SecondStep from \"./SecondStep\";\r\nimport Confirm from \"./Confirm\";\r\nimport Success from \"./Success\";\r\nimport formValidation from \"./formValidation\";\r\n\r\n// Step titles\r\nconst labels = [\"Contact Details\", \"Shipping Address\", \"Order Summary\"];\r\n\r\nconst initialValues = {\r\n  firstName: \"\",\r\n  lastName: \"\",\r\n  email: \"\",\r\n  address1: \"\",\r\n  address2: \"\",\r\n  city: \"\",\r\n  state: \"\",\r\n  postcode: \"\",\r\n  country: \"\",\r\n  phone: \"\",\r\n};\r\n\r\nconst fieldsValidation = {\r\n  firstName: {\r\n    error: \"\",\r\n    validate: \"text\",\r\n    minLength: 2,\r\n    maxLength: 20,\r\n  },\r\n  lastName: {\r\n    error: \"\",\r\n    validate: \"text\",\r\n    minLength: 2,\r\n    maxLength: 20,\r\n  },\r\n  email: {\r\n    error: \"\",\r\n    validate: \"email\",\r\n  },\r\n  city: {\r\n    error: \"\",\r\n    validate: \"text\",\r\n    minLength: 3,\r\n    maxLength: 20,\r\n  },\r\n  address1: {\r\n    error: \"\",\r\n    validate: \"text\",\r\n    minLength: 3,\r\n    maxLength: 20,\r\n  },\r\n  address2: {\r\n    error: \"\",\r\n    validate: \"number\",\r\n    minLength: 1,\r\n    maxLength: 20,\r\n  },\r\n  state: {\r\n    error: \"\",\r\n    validate: \"text\",\r\n    minLength: 3,\r\n    maxLength: 20,\r\n  },\r\n  postcode: {\r\n    error: \"\",\r\n    validate: \"postcode\",\r\n    minLength: 3,\r\n    maxLength: 20,\r\n  },\r\n  country: {\r\n    error: \"\",\r\n    validate: \"text\",\r\n    minLength: 3,\r\n    maxLength: 20,\r\n  },\r\n  phone: {\r\n    error: \"\",\r\n    validate: \"phone\",\r\n    maxLength: 15,\r\n  },\r\n};\r\n\r\nfunction StepForm() {\r\n  const [activeStep, setActiveStep] = useState(0);\r\n  const [formValues, setFormValues] = useState(initialValues);\r\n  const [formErrors, setFormErrors] = useState({});\r\n\r\n  // Proceed to next step\r\n  const handleNext = () => setActiveStep((prev) => prev + 1);\r\n  // Go back to prev step\r\n  const handleBack = () => setActiveStep((prev) => prev - 1);\r\n\r\n  // Handle form change\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n\r\n    // Set values\r\n    setFormValues((prev) => ({\r\n      ...prev,\r\n      [name]: value,\r\n    }));\r\n\r\n    // set errors\r\n    const error = formValidation(name, value, fieldsValidation) || \"\";\r\n\r\n    setFormErrors({\r\n      [name]: error,\r\n    });\r\n  };\r\n\r\n  const handleSteps = (step) => {\r\n    switch (step) {\r\n      case 0:\r\n        return (\r\n          <FirstStep\r\n            handleNext={handleNext}\r\n            handleChange={handleChange}\r\n            values={formValues}\r\n            formErrors={formErrors}\r\n          />\r\n        );\r\n      case 1:\r\n        return (\r\n          <SecondStep\r\n            handleNext={handleNext}\r\n            handleBack={handleBack}\r\n            handleChange={handleChange}\r\n            values={formValues}\r\n            formErrors={formErrors}\r\n          />\r\n        );\r\n      case 2:\r\n        return (\r\n          <Confirm\r\n            handleNext={handleNext}\r\n            handleBack={handleBack}\r\n            values={formValues}\r\n          />\r\n        );\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {activeStep === labels.length ? (\r\n        // Last Component\r\n        <Success values={formValues} />\r\n      ) : (\r\n        <>\r\n          <Box style={{ margin: \"30px 0 50px\" }}>\r\n            <Typography variant=\"h4\" align=\"center\">\r\n              Checkout\r\n            </Typography>\r\n          </Box>\r\n          <Stepper\r\n            activeStep={activeStep}\r\n            style={{ margin: \"30px 0 15px\" }}\r\n            alternativeLabel\r\n          >\r\n            {labels.map((label) => (\r\n              <Step key={label}>\r\n                <StepLabel>{label}</StepLabel>\r\n              </Step>\r\n            ))}\r\n          </Stepper>\r\n          {handleSteps(activeStep)}\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default StepForm;\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport StepForm from \"../../components/StepForm\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n    color: \"primary\",\r\n  },\r\n  layout: {\r\n    width: \"auto\",\r\n    marginLeft: theme.spacing(2),\r\n    marginRight: theme.spacing(2),\r\n    [theme.breakpoints.up(600 + theme.spacing(2) * 2)]: {\r\n      width: 600,\r\n      marginLeft: \"auto\",\r\n      marginRight: \"auto\",\r\n    },\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(3),\r\n    marginBottom: theme.spacing(3),\r\n    padding: theme.spacing(2),\r\n    [theme.breakpoints.up(600 + theme.spacing(3) * 2)]: {\r\n      marginTop: theme.spacing(6),\r\n      marginBottom: theme.spacing(6),\r\n      padding: theme.spacing(3),\r\n    },\r\n  },\r\n  stepper: {\r\n    padding: theme.spacing(3, 0, 5),\r\n  },\r\n  buttons: {\r\n    display: \"flex\",\r\n    justifyContent: \"flex-end\",\r\n  },\r\n  button: {\r\n    marginTop: theme.spacing(3),\r\n    marginLeft: theme.spacing(1),\r\n  },\r\n}));\r\n\r\nexport function Checkout() {\r\n  const classes = useStyles();\r\n\r\n  // TODO:\r\n  // map through basket.items and render the product name, price, quantity etc.\r\n  //console.log(basket); // REMOVE THIS (for testing purposes)\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <CssBaseline />\r\n      <AppBar position=\"absolute\" color=\"primary\" className={classes.appBar}>\r\n        <Toolbar>\r\n          <Typography variant=\"h6\" color=\"inherit\" noWrap>\r\n            <Link to=\"/login\" style={{ textDecoration: \"none\", color: \"#FFF\" }}>\r\n              NextGenShop\r\n            </Link>\r\n          </Typography>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <main className={classes.layout}>\r\n        <Paper className={classes.paper}>\r\n          <StepForm />\r\n        </Paper>\r\n      </main>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  basket: state.basket,\r\n});\r\n\r\nexport default connect(mapStateToProps, null)(Checkout);\r\n","import React from 'react';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport Main from './views/Main';\r\nimport Login from './views/Login';\r\nimport Checkout from './views/shopper/CheckoutPage';\r\nimport ReduxToastr from 'react-redux-toastr';\r\nimport 'react-redux-toastr/lib/css/react-redux-toastr.min.css';\r\n\r\nfunction App() {\r\n  return (\r\n    <React.Fragment>\r\n      <Router basename='/nextgenshop-frontend'>\r\n        <Switch>\r\n          <Route exact path='/' component={Main} />\r\n          <Route path='/login' component={Login} />\r\n          <Route path='/checkout' component={Checkout} />\r\n        </Switch>\r\n      </Router>\r\n      <ReduxToastr\r\n        timeOut={5000}\r\n        newestOnTop={true}\r\n        position='top-center'\r\n        transitionIn='fadeIn'\r\n        transitionOut='fadeOut'\r\n        progressBar\r\n        closeOnToastrClick\r\n        preventDuplicates\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import mockUsers from \"./MockUsers.json\";\r\nimport { types as authTypes } from \"../api/auth\";\r\n\r\nconst handleRequest = (dispatch, name, req) => {\r\n  let res = {};\r\n  if (name === authTypes.GET_USER) {\r\n    const token = req.headers.authorization.split(\" \")[1];\r\n    res = mockUsers.find((user) => user.token === token);\r\n    if (res) {\r\n      dispatch({ type: `${name}_SUCCESS`, response: res });\r\n    } else {\r\n      dispatch({ type: `${name}_FAILURE`, error: \"Invalid token\" });\r\n    }\r\n  } else if (name === authTypes.LOGIN) {\r\n    res = mockUsers.find(\r\n      (user) => user.email === req.data.email && user.password === req.data.password\r\n    );\r\n    if (res) {\r\n      dispatch({\r\n        type: `${name}_SUCCESS`,\r\n        response: { user: res, token: res.token },\r\n      });\r\n    } else {\r\n      dispatch({\r\n        type: `${name}_FAILURE`,\r\n        error: \"Incorrect email or password\",\r\n      });\r\n    }\r\n  } else if (name === authTypes.LOGOUT) {\r\n    dispatch({ type: `${name}_SUCCESS` });\r\n  } else {\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nexport { handleRequest };\r\n","import axios from 'axios';\r\nimport config from '../config';\r\nimport { handleRequest } from '../store/mock/MockApi';\r\n\r\n// exampleRequest {\r\n//   headers?: any;\r\n//   data?: any;\r\n//   params?: any;\r\n//   url: string;\r\n//   method: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';\r\n// }\r\n\r\nconst apiMiddleware = ({ dispatch }) => (next) => async (action) => {\r\n  next(action);\r\n\r\n  if (action.type !== 'API') return;\r\n\r\n  const { name, url, requestData, extraData } = action;\r\n  axios.defaults.baseURL = config.API_URL;\r\n  axios.defaults.headers.common['Content-Type'] = 'application/json';\r\n\r\n  let req = {\r\n    url,\r\n    method: requestData.method,\r\n  };\r\n  if (requestData.headers) {\r\n    req.headers = requestData.headers;\r\n  }\r\n  if (requestData.data) {\r\n    req.data = requestData.data;\r\n  }\r\n  if (requestData.params) {\r\n    req.params = requestData.params;\r\n  }\r\n\r\n  // Use Mock API\r\n  const usedMock = handleRequest(dispatch, name, req);\r\n  if (!usedMock) {\r\n    dispatch({ type: `${name}_REQUEST` });\r\n    try {\r\n      const { data } = await axios.request(req);\r\n      dispatch({ type: `${name}_SUCCESS`, response: data, extraData });\r\n    } catch (err) {\r\n      const errorMessage = err.response\r\n        ? err.response.data.error\r\n        : 'An unknown error has occurred';\r\n      dispatch({ type: `${name}_FAILURE`, error: errorMessage });\r\n    }\r\n  }\r\n};\r\n\r\nexport default apiMiddleware;\r\n","import { combineReducers } from 'redux';\r\nimport { reducer as toastr } from 'react-redux-toastr';\r\nimport auth from './api/auth';\r\nimport product from './api/product';\r\nimport basket from './api/basket';\r\nimport tokens from './api/tokens';\r\nimport error from './error';\r\n\r\nconst rootReducer = combineReducers({\r\n  toastr,\r\n  auth,\r\n  product,\r\n  basket,\r\n  tokens,\r\n  error,\r\n});\r\n\r\nexport default rootReducer;\r\n","import thunk from \"redux-thunk\";\nimport { createStore, applyMiddleware, compose } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport apiMiddleware from \"../utils/apiMiddleware\";\nimport config from \"../config\";\nimport rootReducer from \"./rootReducer\";\n\nconst composeEnhancers = config.ENV === \"production\" ? compose : composeWithDevTools;\nconst enhancers = [applyMiddleware(thunk, apiMiddleware)];\nconst store = createStore(rootReducer, composeEnhancers(...enhancers));\n\nexport default store;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { Provider } from \"react-redux\";\nimport store from \"./store\";\nimport \"../src/assets/css/style.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}