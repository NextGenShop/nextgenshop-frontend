(this["webpackJsonpnextgenshop-frontend"]=this["webpackJsonpnextgenshop-frontend"]||[]).push([[0],{190:function(e,t){},192:function(e,t){},247:function(e,t,n){},248:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"updateBasket",(function(){return P})),n.d(a,"getBasket",(function(){return q})),n.d(a,"deleteBasket",(function(){return R})),n.d(a,"clearErrors",(function(){return W}));var r={};n.r(r),n.d(r,"getProducts",(function(){return ue}));var c={};n.r(c),n.d(c,"getSpeechToTextToken",(function(){return Re})),n.d(c,"getTextToSpeechToken",(function(){return We})),n.d(c,"getAssistantToken",(function(){return Ye}));var s={};n.r(s),n.d(s,"GET_USER",(function(){return At})),n.d(s,"LOGIN",(function(){return ot})),n.d(s,"LOGOUT",(function(){return it})),n.d(s,"REGISTER",(function(){return lt}));var A={};n.r(A),n.d(A,"getUser",(function(){return pt})),n.d(A,"login",(function(){return ht})),n.d(A,"logout",(function(){return jt})),n.d(A,"register",(function(){return mt})),n.d(A,"clearErrors",(function(){return bt}));var o=n(0),i=n.n(o),l=n(11),u=n.n(l),d=n(26),p=n(17),h=n(15),j=n(291),m=n(74),b=n(312),x=n(307),g=n(134),f=n.n(g),O=n(293),v=n(295),y=n(296),T=n(298),k=n(297),C=n(323),E=n(299),S=n(300),w="data:image/png;base64,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",N=n(18),I=n(10),B="basket/GET_BASKET",L="basket/UPDATE_BASKET",U="basket/DELETE_BASKET",V={items:[],totalPrice:0,shopper:0};function G(e){var t=e.auth.token;return t?{authorization:"Token ".concat(t)}:null}var D="/basket",P=function(e,t){return function(n,a){n({type:"API",name:L,url:"".concat(D,"/").concat(e),requestData:{method:"PUT",headers:G(a()),data:t}})}},q=function(e){return function(t,n){t({type:"API",name:B,url:"".concat(D,"/").concat(e),requestData:{method:"GET",headers:G(n())}})}},R=function(e){return function(t,n){t({type:"API",name:U,url:"".concat(D,"/").concat(e),requestData:{method:"DELETE",headers:G(n())}})}},W=function(){return function(e){e({type:"".concat(L,"_CLEARERR")}),e({type:"".concat(B,"_CLEARERR")}),e({type:"".concat(U,"_CLEARERR")})}},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"".concat(B,"_SUCCESS"):case"".concat(L,"_SUCCESS"):return Object(I.a)(Object(I.a)({},e),{},{items:t.response.items,totalPrice:t.response.totalPrice,shopper:t.response.shopper});case"".concat(U,"_SUCCESS"):return V;default:return e}},F=n(144),X=n(77),H=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=t.items.find((function(t){return t.product.productId===e.productId}));return{items:a?t.items.map((function(e){return e.product.productId===a.product.productId?Object(I.a)(Object(I.a)({},e),{},{quantity:e.quantity+n}):e})):[].concat(Object(F.a)(t.items),[{product:e,quantity:n}])}},J=n(2),z=Object(j.a)((function(e){return{list:{height:"29vh",overflowY:"scroll"},price:{color:e.palette.primary.dark,fontWeight:600,marginRight:e.spacing(2)},total:{fontWeight:"bold"},checkoutLink:{textDecoration:"none",marginLeft:e.spacing(2)}}}));var _=Object(N.connect)((function(e){return{basket:e.basket}}),(function(e){return{dispatchGetBasket:function(t){return e(a.getBasket(t))},dispatchUpdateBasket:function(t,n){return e(a.updateBasket(t,n))}}}))((function(e){var t=e.shopperId,n=e.dispatchUpdateBasket,a=e.dispatchGetBasket,r=e.basket,c=z();return i.a.useEffect((function(){a(t)}),[a,t]),Object(J.jsxs)(i.a.Fragment,{children:[Object(J.jsx)(O.a,{className:c.list,children:r&&r.items&&r.items.length>0?r.items.map((function(e){return Object(J.jsxs)(v.a,{children:[Object(J.jsx)(y.a,{children:Object(J.jsx)(C.a,{src:"mockImageUrl"===e.product.image?w:e.product.image})}),Object(J.jsx)(k.a,{primary:e.product.name,secondary:"Qty: "+e.quantity}),Object(J.jsxs)(T.a,{children:[Object(J.jsxs)(m.a,{className:c.price,display:"inline",children:["\xa3",(e.product.price*e.quantity).toFixed(2)]}),Object(J.jsx)(E.a,{edge:"end","aria-label":"deleteButton",onClick:function(){return function(e){var a=function(e,t){var n=t.items.map((function(t){return t.product.productId===e?null:t}));return{items:n=n.filter((function(e){return null!==e}))}}(e,r);n(t,a)}(e.product.productId)},children:Object(J.jsx)(f.a,{})})]})]},e.product.productId)})):Object(J.jsx)(m.a,{variant:"subtitle2",children:"Your shopping basket is empty."})}),Object(J.jsxs)(m.a,{className:c.total,variant:"h6",component:"div",children:["Total:"," ",Object(J.jsxs)(m.a,{variant:"h6",display:"inline",children:["\xa3 ",r&&r.totalPrice?r.totalPrice.toFixed(2):0]}),Object(J.jsx)(d.b,{to:"/checkout",className:c.checkoutLink,children:Object(J.jsx)(S.a,{variant:"outlined",color:"primary",children:"Checkout"})})]})]})})),M=n(147),K=n(135),Q=n.n(K),Z=Object(j.a)((function(e){return{paper:{display:"flex",flexDirection:"column",color:e.palette.text.secondary,background:"#eeeeee",height:"75vh",alignItems:"center",justifyContent:"center"}}}));function $(){var e=Z();return Object(J.jsxs)(M.a,{className:e.paper,children:[Object(J.jsx)(Q.a,{}),Object(J.jsx)(m.a,{variant:"subtitle1",children:"The video chat component is under development."})]})}var ee=n(308),te=n(310),ne=n(309),ae=n(302),re=n(303),ce=n(306),se=n(301),Ae=n(304),oe=n(324),ie="product/GET_PRODUCTS",le={products:[]},ue=function(e,t,n){return function(a,r){var c={};e&&(c.query=e),t&&(c.retailer=t),n&&(c.limit=n),a({type:"API",name:ie,url:"/product",requestData:{method:"GET",headers:G(r()),params:c}})}},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"".concat(ie,"_SUCCESS"):return Object(I.a)(Object(I.a)({},e),{},{products:t.response});default:return e}},pe=Object(j.a)((function(e){return{root:{height:"29vh",overflowY:"scroll"},tooltip:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:300,border:"1px solid #dadde9"},card:{display:"flex"},details:{display:"flex",flexDirection:"column"},content:{flex:"1 0 auto"},buttons:{display:"flex",alignItems:"center",paddingLeft:e.spacing(1),paddingBottom:e.spacing(1)},media:{width:80},productText:{fontWeight:"bold",fontSize:"13px"},smallText:{fontSize:"12px"},mb:{marginBottom:e.spacing(2)},addButton:{width:20}}}));var he=Object(N.connect)((function(e){return{products:e.product.products,basket:e.basket}}),(function(e){return{dispatchGetProducts:function(t,n,a){return e(r.getProducts(t,n,a))},dispatchUpdateBasket:function(t,n){return e(a.updateBasket(t,n))}}}))((function(e){var t=e.searchQuery,n=e.retailer,a=e.limit,r=e.tableView,c=e.products,s=e.shopperId,A=e.dispatchGetProducts,o=e.dispatchUpdateBasket,l=e.basket,u=pe();i.a.useEffect((function(){A(t,n,a)}),[A,a,n,t]);var d=function(e){var t=H(e,l);o(s,t)};return r?Object(J.jsx)(se.a,{className:u.root,children:Object(J.jsx)(ae.a,{size:"small","aria-label":"product catalog table",children:Object(J.jsx)(re.a,{children:c&&c.map((function(e){return Object(J.jsxs)(Ae.a,{children:[Object(J.jsx)(oe.a,{title:Object(J.jsx)("img",{alt:"product",className:u.media,src:"mockImageUrl"===e.image?w:e.image}),children:Object(J.jsx)(ce.a,{component:"th",scope:"row",children:e.name})}),Object(J.jsxs)(ce.a,{align:"right",children:["\xa3 ",e.price.toFixed(2)]}),Object(J.jsx)(ce.a,{align:"right",children:Object(J.jsx)(S.a,{"aria-label":"addToBasketButton",variant:"contained",size:"small",color:"primary",onClick:function(){return d(e)},children:"Add to basket"})})]},e.productId)}))})})}):Object(J.jsx)(x.a,{container:!0,spacing:2,className:u.root,children:c&&c.map((function(e){return Object(J.jsx)(x.a,{item:!0,md:4,children:Object(J.jsxs)(ee.a,{className:u.card,children:[Object(J.jsxs)("div",{className:u.details,children:[Object(J.jsxs)(ne.a,{className:u.content,children:[Object(J.jsx)(m.a,{className:u.productText,gutterBottom:!0,variant:"subtitle2",children:e.name}),Object(J.jsxs)(m.a,{className:u.smallText,display:"inline",variant:"body2",color:"textSecondary",component:"p",children:["Price:"," "]}),Object(J.jsxs)(m.a,{className:u.smallText,display:"inline",variant:"body2",color:"primary",component:"p",children:["\xa3 ",e.price.toFixed(2)]}),Object(J.jsx)("br",{}),Object(J.jsxs)(m.a,{className:u.smallText,display:"inline",variant:"body2",color:"textSecondary",component:"p",children:["Retailer:"," "]}),Object(J.jsx)(m.a,{className:u.smallText,display:"inline",variant:"body2",color:"primary",component:"p",children:e.retailer})]}),Object(J.jsx)("div",{className:u.buttons,children:Object(J.jsx)(S.a,{className:u.addButton,"aria-label":"addToBasketButton",variant:"contained",size:"small",color:"primary",onClick:function(){return d(e)},children:"Add"})})]}),Object(J.jsx)(te.a,{className:u.media,image:"mockImageUrl"===e.image?w:e.image})]})},e.productId)}))})})),je=n(319),me=n(311),be=n(137),xe=n.n(be),ge=Object(j.a)((function(e){return{mb:{marginBottom:e.spacing(2)}}}));function fe(e){var t=e.value,n=e.onChange,a=ge();return Object(J.jsx)(je.a,{className:a.mb,id:"search",label:"Search for a product",fullWidth:!0,value:t,onChange:n,InputProps:{startAdornment:Object(J.jsx)(me.a,{position:"start",children:Object(J.jsx)(xe.a,{})})}})}var Oe=n(41),ve=n.n(Oe),ye={timeOut:5e3,showCloseButton:!0,progressBar:!1,transitionIn:"fadeIn",transitionOut:"fadeOut"},Te=function(e,t,n,a){var r="info"===n?Oe.toastr.info:"warning"===n?Oe.toastr.warning:"danger"===n?Oe.toastr.error:Oe.toastr.success;a&&(ye.onShowComplete=a),r(e,t,ye)},ke=Object(j.a)((function(e){return{root:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},media:{height:0,paddingTop:"56.25%"},mr:{marginRight:e.spacing(1)},mt:{marginTop:e.spacing(3)},divider:{marginTop:e.spacing(2),marginBottom:e.spacing(2)}}}));function Ce(){var e=ke(),t=i.a.useState(""),n=Object(h.a)(t,2),a=n[0],r=n[1];return i.a.useEffect((function(){Te("","The cashier page is under development and only for demonstration purposes.","warning")}),[]),Object(J.jsxs)(b.a,{maxWidth:"xl",className:e.root,children:[Object(J.jsxs)(x.a,{container:!0,spacing:3,children:[Object(J.jsxs)(x.a,{item:!0,md:6,children:[Object(J.jsx)(m.a,{variant:"subtitle1",display:"inline",className:e.mr,children:"Video Call"}),Object(J.jsxs)(m.a,{variant:"subtitle2",display:"inline",children:[" ","Customer Name"]})]}),Object(J.jsx)(x.a,{item:!0,xs:6,children:Object(J.jsx)(x.a,{container:!0,spacing:3,children:Object(J.jsx)(x.a,{item:!0,xs:12,children:Object(J.jsx)(m.a,{variant:"subtitle1",children:"Product Catalogue"})})})})]}),Object(J.jsxs)(x.a,{container:!0,spacing:3,children:[Object(J.jsx)(x.a,{item:!0,md:6,children:Object(J.jsx)($,{})}),Object(J.jsx)(x.a,{item:!0,xs:6,children:Object(J.jsx)(x.a,{container:!0,spacing:3,children:Object(J.jsxs)(x.a,{item:!0,xs:12,children:[Object(J.jsx)(fe,{value:a,onChange:function(e){r(e.target.value)}}),Object(J.jsx)(he,{tableView:!0,retailer:"Mock Retailer",searchQuery:a,shopperId:0}),Object(J.jsx)("hr",{className:e.mt}),Object(J.jsx)(m.a,{variant:"subtitle1",children:"Customer Basket"}),Object(J.jsx)(_,{shopperId:0})]})})})]})]})}var Ee=n(13),Se=n.n(Ee),we=n(23),Ne=n(140),Ie=n.n(Ne),Be=n(141),Le=n.n(Be),Ue=n(313),Ve="tokens/GET_SPEECH_TO_TEXT_TOKEN",Ge="tokens/GET_TEXT_TO_SPEECH_TOKEN",De="tokens/GET_ASSISTANT_TOKEN",Pe={speechToTextToken:null,speechToTextUrl:null,textToSpeechToken:null,textToSpeechUrl:null,assistantToken:null,assistantUrl:null},qe="/tokens",Re=function(){return function(e){e({type:"API",name:Ve,url:"".concat(qe,"/speech-to-text"),requestData:{method:"GET"}})}},We=function(){return function(e){e({type:"API",name:Ge,url:"".concat(qe,"/text-to-speech"),requestData:{method:"GET"}})}},Ye=function(){return function(e){e({type:"API",name:De,url:"".concat(qe,"/assistant"),requestData:{method:"GET"}})}},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"".concat(Ve,"_SUCCESS"):return Object(I.a)(Object(I.a)({},e),{},{speechToTextToken:t.response.accessToken,speechToTextUrl:t.response.url});case"".concat(Ge,"_SUCCESS"):return Object(I.a)(Object(I.a)({},e),{},{textToSpeechToken:t.response.accessToken,textToSpeechUrl:t.response.url});case"".concat(De,"_SUCCESS"):return Object(I.a)(Object(I.a)({},e),{},{assistantToken:t.response.accessToken,assistantUrl:t.response.url});default:return e}},Xe=n(138),He=n.n(Xe),Je=n(139),ze=n.n(Je),_e=function(){var e=Object(we.a)(Se.a.mark((function e(t,n){var a,r;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.prev=1,e.next=4,navigator.mediaDevices.getUserMedia({video:!1,audio:!0});case 4:a=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("Could not find media devices");case 10:return r=He()({url:t,accessToken:n,objectMode:!0,extractResults:!0,format:!0,mediaStream:a,keepMicrophone:!0}),e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}(),Me=function(){var e=Object(we.a)(Se.a.mark((function e(t,n,a,r,c,s){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ze()({url:t,accessToken:n,text:a,voice:r,accept:c,element:s}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c,s){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(we.a)(Se.a.mark((function e(t,n){var a,r;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(t,"/sessions?version=2020-04-01"),{method:"post",headers:new Headers({Authorization:"Bearer "+n,"Content-Type":"application/json"})});case 3:return r=e.sent,e.next=6,r.json();case 6:a=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:return e.abrupt("return",a?a.session_id:null);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(we.a)(Se.a.mark((function e(t,n,a,r){var c,s,A;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={speech:"",actions:[]},e.prev=1,e.next=4,fetch("".concat(t,"/sessions/").concat(a,"/message?version=2020-04-01"),{method:"post",headers:new Headers({Authorization:"Bearer "+n,Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify({input:{text:r}})});case 4:return c=e.sent,e.next=7,c.json();case 7:c=e.sent,s.speech='<speak version="1.0">'+c.output.generic.reduce((function(e,t){return"text"===t.response_type&&(t.text.includes("[")?e.push('<prosody rate="medium">'+t.text.trim().replace(/['"[\]]+/g,"").replace(/,/g,", ")+"</prosody>"):e.push('<prosody rate="+10%">'+t.text.trim()+"</prosody>")),e}),[]).join(' <break strength="medium"></break>')+"</speak>",A=c.output.generic.reduce((function(e,t){return"user_defined"===t.response_type&&e.push(t.user_defined),e}),[]),s.actions=A,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0);case 16:return e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Ze=function(e){try{e=e.replace(/(<([^>]+)>)/gi,"")}catch(t){console.log(t)}return e},$e=n.p+"static/media/AvatarV2.4e2032d9.glb",et=Object(j.a)((function(e){return{paper:{display:"flex",color:e.palette.text.secondary,background:"#eeeeee",height:"75vh",alignItems:"center",justifyContent:"center"},inner:{display:"flex",flexDirection:"column",alignItems:"center"},bold:{fontWeight:"bold"},transcript:{wordWrap:"break-word",paddingLeft:e.spacing(2),paddingRight:e.spacing(2)}}}));var tt=Object(p.g)(Object(N.connect)((function(e){return{speechToTextToken:e.tokens.speechToTextToken,speechToTextUrl:e.tokens.speechToTextUrl,textToSpeechToken:e.tokens.textToSpeechToken,textToSpeechUrl:e.tokens.textToSpeechUrl,assistantToken:e.tokens.assistantToken,assistantUrl:e.tokens.assistantUrl,basket:e.basket,authUser:e.auth.user,products:e.product.products}}),(function(e){return{dispatchGetSpeechToTextToken:function(){return e(c.getSpeechToTextToken())},dispatchGetTextToSpeechToken:function(){return e(c.getTextToSpeechToken())},dispatchGetAssistantToken:function(){return e(c.getAssistantToken())},dispatchUpdateBasket:function(t,n){return e(a.updateBasket(t,n))},dispatchGetProducts:function(t,n,a){return e(r.getProducts(t,n,a))}}}))((function(e){var t=e.authUser,n=e.basket,a=e.products,r=e.speechToTextToken,c=e.speechToTextUrl,s=e.textToSpeechToken,A=e.textToSpeechUrl,l=e.assistantToken,u=e.assistantUrl,d=e.dispatchGetSpeechToTextToken,p=e.dispatchGetTextToSpeechToken,j=e.dispatchGetAssistantToken,b=e.dispatchUpdateBasket,x=e.dispatchGetProducts,g=e.history,f=et(),O=i.a.useState(!1),v=Object(h.a)(O,2),y=v[0],T=v[1],k=i.a.useState(!1),C=Object(h.a)(k,2),S=C[0],w=C[1],N=i.a.useState(!1),I=Object(h.a)(N,2),B=I[0],L=I[1],U=i.a.useState(null),V=Object(h.a)(U,2),G=V[0],D=V[1],P=i.a.useState(""),q=Object(h.a)(P,2),R=(q[0],q[1]),W=i.a.useState(""),Y=Object(h.a)(W,2),F=Y[0],z=Y[1],_=i.a.useState(null),K=Object(h.a)(_,2),Q=K[0],Z=K[1],$=i.a.useRef(null),ee=i.a.useState(!1),te=Object(h.a)(ee,2),ne=te[0],ae=te[1],re=i.a.useState(0),ce=Object(h.a)(re,2),se=ce[0];ce[1],i.a.useEffect((function(){r&&c||d(),s&&A||p(),l&&u||j()}),[d,p,j,r,c,s,A,l,u]);var Ae=Object(o.useCallback)(function(){var e=Object(we.a)(Se.a.mark((function e(t){var n,a,r;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=["en-GB_JamesV3Voice","en-GB_KateV3Voice","en-GB_CharlotteV3Voice"][se],e.prev=2,(c=$)||(c=document.createElement("audio")),a=c&&"function"===typeof c.canPlayType&&""!==c.canPlayType("audio/mp3")?"audio/mp3":"audio/wav",e.next=6,Me(A,s,t,n,a,$.current);case 6:r=e.sent,z(Ze(t)),r.removeEventListener("playing",ue),r.removeEventListener("ended",de),r.addEventListener("playing",ue),r.addEventListener("ended",de),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0);case 17:case"end":return e.stop()}var c}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),[s,A,se]);i.a.useEffect((function(){function e(){return(e=Object(we.a)(Se.a.mark((function e(){var t;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ke(u,l);case 2:t=e.sent,Z(t),console.log("Created assistant session: "+t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}l&&u&&!Q&&function(){e.apply(this,arguments)}()}),[l,u,Q,s,Ae]),i.a.useEffect((function(){r&&c&&s&&A&&l&&u&&Q&&!y&&(T(!0),console.log("Done loading tokens from API."),Ae("Hello. Welcome to the IBM NextGen Shopping Experience. To get started, simply ask for a product that you would like to order."))}),[y,r,c,s,A,l,u,Q,Ae]);var oe=function(){var e=Object(we.a)(Se.a.mark((function e(){var t;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe(),w(!0),e.next=4,_e(c,r);case 4:(t=e.sent).on("data",function(){var e=Object(we.a)(Se.a.mark((function e(t){var n,a;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.final){e.next=12;break}return n=t.alternatives[0].transcript,R(n),console.log(n),w(!1),e.next=7,Qe(u,l,Q,n);case 7:if(!(a=e.sent).speech){e.next=11;break}return e.next=11,Ae(a.speech);case 11:a.actions&&ie(a.actions);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.on("error",(function(e){console.log(e),w(!1)})),t.on("end",(function(){console.log("stream ended"),w(!1)})),D(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();i.a.useEffect((function(){S||null===G||(G.stop(),D(null))}),[S,G]);var ie=function(e){if(e){var r,c=Object(X.a)(e);try{var s=function(){var e=r.value;switch(e.action_type){case"add_basket":var c=a.find((function(t){return t.productId===parseInt(e.product_id)}));if(c){var s=H(c,n,e.quantity);b(t.userId,s),Te("","Your shopping basket has been updated","success")}break;case"filter_product":e.product_query_string&&(x(e.product_query_string,"Mock Retailer",3),Te("","The product catalogue has been updated to match your query","info"));break;case"reset_context":le();break;case"checkout":ae(!0)}};for(c.s();!(r=c.n()).done;)s()}catch(A){c.e(A)}finally{c.f()}}},le=function(){x(null,"Mock Retailer",9)},ue=function(){console.log("AUDIO PLAYING!"),L(!0)},de=function(){console.log("AUDIO STOPPED PLAYING!"),L(!1)};i.a.useEffect((function(){ne&&!B&&(ae(!1),g.push({pathname:"/checkout"}))}),[g,ne,B]);var pe=function(){z("");try{$.current.pause(),$.current.currentTime=0}catch(e){}},he=S?Object(J.jsx)(E.a,{id:"stopListenButton",color:"secondary","aria-label":"stop",onClick:function(){return w(!1)},children:Object(J.jsx)(Ie.a,{fontSize:"large"})}):Object(J.jsx)(E.a,{id:"startListenButton",color:"primary","aria-label":"speak",onClick:oe,children:Object(J.jsx)(Le.a,{fontSize:"large"})});return Object(J.jsxs)(M.a,{className:f.paper,children:[Object(J.jsxs)("audio",{ref:$,children:["Your browser does not support the ",Object(J.jsx)("code",{children:"audio"})," element."]}),Object(J.jsx)("div",{className:f.inner,children:y?Object(J.jsxs)(i.a.Fragment,{children:[Object(J.jsx)("model-viewer",{autoplay:!0,loading:"eager","animation-name":B?"Talking":"Idle",style:{width:"350px",height:"350px"},src:$e}),F.trim().length>0&&Object(J.jsx)(m.a,{className:f.transcript,variant:"h6",children:F}),Object(J.jsx)("br",{}),Object(J.jsx)(m.a,{id:"listenText",variant:"subtitle2",children:S?"Listening...":"Press the mic icon and start speaking"}),he]}):Object(J.jsxs)(i.a.Fragment,{children:[Object(J.jsx)(m.a,{id:"loadingText",variant:"subtitle2",gutterBottom:!0,children:"Loading... Please wait"}),Object(J.jsx)(Ue.a,{size:30})]})})]})}))),nt=Object(j.a)((function(e){return{root:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},mt:{marginTop:e.spacing(3)}}}));var at=Object(N.connect)((function(e){return{authUser:e.auth.user}}),null)((function(e){var t=e.authUser,n=nt(),a=i.a.useState(""),r=Object(h.a)(a,2),c=r[0],s=r[1];return Object(J.jsxs)(b.a,{maxWidth:"xl",className:n.root,children:[Object(J.jsxs)(x.a,{container:!0,spacing:3,children:[Object(J.jsx)(x.a,{item:!0,md:6,children:Object(J.jsx)(m.a,{variant:"subtitle1",children:"Artificial Cashier"})}),Object(J.jsx)(x.a,{item:!0,xs:6,children:Object(J.jsx)(m.a,{variant:"subtitle1",children:"Product Catalogue"})})]}),Object(J.jsxs)(x.a,{container:!0,spacing:3,children:[Object(J.jsx)(x.a,{item:!0,md:6,children:Object(J.jsx)(tt,{})}),Object(J.jsxs)(x.a,{item:!0,xs:6,children:[Object(J.jsx)(x.a,{container:!0,spacing:3,children:Object(J.jsx)(x.a,{item:!0,xs:12,children:Object(J.jsx)(fe,{value:c,onChange:function(e){s(e.target.value)}})})}),Object(J.jsx)(he,{retailer:"Mock Retailer",searchQuery:c,limit:9,shopperId:t.userId}),Object(J.jsx)("hr",{className:n.mt}),Object(J.jsx)(m.a,{variant:"subtitle1",children:"Shopping Basket"}),Object(J.jsx)(_,{shopperId:t.userId})]})]})]})})),rt=n(314),ct=n(315),st=Object(I.a)(Object(I.a)({},{API_URL:"https://nextgenshop.pythonanywhere.com"}),{ENV:"production",HOME_URL:"https://www.nextgenshop.github.io/nextgenshop-frontend",APP_NAME:"NextGenShop"}),At="auth/GET_USER",ot="auth/LOGIN",it="auth/LOGOUT",lt="auth/REGISTER",ut={token:localStorage.getItem("token"),isAuthenticated:!1,user:null},dt="/auth",pt=function(){return function(e,t){e({type:"API",name:At,url:"".concat(dt,"/user/"),requestData:{method:"GET",headers:G(t())}})}},ht=function(e){return function(t){t({type:"API",name:ot,url:"".concat(dt,"/login/"),requestData:{method:"POST",data:e}})}},jt=function(){return function(){var e=Object(we.a)(Se.a.mark((function e(t,n){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"API",name:it,url:"".concat(dt,"/logout/"),requestData:{method:"GET",headers:G(n())}});case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},mt=function(e){return function(t){t({type:"API",name:lt,url:"".concat(dt,"/register/"),requestData:{method:"POST",data:e}})}},bt=function(){return function(e){e({type:"".concat(ot,"_CLEARERR")}),e({type:"".concat(lt,"_CLEARERR")})}},xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"".concat(At,"_SUCCESS"):return Object(I.a)(Object(I.a)({},e),{},{isAuthenticated:!0,user:t.response});case"".concat(it,"_SUCCESS"):case"".concat(At,"_FAILURE"):return localStorage.removeItem("token"),Object(I.a)(Object(I.a)({},ut),{},{token:null});case"".concat(lt,"_SUCCESS"):case"".concat(ot,"_SUCCESS"):return localStorage.setItem("token",t.response.token),Object(I.a)(Object(I.a)({},e),{},{user:t.response.user,token:t.response.token,isAuthenticated:!0});default:return e}},gt=Object(j.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1}}}));var ft=Object(N.connect)((function(e){return{auth:e.auth}}),(function(e){return{dispatchLogout:function(){return e(A.logout())}}}))((function(e){var t=e.auth,n=e.dispatchLogout,a=gt();return Object(J.jsx)("div",{className:a.root,children:Object(J.jsx)(rt.a,{position:"sticky",children:Object(J.jsxs)(ct.a,{children:[Object(J.jsx)(m.a,{variant:"h6",className:a.title,children:st.APP_NAME}),t&&t.isAuthenticated?Object(J.jsx)(S.a,{id:"logoutButton",color:"inherit",onClick:function(){n(),Te("","You have been logged out!","info")},children:"Logout"}):Object(J.jsxs)(i.a.Fragment,{children:[Object(J.jsx)(S.a,{color:"inherit",component:d.b,to:"/login",children:"Login"}),Object(J.jsx)(S.a,{color:"inherit",component:d.b,to:"/register",children:"Register"})]})]})})})}));var Ot=Object(N.connect)((function(e){return{auth:e.auth}}),null)((function(e){var t=e.auth;if(t&&t.isAuthenticated&&t.user){var n="cashier"===t.user.type?Object(J.jsx)(Ce,{}):Object(J.jsx)(at,{});return Object(J.jsxs)(i.a.Fragment,{children:[Object(J.jsx)(ft,{}),n]})}return Object(J.jsx)(p.a,{to:"/login"})})),vt=n(316),yt=n(34),Tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.error,r=a;Array.isArray(a)&&(r=a[0]);var c=/(.*)_(REQUEST|FAILURE|CLEARERR)/.exec(n);if(!c)return e;var s=Object(h.a)(c,3),A=s[1],o=s[2];return Object(I.a)(Object(I.a)({},e),{},Object(yt.a)({},A,"FAILURE"===o?r:""))},kt=n(95),Ct=n.n(kt),Et=Tt,St=Object(j.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingTop:e.spacing(2),paddingBottom:e.spacing(2),height:"80vh"},heading:{paddingBottom:e.spacing(2)},mr:{marginRight:e.spacing(1)},mt:{marginTop:e.spacing(1)}}}));var wt,Nt=(wt=[s.LOGIN],function(e){return Ct()(wt).map((function(t){return Ct.a.get(e,"error.".concat(t))})).compact().first()||""}),It=Object(N.connect)((function(e){return{auth:e.auth,error:Nt(e)}}),(function(e){return{dispatchLogin:function(t){return e(A.login(t))},dispatchClearErrors:function(){return e(A.clearErrors())}}}))((function(e){var t=e.auth,n=e.error,a=e.dispatchLogin,r=e.dispatchClearErrors,c=St(),s=i.a.useState(""),A=Object(h.a)(s,2),o=A[0],l=A[1],u=i.a.useState(""),d=Object(h.a)(u,2),j=d[0],x=d[1];return i.a.useEffect((function(){n&&Te("",n,"danger",r)}),[n,r]),t&&t.isAuthenticated?Object(J.jsx)(p.a,{to:"/"}):Object(J.jsxs)(b.a,{className:c.root,maxWidth:"md",children:[Object(J.jsx)(m.a,{variant:"h4",className:c.heading,children:"NextGenShop Login"}),Object(J.jsx)(je.a,{id:"emailTextField",label:"Email",value:o,onChange:function(e){return l(e.target.value)}}),Object(J.jsx)(je.a,{id:"passwordTextField",type:"password",label:"Password",value:j,onChange:function(e){return x(e.target.value)}}),Object(J.jsx)(S.a,{id:"loginButton",className:c.mt,color:"primary",variant:"contained",onClick:function(){o.trim()&&j&&a({email:o,password:j});x("")},children:"Login"}),Object(J.jsx)(vt.a,{className:c.mt}),Object(J.jsxs)("div",{className:c.mt,children:[Object(J.jsx)(S.a,{id:"loginShopperButton",className:c.mr,variant:"contained",onClick:function(){a({email:"mockuser1@gmail.com",password:"password"})},children:"Login as shopper"}),Object(J.jsx)(S.a,{id:"loginCashierButton",variant:"contained",onClick:function(){a({email:"mockcashieruser@gmail.com",password:"password"})},children:"Login as cashier"})]}),Object(J.jsx)(m.a,{className:c.mt,variant:"caption",children:"These buttons are for testing purposes."})]})})),Bt=n(318),Lt=n(320),Ut=n(325),Vt=n(317),Gt=n(322),Dt=function(e){var t=e.handleNext,n=e.handleChange,a=e.values,r=a.firstName,c=a.lastName,s=a.email,A=a.phone,i=e.formErrors,l=r.length>0&&!i.firstName&&c.length>0&&!i.lastName&&s.length>0&&!i.email&&A.length>0&&!i.phone;return Object(J.jsxs)(o.Fragment,{children:[Object(J.jsx)(m.a,{variant:"h6",gutterBottom:!0,children:"Shipping address"}),Object(J.jsxs)(x.a,{container:!0,spacing:3,children:[Object(J.jsx)(x.a,{item:!0,xs:12,sm:6,children:Object(J.jsx)(je.a,{fullWidth:!0,label:"First Name",name:"firstName",placeholder:"Your first name",margin:"normal",value:r||"",onChange:n,error:!!i.firstName,helperText:i.firstName,required:!0})}),Object(J.jsx)(x.a,{item:!0,xs:12,sm:6,children:Object(J.jsx)(je.a,{fullWidth:!0,label:"Last Name",name:"lastName",placeholder:"Your last name",margin:"normal",value:c||"",onChange:n,error:!!i.lastName,helperText:i.lastName,required:!0})}),Object(J.jsx)(x.a,{item:!0,xs:12,sm:6,children:Object(J.jsx)(je.a,{fullWidth:!0,label:"Email",name:"email",placeholder:"Your email address",type:"email",value:s||"",onChange:n,margin:"normal",error:!!i.email,helperText:i.email,required:!0})}),Object(J.jsx)(x.a,{item:!0,xs:12,sm:6,children:Object(J.jsx)(je.a,{fullWidth:!0,label:"Phone number",name:"phone",placeholder:"i.e: xxx-xxx-xxxx",value:A||"",onChange:n,error:!!i.phone,helperText:i.phone,margin:"normal"})})]}),Object(J.jsx)("div",{style:{display:"flex",marginTop:50,justifyContent:"flex-end"},children:Object(J.jsx)(S.a,{variant:"contained",disabled:!l,color:"primary",onClick:l?t:null,children:"Next"})})]})},Pt=function(e){var t=e.handleNext,n=e.handleBack,a=e.handleChange,r=e.values,c=r.address1,s=r.address2,A=r.city,o=r.state,i=r.postcode,l=r.country,u=e.formErrors,d=c.length>0&&!u.address1&&s.length>0&&!u.address2&&A.length>0&&!u.city&&o.length>0&&!u.state&&i.length>0&&!u.postcode&&l.length>0&&!u.country;return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)(x.a,{container:!0,spacing:2,children:[Object(J.jsx)(x.a,{item:!0,xs:12,sm:6,children:Object(J.jsx)(je.a,{fullWidth:!0,label:"Address1",name:"address1",placeholder:"Enter your address",value:c||"",margin:"normal",onChange:a,error:!!u.address1,helperText:u.address1,required:!0})}),Object(J.jsx)(x.a,{item:!0,xs:12,sm:6,children:Object(J.jsx)(je.a,{fullWidth:!0,label:"Number",name:"address2",placeholder:"Enter your address number",value:s||"",margin:"normal",onChange:a,error:!!u.address2,helperText:u.address2,required:!0})}),Object(J.jsx)(x.a,{item:!0,xs:12,sm:6,children:Object(J.jsx)(je.a,{fullWidth:!0,label:"City",name:"city",placeholder:"Enter your City",value:A||"",margin:"normal",onChange:a,error:!!u.city,helperText:u.city,required:!0})}),Object(J.jsx)(x.a,{item:!0,xs:12,sm:6,children:Object(J.jsx)(je.a,{fullWidth:!0,label:"State",name:"state",placeholder:"Enter your State/Region",value:o||"",margin:"normal",onChange:a,error:!!u.state,helperText:u.state,required:!0})}),Object(J.jsx)(x.a,{item:!0,xs:12,sm:6,children:Object(J.jsx)(je.a,{fullWidth:!0,label:"Postcode",name:"postcode",placeholder:"Enter your postcode",value:i||"",margin:"normal",onChange:a,error:!!u.postcode,helperText:u.postcode,required:!0})}),Object(J.jsx)(x.a,{item:!0,xs:12,sm:6,children:Object(J.jsx)(je.a,{fullWidth:!0,label:"Country",name:"country",placeholder:"Enter your country",value:l||"",margin:"normal",onChange:a,error:!!u.country,helperText:u.country,required:!0})})]}),Object(J.jsxs)("div",{style:{display:"flex",marginTop:50,justifyContent:"flex-end"},children:[Object(J.jsx)(S.a,{variant:"contained",color:"default",onClick:n,style:{marginRight:10},children:"Back"}),Object(J.jsx)(S.a,{variant:"contained",disabled:!d,color:"primary",onClick:d?t:null,children:"Next"})]})]})},qt=Object(j.a)((function(e){return{listItem:{padding:e.spacing(1,0)},total:{fontWeight:700},title:{marginTop:e.spacing(2)}}}));var Rt=Object(N.connect)((function(e){return{basket:e.basket}}),null)((function(e){var t=e.handleNext,n=e.handleBack,a=e.values,r=e.basket,c=a.firstName,s=a.lastName,A=a.email,o=a.phone,l=a.address1,u=a.address2,d=a.city,p=a.state,h=a.postcode,j=a.country,b=qt();return Object(J.jsxs)(i.a.Fragment,{children:[Object(J.jsx)(m.a,{variant:"h6",gutterBottom:!0,children:"Order summary"}),Object(J.jsxs)(O.a,{disablePadding:!0,children:[r&&r.items&&r.items.map((function(e){return Object(J.jsxs)(v.a,{className:b.list,children:[Object(J.jsx)(k.a,{primary:e.product.name,secondary:"Quantity: "+e.quantity}),Object(J.jsxs)(m.a,{variant:"body2",children:["\xa3",(e.product.price*e.quantity).toFixed(2)]})]},e.product.name)})),Object(J.jsxs)(v.a,{className:b.list,children:[Object(J.jsx)(k.a,{primary:"Total"}),Object(J.jsxs)(m.a,{variant:"subtitle1",className:b.total,children:["\xa3",r?r.totalPrice:0]})]})]}),Object(J.jsxs)(x.a,{container:!0,spacing:2,children:[Object(J.jsxs)(x.a,{item:!0,xs:12,sm:6,children:[Object(J.jsx)(m.a,{variant:"h6",gutterBottom:!0,className:b.title,children:"Shipping"}),Object(J.jsx)(x.a,{container:!0,children:Object(J.jsxs)(i.a.Fragment,{children:[Object(J.jsxs)(x.a,{item:!0,xs:6,children:["Address:",Object(J.jsx)(m.a,{gutterBottom:!0,children:l})]}),Object(J.jsxs)(x.a,{item:!0,xs:6,children:["Number:",Object(J.jsx)(m.a,{gutterBottom:!0,children:u})]}),Object(J.jsxs)(x.a,{item:!0,xs:6,children:["City:",Object(J.jsx)(m.a,{gutterBottom:!0,children:d})]}),Object(J.jsxs)(x.a,{item:!0,xs:6,children:["State/Region:",Object(J.jsx)(m.a,{gutterBottom:!0,children:p})]}),Object(J.jsxs)(x.a,{item:!0,xs:6,children:["Postcode:",Object(J.jsx)(m.a,{gutterBottom:!0,children:h})]}),Object(J.jsxs)(x.a,{item:!0,xs:6,children:["Country:",Object(J.jsx)(m.a,{gutterBottom:!0,children:j})]})]})})]}),Object(J.jsxs)(x.a,{item:!0,container:!0,direction:"column",xs:12,sm:6,children:[Object(J.jsx)(m.a,{variant:"h6",gutterBottom:!0,className:b.title,children:"Contact details"}),Object(J.jsx)(x.a,{container:!0,children:Object(J.jsxs)(i.a.Fragment,{children:[Object(J.jsxs)(x.a,{item:!0,xs:6,children:["First Name:",Object(J.jsx)(m.a,{gutterBottom:!0,children:c})]}),Object(J.jsxs)(x.a,{item:!0,xs:6,children:["Last Name:",Object(J.jsx)(m.a,{gutterBottom:!0,children:s})]}),Object(J.jsxs)(x.a,{item:!0,xs:6,children:["Email:",Object(J.jsx)(m.a,{gutterBottom:!0,children:A})]}),Object(J.jsxs)(x.a,{item:!0,xs:6,children:["Phone Number:",Object(J.jsx)(m.a,{gutterBottom:!0,children:o})]})]})})]})]}),Object(J.jsxs)("div",{style:{display:"flex",marginTop:50,justifyContent:"flex-end"},children:[Object(J.jsx)(S.a,{variant:"contained",color:"default",onClick:n,children:"Back"}),Object(J.jsx)(S.a,{style:{marginLeft:10},variant:"contained",color:"secondary",onClick:function(){console.log(a),t()},children:"Confirm & Continue"})]})]})})),Wt=Object(j.a)((function(e){return{box:{padding:e.spacing(3)},title:{marginTop:30}}})),Yt=function(){var e=Wt();return Object(J.jsxs)(Lt.a,{className:e.box,children:[Object(J.jsx)(m.a,{variant:"h2",align:"center",children:"Thank you!"}),Object(J.jsx)(m.a,{component:"p",align:"center",className:e.title,children:"You will get an email with further instructions for payment."})]})},Ft=RegExp(/^[A-Z ]+$/i),Xt=RegExp(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i),Ht=RegExp(/^\D?(\d{3})\D?\D?(\d{3})\D?(\d{4,6})$/),Jt=RegExp(/^[0-9]{5}([- /]?[0-9]{4})?$/),zt=RegExp(/^\d+$/);var _t=["Contact Details","Shipping Address","Order Summary"],Mt={firstName:"",lastName:"",email:"",address1:"",address2:"",city:"",state:"",postcode:"",country:"",phone:""},Kt={firstName:{error:"",validate:"text",minLength:2,maxLength:20},lastName:{error:"",validate:"text",minLength:2,maxLength:20},email:{error:"",validate:"email"},city:{error:"",validate:"text",minLength:3,maxLength:20},address1:{error:"",validate:"text",minLength:3,maxLength:20},address2:{error:"",validate:"number",minLength:1,maxLength:20},state:{error:"",validate:"text",minLength:3,maxLength:20},postcode:{error:"",validate:"postcode",minLength:3,maxLength:20},country:{error:"",validate:"text",minLength:3,maxLength:20},phone:{error:"",validate:"phone",maxLength:15}};var Qt=function(){var e=Object(o.useState)(0),t=Object(h.a)(e,2),n=t[0],a=t[1],r=Object(o.useState)(Mt),c=Object(h.a)(r,2),s=c[0],A=c[1],i=Object(o.useState)({}),l=Object(h.a)(i,2),u=l[0],d=l[1],p=function(){return a((function(e){return e+1}))},j=function(){return a((function(e){return e-1}))},b=function(e){var t=e.target,n=t.name,a=t.value;A((function(e){return Object(I.a)(Object(I.a)({},e),{},Object(yt.a)({},n,a))}));var r=function(e,t,n){var a=n[e],r=a.validate,c=a.minLength,s=a.maxLength,A="";if(c&&t.length<c?A="Minimum of ".concat(c," characters are required."):s&&t.length>s&&(A="Maximum length of ".concat(s," exceeded!")),r){switch(r){case"text":Ft.test(t)||(A="This field accepts text only.");break;case"number":zt.test(t)||(A="This field accepts numbers only.");break;case"email":Xt.test(t)||(A="Please enter a valid email address.");break;case"phone":Ht.test(t)||(A="Please enter a valid phone number. i.e: xxx-xxx-xxxx");break;case"postcode":Jt.test(t)||(A="Please enter a valid zip code.");break;case"checkbox":t||(A="Please select a value.")}return A}}(n,a,Kt)||"";d(Object(yt.a)({},n,r))};return Object(J.jsx)(J.Fragment,{children:n===_t.length?Object(J.jsx)(Yt,{values:s}):Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(Lt.a,{style:{margin:"30px 0 50px"},children:Object(J.jsx)(m.a,{variant:"h4",align:"center",children:"Checkout"})}),Object(J.jsx)(Ut.a,{activeStep:n,style:{margin:"30px 0 15px"},alternativeLabel:!0,children:_t.map((function(e){return Object(J.jsx)(Vt.a,{children:Object(J.jsx)(Gt.a,{children:e})},e)}))}),function(e){switch(e){case 0:return Object(J.jsx)(Dt,{handleNext:p,handleChange:b,values:s,formErrors:u});case 1:return Object(J.jsx)(Pt,{handleNext:p,handleBack:j,handleChange:b,values:s,formErrors:u});case 2:return Object(J.jsx)(Rt,{handleNext:p,handleBack:j,values:s})}}(n)]})})},Zt=Object(j.a)((function(e){return{appBar:{position:"relative",color:"primary"},layout:Object(yt.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(2)),{width:600,marginLeft:"auto",marginRight:"auto"}),paper:Object(yt.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)}}}));var $t=Object(N.connect)((function(e){return{basket:e.basket}}),null)((function(){var e=Zt();return Object(J.jsxs)(i.a.Fragment,{children:[Object(J.jsx)(Bt.a,{}),Object(J.jsx)(rt.a,{position:"absolute",color:"primary",className:e.appBar,children:Object(J.jsx)(ct.a,{children:Object(J.jsx)(m.a,{variant:"h6",color:"inherit",noWrap:!0,children:Object(J.jsx)(d.b,{to:"/login",style:{textDecoration:"none",color:"#FFF"},children:"NextGenShop"})})})}),Object(J.jsx)("main",{className:e.layout,children:Object(J.jsx)(M.a,{className:e.paper,children:Object(J.jsx)(Qt,{})})})]})}));n(229);var en=function(){return Object(J.jsxs)(i.a.Fragment,{children:[Object(J.jsx)(d.a,{basename:"/nextgenshop-frontend",children:Object(J.jsxs)(p.d,{children:[Object(J.jsx)(p.b,{exact:!0,path:"/",component:Ot}),Object(J.jsx)(p.b,{path:"/login",component:It}),Object(J.jsx)(p.b,{path:"/checkout",component:$t})]})}),Object(J.jsx)(ve.a,{timeOut:5e3,newestOnTop:!0,position:"top-center",transitionIn:"fadeIn",transitionOut:"fadeOut",progressBar:!0,closeOnToastrClick:!0,preventDuplicates:!0})]})},tn=n(142),nn=n(40),an=n(143),rn=n(82),cn=n.n(rn),sn=n(96),An=function(e,t,n){var a={};if(t===s.GET_USER){var r=n.headers.authorization.split(" ")[1];e((a=sn.find((function(e){return e.token===r})))?{type:"".concat(t,"_SUCCESS"),response:a}:{type:"".concat(t,"_FAILURE"),error:"Invalid token"})}else if(t===s.LOGIN)e((a=sn.find((function(e){return e.email===n.data.email&&e.password===n.data.password})))?{type:"".concat(t,"_SUCCESS"),response:{user:a,token:a.token}}:{type:"".concat(t,"_FAILURE"),error:"Incorrect email or password"});else{if(t!==s.LOGOUT)return!1;e({type:"".concat(t,"_SUCCESS")})}return!0},on=function(e){var t=e.dispatch;return function(e){return function(){var n=Object(we.a)(Se.a.mark((function n(a){var r,c,s,A,o,i,l,u;return Se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e(a),"API"===a.type){n.next=3;break}return n.abrupt("return");case 3:if(r=a.name,c=a.url,s=a.requestData,A=a.extraData,cn.a.defaults.baseURL=st.API_URL,cn.a.defaults.headers.common["Content-Type"]="application/json",o={url:c,method:s.method},s.headers&&(o.headers=s.headers),s.data&&(o.data=s.data),s.params&&(o.params=s.params),An(t,r,o)){n.next=25;break}return t({type:"".concat(r,"_REQUEST")}),n.prev=13,n.next=16,cn.a.request(o);case 16:i=n.sent,l=i.data,t({type:"".concat(r,"_SUCCESS"),response:l,extraData:A}),n.next=25;break;case 21:n.prev=21,n.t0=n.catch(13),u=n.t0.response?n.t0.response.data.error:"An unknown error has occurred",t({type:"".concat(r,"_FAILURE"),error:u});case 25:case"end":return n.stop()}}),n,null,[[13,21]])})));return function(e){return n.apply(this,arguments)}}()}},ln=Object(nn.combineReducers)({toastr:Oe.reducer,auth:xt,product:de,basket:Y,tokens:Fe,error:Et}),un="production"===st.ENV?nn.compose:an.composeWithDevTools,dn=[Object(nn.applyMiddleware)(tn.a,on)],pn=Object(nn.createStore)(ln,un.apply(void 0,dn));n(247);u.a.render(Object(J.jsx)(i.a.StrictMode,{children:Object(J.jsx)(N.Provider,{store:pn,children:Object(J.jsx)(en,{})})}),document.getElementById("root"))},96:function(e){e.exports=JSON.parse('[{"userId":1,"fullName":"Mock User 1","email":"mockuser1@gmail.com","password":"password","type":"shopper","token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiTW9jayBVc2VyIDEifQ.CnOm194RXYztVQnGS6viXczUdfzZxDEVzF3UxAEsT8o"},{"userId":0,"fullName":"Mock Cashier User","email":"mockcashieruser@gmail.com","password":"password","type":"cashier","token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiTW9jayBDYXNoaWVyIFVzZXIifQ.bwyFTfHeHgumUDcCouZbwVfrFt7EzBngfxkJ-XXx3Xo"},{"userId":2,"fullName":"Mock User 2","email":"mockuser2@gmail.com","password":"password","type":"shopper","token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiTW9jayBVc2VyIDIifQ.AN6kDMph64I1D2EWiwFSQjTthyMjY_7oyuuOKJKWr6A"}]')}},[[248,1,2]]]);
//# sourceMappingURL=main.36a38fee.chunk.js.map