{"version":3,"sources":["assets/images/placeholder_image.png","store/api/basket/types.js","store/api/basket/reducer.js","utils/authHeader.js","store/api/basket/actions.js","store/api/basket/index.js","components/Basket.js","utils/basketUtils.js","components/VideoChat.js","store/api/product/types.js","store/api/product/reducer.js","store/api/product/actions.js","store/api/product/index.js","components/ProductCatalog.js","components/ProductSearchBox.js","views/cashier/CashierPage.js","components/RetailerSelect.js","store/api/tokens/types.js","store/api/tokens/reducer.js","store/api/tokens/actions.js","store/api/tokens/index.js","utils/speechUtils.js","assets/models/Avatar.glb","components/ArtificialCashier.js","views/shopper/ShopperPage.js","config/index.js","store/api/auth/types.js","store/api/auth/reducer.js","store/api/auth/actions.js","store/api/auth/index.js","utils/displayToast.js","components/Navbar.js","views/Main.js","store/error/reducer.js","store/error/index.js","views/Login.js","store/error/selector.js","views/cashier/CashierVideoQueue.js","views/shopper/ShopperVideoQueue.js","App.js","store/mock/MockApi.js","utils/apiMiddleware.js","store/rootReducer.js","store/index.js","index.js"],"names":["GET_BASKET","UPDATE_BASKET","DELETE_BASKET","initialState","items","totalPrice","shopper","authHeader","state","token","auth","authorization","baseUrl","updateBasket","shopperId","basket","dispatch","getState","type","name","types","url","requestData","method","headers","data","getBasket","deleteBasket","clearErrors","reducer","action","response","useStyles","makeStyles","theme","list","height","overflowY","price","color","palette","primary","dark","fontWeight","marginRight","spacing","total","connect","dispatchGetBasket","actions","dispatchUpdateBasket","basketData","classes","React","useEffect","removeItem","productId","newBasket","newItems","map","item","product","quantity","filter","removeBasketItem","Fragment","List","className","length","ListItem","ListItemAvatar","Avatar","src","PlaceholderImage","ListItemText","secondary","ListItemSecondaryAction","Typography","display","toFixed","IconButton","edge","aria-label","onClick","variant","component","paper","text","background","alignItems","justifyContent","VideoChat","Paper","GET_PRODUCTS","products","getProducts","query","retailer","limit","searchParams","params","root","tooltip","backgroundColor","maxWidth","border","card","details","flexDirection","content","flex","buttons","paddingLeft","paddingBottom","media","width","productText","fontSize","smallText","mb","marginBottom","dispatchGetProducts","productActions","basketActions","searchQuery","tableView","addToBasket","foundItem","find","addBasketItem","TableContainer","Table","size","TableBody","TableRow","Tooltip","title","alt","TableCell","scope","align","Button","Grid","container","md","Card","CardContent","gutterBottom","CardMedia","image","ProductSearchBox","value","onChange","TextField","id","label","fullWidth","InputProps","startAdornment","InputAdornment","position","paddingTop","mr","mt","marginTop","divider","CashierPage","useState","setSearchQuery","mockRetailer","mockRetailers","Container","xs","e","target","RetailerSelect","retailers","Autocomplete","disableClearable","options","renderInput","GET_SPEECH_TO_TEXT_TOKEN","GET_TEXT_TO_SPEECH_TOKEN","GET_ASSISTANT_TOKEN","speechToTextToken","speechToTextUrl","textToSpeechToken","textToSpeechUrl","assistantToken","assistantUrl","getSpeechToTextToken","getTextToSpeechToken","getAssistantToken","accessToken","captureAudioFromMicrophone","a","mediaStream","navigator","mediaDevices","getUserMedia","video","audio","console","log","recognizeMicrophoneStream","recognizeMic","objectMode","extractResults","format","keepMicrophone","textToSpeech","voice","accept","element","synthesize","createAssistantSession","fetch","Headers","Authorization","res","json","session","session_id","messageAssistant","sessionId","message","Accept","body","JSON","stringify","input","output","generic","obj","join","stripSSMLTags","str","replace","err","inner","bold","tokens","dispatchGetSpeechToTextToken","dispatchGetTextToSpeechToken","dispatchGetAssistantToken","loaded","setLoaded","listening","setListening","stream","setStream","speechText","setSpeechText","responseText","setResponseText","assistantSessionId","setAssistantSessionId","audioRef","useRef","testVoices","instanceId","createSession","startListening","stopAudio","on","final","alternatives","transcript","synthesizeTextToSpeech","stop","audioElement","document","createElement","canPlayType","current","play","addEventListener","pause","currentTime","ListenButton","ref","autoplay","animation-name","AvatarModel","background-color","style","CircularProgress","authUser","user","setRetailer","event","newValue","userId","config","API_URL","ENV","process","HOME_URL","APP_NAME","GET_USER","LOGIN","LOGOUT","REGISTER","localStorage","getItem","isAuthenticated","getUser","login","logout","register","setItem","timeOut","showCloseButton","progressBar","transitionIn","transitionOut","displayToast","msg","callbackClear","toastrInstance","toastr","info","warning","error","success","onShowComplete","flexGrow","dispatchLogout","AppBar","Toolbar","Link","to","RenderComponent","errorMessage","Array","isArray","matches","exec","requestName","requestState","heading","errorSelector","_","get","compact","first","dispatchLogin","dispatchClearErrors","email","setEmail","password","setPassword","preventDefault","trim","Divider","CashierVideoQueue","ShopperVideoQueue","App","basename","exact","path","Main","Login","newestOnTop","closeOnToastrClick","preventDuplicates","mockBasket","parse","basketId","handleRequest","req","authTypes","split","mockUsers","productTypes","basketTypes","calcTotalPrice","apiMiddleware","next","extraData","axios","defaults","baseURL","common","request","then","catch","rootReducer","combineReducers","composeEnhancers","compose","composeWithDevTools","enhancers","applyMiddleware","thunk","store","createStore","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2c4c10e7.chunk.js","sourcesContent":["export default \"data:image/png;base64,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\"","export const GET_BASKET = \"basket/GET_BASKET\";\r\nexport const UPDATE_BASKET = \"basket/UPDATE_BASKET\";\r\nexport const DELETE_BASKET = \"basket/DELETE_BASKET\";\r\n","import * as types from \"./types\";\r\n\r\nconst initialState = {\r\n  items: [],\r\n  totalPrice: 0,\r\n  shopper: 0,\r\n};\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case `${types.GET_BASKET}_SUCCESS`:\r\n    case `${types.UPDATE_BASKET}_SUCCESS`:\r\n      return {\r\n        ...state,\r\n        items: action.response.items,\r\n        totalPrice: action.response.totalPrice,\r\n        shopper: action.response.shopper,\r\n      };\r\n    case `${types.DELETE_BASKET}_SUCCESS`:\r\n      return initialState;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","export default function authHeader(state) {\n  const token = state.auth.token;\n  if (token) {\n    return { authorization: `Token ${token}` };\n  } else {\n    return null;\n  }\n}\n","import authHeader from '../../../utils/authHeader';\r\nimport * as types from './types';\r\n\r\nconst baseUrl = '/basket';\r\n\r\nexport const updateBasket = (shopperId, basket) => (dispatch, getState) => {\r\n  dispatch({\r\n    type: 'API',\r\n    name: types.UPDATE_BASKET,\r\n    url: `${baseUrl}/${shopperId}`,\r\n    requestData: {\r\n      method: 'PUT',\r\n      headers: authHeader(getState()),\r\n      data: basket,\r\n    },\r\n  });\r\n};\r\n\r\nexport const getBasket = (shopperId) => (dispatch, getState) => {\r\n  dispatch({\r\n    type: 'API',\r\n    name: types.GET_BASKET,\r\n    url: `${baseUrl}/${shopperId}`,\r\n    requestData: {\r\n      method: 'GET',\r\n      headers: authHeader(getState()),\r\n    },\r\n  });\r\n};\r\n\r\nexport const deleteBasket = (shopperId) => (dispatch, getState) => {\r\n  dispatch({\r\n    type: 'API',\r\n    name: types.DELETE_BASKET,\r\n    url: `${baseUrl}/${shopperId}`,\r\n    requestData: {\r\n      method: 'DELETE',\r\n      headers: authHeader(getState()),\r\n    },\r\n  });\r\n};\r\n\r\nexport const clearErrors = () => (dispatch) => {\r\n  dispatch({\r\n    type: `${types.UPDATE_BASKET}_CLEARERR`,\r\n  });\r\n  dispatch({\r\n    type: `${types.GET_BASKET}_CLEARERR`,\r\n  });\r\n  dispatch({\r\n    type: `${types.DELETE_BASKET}_CLEARERR`,\r\n  });\r\n};\r\n","import reducer from \"./reducer\";\r\nimport * as actions from \"./actions\";\r\nimport * as types from \"./types\";\r\n\r\nexport { actions, types };\r\nexport default reducer;\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\r\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport PlaceholderImage from \"../assets/images/placeholder_image.png\";\r\nimport { connect } from \"react-redux\";\r\nimport { actions } from \"../store/api/basket\";\r\nimport { removeBasketItem } from \"../utils/basketUtils\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  list: {\r\n    height: \"29vh\",\r\n    overflowY: \"scroll\",\r\n  },\r\n  price: {\r\n    color: theme.palette.primary.dark,\r\n    fontWeight: 600,\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  total: {\r\n    fontWeight: \"bold\",\r\n  },\r\n}));\r\n\r\nfunction Basket({ shopperId, dispatchUpdateBasket, dispatchGetBasket, basket }) {\r\n  const classes = useStyles();\r\n\r\n  React.useEffect(() => {\r\n    dispatchGetBasket();\r\n  }, [dispatchGetBasket]);\r\n\r\n  const removeItem = (productId) => {\r\n    const newBasket = removeBasketItem(productId, basket);\r\n    dispatchUpdateBasket(shopperId, newBasket);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <List className={classes.list}>\r\n        {basket && basket.items && basket.items.length > 0 ? (\r\n          basket.items.map((item) => (\r\n            <ListItem key={item.product.productId}>\r\n              <ListItemAvatar>\r\n                <Avatar src={PlaceholderImage} />\r\n              </ListItemAvatar>\r\n              <ListItemText primary={item.product.name} secondary={\"Qty: \" + item.quantity} />\r\n              <ListItemSecondaryAction>\r\n                <Typography className={classes.price} display=\"inline\">\r\n                  £{(item.product.price * item.quantity).toFixed(2)}\r\n                </Typography>\r\n                <IconButton\r\n                  edge=\"end\"\r\n                  aria-label=\"delete\"\r\n                  onClick={() => removeItem(item.product.productId)}\r\n                >\r\n                  <DeleteIcon />\r\n                </IconButton>\r\n              </ListItemSecondaryAction>\r\n            </ListItem>\r\n          ))\r\n        ) : (\r\n          <Typography variant=\"subtitle2\">Your shopping basket is empty.</Typography>\r\n        )}\r\n      </List>\r\n      <Typography className={classes.total} variant=\"h6\" component=\"div\">\r\n        Total:{\" \"}\r\n        <Typography variant=\"h6\" display=\"inline\">\r\n          £ {basket && basket.totalPrice ? basket.totalPrice.toFixed(2) : 0}\r\n        </Typography>\r\n      </Typography>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  basket: state.basket,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  dispatchGetBasket: (shopperId) => dispatch(actions.getBasket(shopperId)),\r\n  dispatchUpdateBasket: (shopperId, basketData) =>\r\n    dispatch(actions.updateBasket(shopperId, basketData)),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Basket);\r\n","const calcTotalPrice = (items) => {\r\n  let totalPrice = 0;\r\n  for (let item of items) {\r\n    totalPrice += item.product.price * item.quantity;\r\n  }\r\n  return totalPrice;\r\n};\r\n\r\nconst addBasketItem = (product, basket) => {\r\n  let newItems = [];\r\n  const foundItem = basket.items.find((item) => item.product.productId === product.productId);\r\n  if (foundItem) {\r\n    newItems = basket.items.map((item) =>\r\n      item.product.productId === foundItem.product.productId\r\n        ? { ...item, quantity: item.quantity + 1 }\r\n        : item\r\n    );\r\n  } else {\r\n    newItems = [...basket.items, { product, quantity: 1 }];\r\n  }\r\n  return { items: newItems };\r\n};\r\n\r\nconst removeBasketItem = (productId, basket) => {\r\n  let newItems = basket.items.map((item) => {\r\n    if (item.product.productId === productId) {\r\n      if (item.quantity <= 1) {\r\n        return null;\r\n      } else {\r\n        return { ...item, quantity: item.quantity - 1 };\r\n      }\r\n    }\r\n    return item;\r\n  });\r\n  newItems = newItems.filter((item) => item !== null);\r\n  return { items: newItems };\r\n};\r\n\r\nexport { addBasketItem, removeBasketItem, calcTotalPrice };\r\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    display: \"flex\",\n    color: theme.palette.text.secondary,\n    background: \"#eeeeee\",\n    height: \"75vh\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n}));\n\nexport default function VideoChat({ items }) {\n  const classes = useStyles();\n  return (\n    <Paper className={classes.paper}>\n      <AccountCircleIcon />\n    </Paper>\n  );\n}\n","export const GET_PRODUCTS = \"product/GET_PRODUCTS\";\r\n","import * as types from \"./types\";\r\n\r\nconst initialState = {\r\n  products: [],\r\n};\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case `${types.GET_PRODUCTS}_SUCCESS`:\r\n      return {\r\n        ...state,\r\n        products: action.response,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import authHeader from '../../../utils/authHeader';\r\nimport * as types from './types';\r\n\r\nconst baseUrl = '/product';\r\n\r\nexport const getProducts = (query, retailer, limit) => (dispatch, getState) => {\r\n  let searchParams = {};\r\n  if (query) {\r\n    searchParams.query = query;\r\n  }\r\n  if (retailer) {\r\n    searchParams.retailer = retailer;\r\n  }\r\n  if (limit) {\r\n    searchParams.limit = limit;\r\n  }\r\n  dispatch({\r\n    type: 'API',\r\n    name: types.GET_PRODUCTS,\r\n    url: baseUrl,\r\n    requestData: {\r\n      method: 'GET',\r\n      headers: authHeader(getState()),\r\n      params: searchParams,\r\n    },\r\n  });\r\n};\r\n\r\nexport const clearErrors = () => (dispatch) => {\r\n  dispatch({\r\n    type: `${types.GET_PRODUCTS}_CLEARERR`,\r\n  });\r\n};\r\n","import reducer from \"./reducer\";\r\nimport * as actions from \"./actions\";\r\nimport * as types from \"./types\";\r\n\r\nexport { actions, types };\r\nexport default reducer;\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport CardMedia from \"@material-ui/core/CardMedia\";\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport PlaceholderImage from \"../assets/images/placeholder_image.png\";\r\nimport { connect } from \"react-redux\";\r\nimport { actions as productActions } from \"../store/api/product\";\r\nimport { actions as basketActions } from \"../store/api/basket\";\r\nimport { addBasketItem } from \"../utils/basketUtils\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: \"29vh\",\r\n    overflowY: \"scroll\",\r\n  },\r\n  tooltip: {\r\n    backgroundColor: \"#f5f5f9\",\r\n    color: \"rgba(0, 0, 0, 0.87)\",\r\n    maxWidth: 300,\r\n    border: \"1px solid #dadde9\",\r\n  },\r\n  card: {\r\n    display: \"flex\",\r\n  },\r\n  details: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n  },\r\n  content: {\r\n    flex: \"1 0 auto\",\r\n  },\r\n  buttons: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    paddingLeft: theme.spacing(1),\r\n    paddingBottom: theme.spacing(1),\r\n  },\r\n  media: {\r\n    width: 80,\r\n  },\r\n  productText: {\r\n    fontWeight: \"bold\",\r\n    fontSize: \"13px\",\r\n  },\r\n  smallText: {\r\n    fontSize: \"12px\",\r\n  },\r\n  mb: {\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nfunction ProductCatalog({\r\n  searchQuery,\r\n  retailer,\r\n  limit,\r\n  tableView,\r\n  products,\r\n  shopperId,\r\n  dispatchGetProducts,\r\n  dispatchUpdateBasket,\r\n  basket,\r\n}) {\r\n  const classes = useStyles();\r\n\r\n  React.useEffect(() => {\r\n    dispatchGetProducts(searchQuery, retailer, limit);\r\n  }, [dispatchGetProducts, limit, retailer, searchQuery]);\r\n\r\n  const addToBasket = (product) => {\r\n    const newBasket = addBasketItem(product, basket);\r\n    dispatchUpdateBasket(shopperId, newBasket);\r\n  };\r\n\r\n  return tableView ? (\r\n    <TableContainer className={classes.root}>\r\n      <Table size=\"small\" aria-label=\"product catalog table\">\r\n        <TableBody>\r\n          {products.map((product) => (\r\n            <TableRow key={product.productId}>\r\n              <Tooltip\r\n                title={<img alt=\"product\" className={classes.media} src={PlaceholderImage} />}\r\n              >\r\n                <TableCell component=\"th\" scope=\"row\">\r\n                  {product.name}\r\n                </TableCell>\r\n              </Tooltip>\r\n              <TableCell align=\"right\">£ {product.price.toFixed(2)}</TableCell>\r\n              <TableCell align=\"right\">\r\n                <Button\r\n                  variant=\"contained\"\r\n                  size=\"small\"\r\n                  color=\"primary\"\r\n                  onClick={() => addToBasket(product)}\r\n                >\r\n                  Add to basket\r\n                </Button>\r\n              </TableCell>\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n  ) : (\r\n    <Grid container spacing={2} className={classes.root}>\r\n      {products.map((product) => (\r\n        <Grid item md={4} key={product.productId}>\r\n          <Card className={classes.card}>\r\n            <div className={classes.details}>\r\n              <CardContent className={classes.content}>\r\n                <Typography className={classes.productText} gutterBottom variant=\"subtitle2\">\r\n                  {product.name}\r\n                </Typography>\r\n                <Typography\r\n                  className={classes.smallText}\r\n                  display=\"inline\"\r\n                  variant=\"body2\"\r\n                  color=\"textSecondary\"\r\n                  component=\"p\"\r\n                >\r\n                  Price:{\" \"}\r\n                </Typography>\r\n                <Typography\r\n                  className={classes.smallText}\r\n                  display=\"inline\"\r\n                  variant=\"body2\"\r\n                  color=\"primary\"\r\n                  component=\"p\"\r\n                >\r\n                  £ {product.price.toFixed(2)}\r\n                </Typography>\r\n                <br />\r\n                <Typography\r\n                  className={classes.smallText}\r\n                  display=\"inline\"\r\n                  variant=\"body2\"\r\n                  color=\"textSecondary\"\r\n                  component=\"p\"\r\n                >\r\n                  Retailer:{\" \"}\r\n                </Typography>\r\n                <Typography\r\n                  className={classes.smallText}\r\n                  display=\"inline\"\r\n                  variant=\"body2\"\r\n                  color=\"primary\"\r\n                  component=\"p\"\r\n                >\r\n                  {product.retailer}\r\n                </Typography>\r\n              </CardContent>\r\n              <div className={classes.buttons}>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  size=\"small\"\r\n                  color=\"primary\"\r\n                  onClick={() => addToBasket(product)}\r\n                >\r\n                  Add to basket\r\n                </Button>\r\n              </div>\r\n            </div>\r\n            <CardMedia className={classes.media} image={PlaceholderImage} />\r\n          </Card>\r\n        </Grid>\r\n      ))}\r\n    </Grid>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  products: state.product.products,\r\n  basket: state.basket,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  dispatchGetProducts: (query, retailer, limit) =>\r\n    dispatch(productActions.getProducts(query, retailer, limit)),\r\n  dispatchUpdateBasket: (shopperId, basketData) =>\r\n    dispatch(basketActions.updateBasket(shopperId, basketData)),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductCatalog);\r\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport SearchIcon from \"@material-ui/icons/Search\";\n\nconst useStyles = makeStyles((theme) => ({\n  mb: {\n    marginBottom: theme.spacing(2),\n  },\n}));\n\nexport default function ProductSearchBox({ value, onChange }) {\n  const classes = useStyles();\n  return (\n    <TextField\n      className={classes.mb}\n      id=\"search\"\n      label=\"Search for a product\"\n      fullWidth\n      value={value}\n      onChange={onChange}\n      InputProps={{\n        startAdornment: (\n          <InputAdornment position=\"start\">\n            <SearchIcon />\n          </InputAdornment>\n        ),\n      }}\n    />\n  );\n}\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Basket from \"../../components/Basket\";\r\nimport VideoChat from \"../../components/VideoChat\";\r\nimport ProductCatalog from \"../../components/ProductCatalog\";\r\nimport ProductSearchBox from \"../../components/ProductSearchBox\";\r\nimport mockRetailers from \"../../store/mock/MockRetailers.json\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    paddingTop: theme.spacing(2),\r\n    paddingBottom: theme.spacing(2),\r\n  },\r\n  media: {\r\n    height: 0,\r\n    paddingTop: \"56.25%\", // 16:9\r\n  },\r\n  mr: {\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  mt: {\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  divider: {\r\n    marginTop: theme.spacing(2),\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport default function CashierPage() {\r\n  const classes = useStyles();\r\n  const [searchQuery, setSearchQuery] = React.useState(\"\");\r\n  const mockRetailer = mockRetailers[0].name;\r\n  const mockConnectedShopperId = 0;\r\n\r\n  return (\r\n    <Container maxWidth=\"xl\" className={classes.root}>\r\n      <Grid container spacing={3}>\r\n        <Grid item md={6}>\r\n          <Typography variant=\"subtitle1\" display=\"inline\" className={classes.mr}>\r\n            Video Call\r\n          </Typography>\r\n          <Typography variant=\"subtitle2\" display=\"inline\">\r\n            {\" \"}\r\n            Customer Name\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <Grid container spacing={3}>\r\n            <Grid item xs={12}>\r\n              <Typography variant=\"subtitle1\">Product Catalogue</Typography>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n      <Grid container spacing={3}>\r\n        <Grid item md={6}>\r\n          <VideoChat />\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <Grid container spacing={3}>\r\n            <Grid item xs={12}>\r\n              <ProductSearchBox\r\n                value={searchQuery}\r\n                onChange={(e) => {\r\n                  setSearchQuery(e.target.value);\r\n                }}\r\n              />\r\n              <ProductCatalog\r\n                tableView\r\n                retailer={mockRetailer}\r\n                searchQuery={searchQuery}\r\n                shopperId={mockConnectedShopperId}\r\n              />\r\n              <hr className={classes.mt} />\r\n              <Typography variant=\"subtitle1\">Customer Basket</Typography>\r\n              <Basket shopperId={mockConnectedShopperId} />\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n    </Container>\r\n  );\r\n}\r\n","import React from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\nimport mockRetailers from \"../store/mock/MockRetailers.json\";\n\nexport default function RetailerSelect({ value, onChange }) {\n  const retailers = mockRetailers.map((mockRetailer) => mockRetailer.name);\n\n  return (\n    <Autocomplete\n      id=\"retailers\"\n      fullWidth\n      disableClearable\n      options={retailers}\n      value={value}\n      onChange={onChange}\n      renderInput={(params) => <TextField {...params} label=\"Retailer\" />}\n    />\n  );\n}\n","export const GET_SPEECH_TO_TEXT_TOKEN = 'tokens/GET_SPEECH_TO_TEXT_TOKEN';\nexport const GET_TEXT_TO_SPEECH_TOKEN = 'tokens/GET_TEXT_TO_SPEECH_TOKEN';\nexport const GET_ASSISTANT_TOKEN = 'tokens/GET_ASSISTANT_TOKEN';\n","import * as types from './types';\n\nconst initialState = {\n  speechToTextToken: null,\n  speechToTextUrl: null,\n  textToSpeechToken: null,\n  textToSpeechUrl: null,\n  assistantToken: null,\n  assistantUrl: null,\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case `${types.GET_SPEECH_TO_TEXT_TOKEN}_SUCCESS`:\n      return {\n        ...state,\n        speechToTextToken: action.response.accessToken,\n        speechToTextUrl: action.response.url,\n      };\n    case `${types.GET_TEXT_TO_SPEECH_TOKEN}_SUCCESS`:\n      return {\n        ...state,\n        textToSpeechToken: action.response.accessToken,\n        textToSpeechUrl: action.response.url,\n      };\n    case `${types.GET_ASSISTANT_TOKEN}_SUCCESS`:\n      return {\n        ...state,\n        assistantToken: action.response.accessToken,\n        assistantUrl: action.response.url,\n      };\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","import * as types from './types';\n\nconst baseUrl = '/tokens';\n\nexport const getSpeechToTextToken = () => (dispatch) => {\n  dispatch({\n    type: 'API',\n    name: types.GET_SPEECH_TO_TEXT_TOKEN,\n    url: `${baseUrl}/speech-to-text`,\n    requestData: {\n      method: 'GET',\n    },\n  });\n};\n\nexport const getTextToSpeechToken = () => (dispatch) => {\n  dispatch({\n    type: 'API',\n    name: types.GET_TEXT_TO_SPEECH_TOKEN,\n    url: `${baseUrl}/text-to-speech`,\n    requestData: {\n      method: 'GET',\n    },\n  });\n};\n\nexport const getAssistantToken = () => (dispatch) => {\n  dispatch({\n    type: 'API',\n    name: types.GET_ASSISTANT_TOKEN,\n    url: `${baseUrl}/assistant`,\n    requestData: {\n      method: 'GET',\n    },\n  });\n};\n","import reducer from \"./reducer\";\nimport * as actions from \"./actions\";\nimport * as types from \"./types\";\n\nexport { actions, types };\nexport default reducer;\n","import recognizeMic from 'watson-speech/speech-to-text/recognize-microphone';\r\nimport synthesize from 'watson-speech/text-to-speech/synthesize';\r\n\r\n//audio/wav is supported in Chrome, Edge, Firefox (v3.5), Opera (v11.00), Safari (v3.1)\r\n//audio/mp3 is supported in Chrome, IE9, Edge, Firefox (v71), Opera, Safari (v3.1)\r\n//ref: https://en.wikipedia.org/wiki/HTML5_audio\r\n\r\nexport const getSupportedAudioFormat = (audioElement) => {\r\n  if (!audioElement) {\r\n    audioElement = document.createElement('audio');\r\n  }\r\n\r\n  let accept =\r\n    audioElement &&\r\n    audioElement.canPlayType === 'function' &&\r\n    audioElement.canPlayType('audio/mp3') !== ''\r\n      ? 'audio/mp3'\r\n      : 'audio/wav';\r\n\r\n  return accept;\r\n};\r\n\r\nexport const captureAudioFromMicrophone = async (\r\n  speechToTextUrl,\r\n  speechToTextToken\r\n) => {\r\n  let mediaStream = null;\r\n  try {\r\n    mediaStream = await navigator.mediaDevices.getUserMedia({\r\n      video: false,\r\n      audio: true,\r\n    });\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n\r\n  const recognizeMicrophoneStream = recognizeMic({\r\n    url: speechToTextUrl,\r\n    accessToken: speechToTextToken,\r\n    objectMode: true,\r\n    extractResults: true,\r\n    format: true,\r\n    mediaStream,\r\n    keepMicrophone: true,\r\n  });\r\n\r\n  return recognizeMicrophoneStream;\r\n};\r\n\r\nexport const textToSpeech = async (\r\n  textToSpeechUrl,\r\n  textToSpeechToken,\r\n  text,\r\n  voice,\r\n  accept,\r\n  element\r\n) => {\r\n  return synthesize({\r\n    url: textToSpeechUrl,\r\n    accessToken: textToSpeechToken,\r\n    text,\r\n    voice,\r\n    accept,\r\n    element,\r\n  });\r\n};\r\n\r\nexport const createAssistantSession = async (assistantUrl, assistantToken) => {\r\n  let session;\r\n  try {\r\n    const res = await fetch(`${assistantUrl}/sessions?version=2020-04-01`, {\r\n      method: 'post',\r\n      headers: new Headers({\r\n        Authorization: 'Bearer ' + assistantToken,\r\n        'Content-Type': 'application/json',\r\n      }),\r\n    });\r\n    session = await res.json();\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n  return session ? session.session_id : null;\r\n};\r\n\r\nexport const messageAssistant = async (\r\n  assistantUrl,\r\n  assistantToken,\r\n  sessionId,\r\n  message\r\n) => {\r\n  let res;\r\n  try {\r\n    res = await fetch(\r\n      `${assistantUrl}/sessions/${sessionId}/message?version=2020-04-01`,\r\n      {\r\n        method: 'post',\r\n        headers: new Headers({\r\n          Authorization: 'Bearer ' + assistantToken,\r\n          Accept: 'application/json',\r\n          'Content-Type': 'application/json',\r\n        }),\r\n        body: JSON.stringify({ input: { text: message } }),\r\n      }\r\n    );\r\n    res = await res.json();\r\n    console.log(res);\r\n    res =\r\n      '<speak version=\"1.0\"><prosody rate=\"+15%\">' +\r\n      res.output.generic\r\n        .map((obj) => obj.text)\r\n        .join(' <break strength=\"medium\"></break>') +\r\n      '</prosody></speak>';\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n  return res;\r\n};\r\n\r\nexport const stripSSMLTags = (str) => {\r\n  const regex = /(<([^>]+)>)/gi;\r\n  try {\r\n    str = str.replace(regex, '');\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n  return str;\r\n};\r\n","export default __webpack_public_path__ + \"static/media/Avatar.11cc0c5e.glb\";","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport StopIcon from '@material-ui/icons/StopOutlined';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MicRoundedIcon from '@material-ui/icons/MicRounded';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { connect } from 'react-redux';\r\nimport { actions } from '../store/api/tokens';\r\nimport {\r\n  getSupportedAudioFormat,\r\n  captureAudioFromMicrophone,\r\n  textToSpeech,\r\n  createAssistantSession,\r\n  messageAssistant,\r\n  stripSSMLTags,\r\n} from '../utils/speechUtils';\r\nimport AvatarModel from '../assets/models/Avatar.glb';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    display: 'flex',\r\n    color: theme.palette.text.secondary,\r\n    background: '#eeeeee',\r\n    height: '75vh',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  inner: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  bold: {\r\n    fontWeight: 'bold',\r\n  },\r\n}));\r\n\r\nfunction ArtificialCashier({\r\n  speechToTextToken,\r\n  speechToTextUrl,\r\n  textToSpeechToken,\r\n  textToSpeechUrl,\r\n  assistantToken,\r\n  assistantUrl,\r\n  dispatchGetSpeechToTextToken,\r\n  dispatchGetTextToSpeechToken,\r\n  dispatchGetAssistantToken,\r\n}) {\r\n  const classes = useStyles();\r\n  const [loaded, setLoaded] = React.useState(false);\r\n  const [listening, setListening] = React.useState(false);\r\n  const [stream, setStream] = React.useState(null);\r\n  const [speechText, setSpeechText] = React.useState('');\r\n  const [responseText, setResponseText] = React.useState('');\r\n  const [assistantSessionId, setAssistantSessionId] = React.useState(null);\r\n  const audioRef = React.useRef(null);\r\n\r\n  const testVoices = [\r\n    'en-GB_JamesV3Voice',\r\n    'en-GB_KateV3Voice',\r\n    'en-GB_CharlotteV3Voice',\r\n  ];\r\n  //ref: https://cloud.ibm.com/docs/text-to-speech?topic=text-to-speech-voices\r\n\r\n  React.useEffect(() => {\r\n    if (!speechToTextToken || !speechToTextUrl) {\r\n      dispatchGetSpeechToTextToken();\r\n    }\r\n    if (!textToSpeechToken || !textToSpeechUrl) {\r\n      dispatchGetTextToSpeechToken();\r\n    }\r\n    if (!assistantToken || !assistantUrl) {\r\n      dispatchGetAssistantToken();\r\n    }\r\n  }, [\r\n    dispatchGetSpeechToTextToken,\r\n    dispatchGetTextToSpeechToken,\r\n    dispatchGetAssistantToken,\r\n    speechToTextToken,\r\n    speechToTextUrl,\r\n    textToSpeechToken,\r\n    textToSpeechUrl,\r\n    assistantToken,\r\n    assistantUrl,\r\n  ]);\r\n\r\n  React.useEffect(() => {\r\n    async function createSession() {\r\n      const instanceId = await createAssistantSession(\r\n        assistantUrl,\r\n        assistantToken\r\n      );\r\n      setAssistantSessionId(instanceId);\r\n      setLoaded(true);\r\n      console.log('Done loading tokens from API.');\r\n      console.log('Created assistant session: ' + instanceId);\r\n    }\r\n\r\n    if (!!assistantToken && !!assistantUrl && !assistantSessionId) {\r\n      createSession();\r\n    }\r\n  }, [assistantToken, assistantUrl, assistantSessionId]);\r\n\r\n  const startListening = async () => {\r\n    stopAudio();\r\n    setListening(true);\r\n    const stream = await captureAudioFromMicrophone(\r\n      speechToTextUrl,\r\n      speechToTextToken\r\n    );\r\n    stream.on('data', async (data) => {\r\n      if (data && data.final) {\r\n        const speechText = data.alternatives[0].transcript;\r\n        setSpeechText(speechText);\r\n        setListening(false);\r\n\r\n        const res = await messageAssistant(\r\n          assistantUrl,\r\n          assistantToken,\r\n          assistantSessionId,\r\n          speechText\r\n        );\r\n        if (res) {\r\n          await synthesizeTextToSpeech(res);\r\n        }\r\n      }\r\n    });\r\n    stream.on('error', function (err) {\r\n      console.log(err);\r\n      setListening(false);\r\n    });\r\n    stream.on('end', function () {\r\n      console.log('stream ended');\r\n      setListening(false);\r\n    });\r\n    setStream(stream);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (!listening && stream !== null) {\r\n      stream.stop();\r\n      setStream(null);\r\n    }\r\n  }, [listening, stream]);\r\n\r\n  const synthesizeTextToSpeech = async (text, voice) => {\r\n    if (!voice) voice = testVoices[0];\r\n    try {\r\n      const accept = getSupportedAudioFormat(audioRef);\r\n      const audio = textToSpeech(\r\n        textToSpeechUrl,\r\n        textToSpeechToken,\r\n        text,\r\n        voice,\r\n        accept,\r\n        audioRef.current\r\n      );\r\n      audio.play();\r\n      audio.addEventListener('playing', () => {\r\n        console.log('AUDIO PLAYING!');\r\n        setResponseText(stripSSMLTags(text));\r\n      });\r\n      audio.addEventListener('ended', () => {\r\n        console.log('AUDIO STOPPED PLAYING!');\r\n        setResponseText('');\r\n      });\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const stopAudio = () => {\r\n    setResponseText('');\r\n    audioRef.current.pause();\r\n    audioRef.current.currentTime = 0;\r\n  };\r\n\r\n  const ListenButton = listening ? (\r\n    <IconButton\r\n      color='secondary'\r\n      aria-label='stop'\r\n      onClick={() => setListening(false)}\r\n    >\r\n      <StopIcon fontSize='large' />\r\n    </IconButton>\r\n  ) : (\r\n    <IconButton color='primary' aria-label='speak' onClick={startListening}>\r\n      <MicRoundedIcon fontSize='large' />\r\n    </IconButton>\r\n  );\r\n\r\n  return (\r\n    <Paper className={classes.paper}>\r\n      <audio ref={audioRef}>\r\n        Your browser does not support the <code>audio</code> element.\r\n      </audio>\r\n      <div className={classes.inner}>\r\n        {speechText && (\r\n          <Typography variant='h6'>\r\n            <span className={classes.bold}>Speech:</span> {speechText}\r\n          </Typography>\r\n        )}\r\n        {responseText && (\r\n          <Typography variant='h6'>\r\n            <span className={classes.bold}>Response:</span> {responseText}\r\n          </Typography>\r\n        )}\r\n        {loaded ? (\r\n          <React.Fragment>\r\n            <model-viewer\r\n              autoplay\r\n              animation-name={responseText ? 'Talking' : 'Idle'}\r\n              src={AvatarModel}\r\n              background-color='#455A64'\r\n              style={{ height: '450px', width: '450px' }}\r\n            ></model-viewer>\r\n            <br />\r\n            <Typography variant='subtitle2'>\r\n              {listening\r\n                ? 'Listening...'\r\n                : 'Press the mic icon and start speaking'}\r\n            </Typography>\r\n            {ListenButton}\r\n          </React.Fragment>\r\n        ) : (\r\n          <React.Fragment>\r\n            <Typography variant='subtitle2' gutterBottom>\r\n              Loading... Please wait\r\n            </Typography>\r\n            <CircularProgress size={30} />\r\n          </React.Fragment>\r\n        )}\r\n      </div>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  speechToTextToken: state.tokens.speechToTextToken,\r\n  speechToTextUrl: state.tokens.speechToTextUrl,\r\n  textToSpeechToken: state.tokens.textToSpeechToken,\r\n  textToSpeechUrl: state.tokens.textToSpeechUrl,\r\n  assistantToken: state.tokens.assistantToken,\r\n  assistantUrl: state.tokens.assistantUrl,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  dispatchGetSpeechToTextToken: () => dispatch(actions.getSpeechToTextToken()),\r\n  dispatchGetTextToSpeechToken: () => dispatch(actions.getTextToSpeechToken()),\r\n  dispatchGetAssistantToken: () => dispatch(actions.getAssistantToken()),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ArtificialCashier);\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport ProductCatalog from \"../../components/ProductCatalog\";\r\nimport ProductSearchBox from \"../../components/ProductSearchBox\";\r\nimport RetailerSelect from \"../../components/RetailerSelect\";\r\nimport ArtificialCashier from \"../../components/ArtificialCashier\";\r\nimport Basket from \"../../components/Basket\";\r\nimport mockRetailers from \"../../store/mock/MockRetailers.json\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    paddingTop: theme.spacing(2),\r\n    paddingBottom: theme.spacing(2),\r\n  },\r\n  mt: {\r\n    marginTop: theme.spacing(3),\r\n  },\r\n}));\r\n\r\nfunction ShopperPage({ authUser }) {\r\n  const classes = useStyles();\r\n  const [searchQuery, setSearchQuery] = React.useState(\"\");\r\n  const [retailer, setRetailer] = React.useState(mockRetailers[0].name);\r\n\r\n  return (\r\n    <Container maxWidth=\"xl\" className={classes.root}>\r\n      <Grid container spacing={3}>\r\n        <Grid item md={6}>\r\n          <Typography variant=\"subtitle1\">Artificial Cashier</Typography>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <Typography variant=\"subtitle1\">Product Catalogue</Typography>\r\n        </Grid>\r\n      </Grid>\r\n      <Grid container spacing={3}>\r\n        <Grid item md={6}>\r\n          <ArtificialCashier />\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <Grid container spacing={3}>\r\n            <Grid item xs={6}>\r\n              <ProductSearchBox\r\n                value={searchQuery}\r\n                onChange={(e) => {\r\n                  setSearchQuery(e.target.value);\r\n                }}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <RetailerSelect\r\n                value={retailer}\r\n                onChange={(event, newValue) => {\r\n                  setRetailer(newValue);\r\n                }}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n          <ProductCatalog\r\n            retailer={retailer}\r\n            searchQuery={searchQuery}\r\n            limit={9}\r\n            shopperId={authUser.userId}\r\n          />\r\n          <hr className={classes.mt} />\r\n          <Typography variant=\"subtitle1\">Shopping Basket</Typography>\r\n          <Basket shopperId={authUser.userId} />\r\n        </Grid>\r\n      </Grid>\r\n    </Container>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  authUser: state.auth.user,\r\n});\r\n\r\nexport default connect(mapStateToProps, null)(ShopperPage);\r\n","const prod = {\r\n  // API_URL: 'https://api.nextgenshop.co.uk',\r\n  API_URL: 'https://nextgenshop.pythonanywhere.com',\r\n};\r\n\r\nconst dev = {\r\n  API_URL: 'http://127.0.0.1:8000',\r\n};\r\n\r\nconst shared = {\r\n  ENV: process.env.NODE_ENV,\r\n  HOME_URL: 'https://www.nextgenshop.github.io/nextgenshop-frontend',\r\n  APP_NAME: 'NextGenShop',\r\n};\r\n\r\nconst config =\r\n  process.env.NODE_ENV === 'development'\r\n    ? { ...dev, ...shared }\r\n    : { ...prod, ...shared };\r\n\r\nexport default config;\r\n","export const GET_USER = \"auth/GET_USER\";\nexport const LOGIN = \"auth/LOGIN\";\nexport const LOGOUT = \"auth/LOGOUT\";\nexport const REGISTER = \"auth/REGISTER\";\n","import * as types from \"./types\";\n\nconst initialState = {\n  token: localStorage.getItem(\"token\"),\n  isAuthenticated: false,\n  user: null,\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case `${types.GET_USER}_SUCCESS`:\n      return {\n        ...state,\n        isAuthenticated: true,\n        user: action.response,\n      };\n\n    case `${types.LOGOUT}_SUCCESS`:\n    case `${types.GET_USER}_FAILURE`:\n      localStorage.removeItem(\"token\");\n      return { ...initialState, token: null };\n\n    case `${types.REGISTER}_SUCCESS`:\n    case `${types.LOGIN}_SUCCESS`:\n      localStorage.setItem(\"token\", action.response.token);\n      return {\n        ...state,\n        user: action.response.user,\n        token: action.response.token,\n        isAuthenticated: true,\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","import authHeader from '../../../utils/authHeader';\nimport * as types from './types';\n\nconst baseUrl = '/auth';\n\nexport const getUser = () => (dispatch, getState) => {\n  dispatch({\n    type: 'API',\n    name: types.GET_USER,\n    url: `${baseUrl}/user/`,\n    requestData: {\n      method: 'GET',\n      headers: authHeader(getState()),\n    },\n  });\n};\n\nexport const login = (data) => (dispatch) => {\n  dispatch({\n    type: 'API',\n    name: types.LOGIN,\n    url: `${baseUrl}/login/`,\n    requestData: {\n      method: 'POST',\n      data,\n    },\n  });\n};\n\nexport const logout = () => async (dispatch, getState) => {\n  dispatch({\n    type: 'API',\n    name: types.LOGOUT,\n    url: `${baseUrl}/logout/`,\n    requestData: {\n      method: 'GET',\n      headers: authHeader(getState()),\n    },\n  });\n};\n\nexport const register = (data) => (dispatch) => {\n  dispatch({\n    type: 'API',\n    name: types.REGISTER,\n    url: `${baseUrl}/register/`,\n    requestData: {\n      method: 'POST',\n      data,\n    },\n  });\n};\n\nexport const clearErrors = () => (dispatch) => {\n  dispatch({\n    type: `${types.LOGIN}_CLEARERR`,\n  });\n  dispatch({\n    type: `${types.REGISTER}_CLEARERR`,\n  });\n};\n","import reducer from \"./reducer\";\nimport * as actions from \"./actions\";\nimport * as types from \"./types\";\n\nexport { actions, types };\nexport default reducer;\n","import { toastr } from \"react-redux-toastr\";\n\nlet options = {\n  timeOut: 5000,\n  showCloseButton: true,\n  progressBar: false,\n  transitionIn: \"fadeIn\",\n  transitionOut: \"fadeOut\",\n};\n\nexport const displayToast = (title, msg, type, callbackClear) => {\n  const toastrInstance =\n    type === \"info\"\n      ? toastr.info\n      : type === \"warning\"\n      ? toastr.warning\n      : type === \"danger\"\n      ? toastr.error\n      : toastr.success;\n  if (callbackClear) options.onShowComplete = callbackClear;\n  toastrInstance(title, msg, options);\n};\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport { Link } from \"react-router-dom\";\nimport config from \"../config\";\nimport { connect } from \"react-redux\";\nimport { actions } from \"../store/api/auth\";\nimport { displayToast } from \"../utils/displayToast\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  title: {\n    flexGrow: 1,\n  },\n}));\n\nfunction Navbar({ auth, dispatchLogout }) {\n  const classes = useStyles();\n\n  const handleLogout = () => {\n    dispatchLogout();\n    displayToast(\"\", \"You have been logged out!\", \"info\");\n  };\n\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"sticky\">\n        <Toolbar>\n          <Typography variant=\"h6\" className={classes.title}>\n            {config.APP_NAME}\n          </Typography>\n          {auth && auth.isAuthenticated ? (\n            <Button color=\"inherit\" onClick={handleLogout}>\n              Logout\n            </Button>\n          ) : (\n            <React.Fragment>\n              <Button color=\"inherit\" component={Link} to=\"/login\">\n                Login\n              </Button>\n              <Button color=\"inherit\" component={Link} to=\"/register\">\n                Register\n              </Button>\n            </React.Fragment>\n          )}\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  auth: state.auth,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  dispatchLogout: () => dispatch(actions.logout()),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Navbar);\n","import React from \"react\";\nimport CashierMain from \"./cashier/CashierPage\";\nimport ShopperMain from \"./shopper/ShopperPage\";\nimport Navbar from \"../components/Navbar\";\nimport { Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\n\nfunction Main({ auth }) {\n  if (auth && auth.isAuthenticated && auth.user) {\n    const RenderComponent = auth.user.type === \"cashier\" ? <CashierMain /> : <ShopperMain />;\n    return (\n      <React.Fragment>\n        <Navbar />\n        {RenderComponent}\n      </React.Fragment>\n    );\n  } else {\n    return <Redirect to=\"/login\" />;\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  auth: state.auth,\n});\n\nexport default connect(mapStateToProps, null)(Main);\n","const reducer = (state = {}, action) => {\n  const { type, error } = action;\n  let errorMessage = error;\n  if (Array.isArray(error)) {\n    errorMessage = error[0];\n  }\n  const matches = /(.*)_(REQUEST|FAILURE|CLEARERR)/.exec(type);\n  if (!matches) return state;\n\n  const [, requestName, requestState] = matches;\n  return {\n    ...state,\n    [requestName]: requestState === \"FAILURE\" ? errorMessage : \"\",\n  };\n};\n\nexport default reducer;\n","import reducer from './reducer';\nimport { createErrorSelector } from './selector';\nexport { createErrorSelector };\nexport default reducer;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport Button from \"@material-ui/core/Button\";\nimport { Divider, TextField } from \"@material-ui/core\";\nimport { connect } from \"react-redux\";\nimport { actions, types } from \"../store/api/auth\";\nimport { Redirect } from \"react-router-dom\";\nimport { createErrorSelector } from \"../store/error\";\nimport { displayToast } from \"../utils/displayToast\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(2),\n    height: \"80vh\",\n  },\n  heading: {\n    paddingBottom: theme.spacing(2),\n  },\n  mr: {\n    marginRight: theme.spacing(1),\n  },\n  mt: {\n    marginTop: theme.spacing(1),\n  },\n}));\n\nfunction Login({ auth, error, dispatchLogin, dispatchClearErrors }) {\n  const classes = useStyles();\n\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n\n  React.useEffect(() => {\n    if (error) {\n      displayToast(\"\", error, \"danger\", dispatchClearErrors);\n    }\n  }, [error, dispatchClearErrors]);\n\n  const loginShopper = () => {\n    dispatchLogin({ email: \"mockuser1@gmail.com\", password: \"password\" });\n  };\n\n  const loginCashier = () => {\n    dispatchLogin({ email: \"mockcashieruser@gmail.com\", password: \"password\" });\n  };\n\n  const handleLogin = (e) => {\n    e.preventDefault();\n    if (email.trim() && password) {\n      const data = { email, password };\n      dispatchLogin(data);\n    }\n    setPassword(\"\");\n  };\n\n  return auth.isAuthenticated ? (\n    <Redirect to=\"/\" />\n  ) : (\n    <Container className={classes.root} maxWidth=\"md\">\n      <Typography variant=\"h4\" className={classes.heading}>\n        NextGenShop Login\n      </Typography>\n      <TextField label=\"Email\" value={email} onChange={(e) => setEmail(e.target.value)} />\n      <TextField\n        type=\"password\"\n        label=\"Password\"\n        value={password}\n        onChange={(e) => setPassword(e.target.value)}\n      />\n      <Button className={classes.mt} color=\"primary\" variant=\"contained\" onClick={handleLogin}>\n        Login\n      </Button>\n      <Divider className={classes.mt} />\n      <div className={classes.mt}>\n        <Button className={classes.mr} variant=\"contained\" onClick={loginShopper}>\n          Login as shopper\n        </Button>\n        <Button variant=\"contained\" onClick={loginCashier}>\n          Login as cashier\n        </Button>\n      </div>\n      <Typography className={classes.mt} variant=\"caption\">\n        These buttons are for testing purposes.\n      </Typography>\n    </Container>\n  );\n}\n\nconst errorSelector = createErrorSelector([types.LOGIN]);\n\nconst mapStateToProps = (state) => ({\n  auth: state.auth,\n  error: errorSelector(state),\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  dispatchLogin: (data) => dispatch(actions.login(data)),\n  dispatchClearErrors: () => dispatch(actions.clearErrors()),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\n","import _ from \"lodash\";\n\nexport const createErrorSelector = (actions) => (state) => {\n  return (\n    _(actions)\n      .map((action) => _.get(state, `error.${action}`))\n      .compact()\n      .first() || \"\"\n  );\n};\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport Paper from \"@material-ui/core/Paper\";\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(2),\n  },\n  paper: {\n    display: \"flex\",\n    color: theme.palette.text.secondary,\n    background: \"#eeeeee\",\n    height: \"50vh\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n}));\n\nexport default function CashierVideoQueue() {\n  const classes = useStyles();\n  return (\n    <Container maxWidth=\"lg\">\n      <Typography variant=\"h2\" className={classes.heading}>\n        NextGenShop Cashier\n      </Typography>\n      <Paper className={classes.paper}>Waiting for customer...</Paper>\n    </Container>\n  );\n}\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport Paper from \"@material-ui/core/Paper\";\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(2),\n  },\n  paper: {\n    display: \"flex\",\n    color: theme.palette.text.secondary,\n    background: \"#eeeeee\",\n    height: \"50vh\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n}));\n\nexport default function ShopperVideoQueue() {\n  const classes = useStyles();\n  return (\n    <Container maxWidth=\"lg\">\n      <Typography variant=\"h2\" className={classes.heading}>\n        NextGenShop Cashier\n      </Typography>\n      <Paper className={classes.paper}>Waiting for customer...</Paper>\n    </Container>\n  );\n}\n","import React from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Main from \"./views/Main\";\nimport Login from \"./views/Login\";\nimport CashierVideoQueue from \"./views/cashier/CashierVideoQueue\";\nimport ShopperVideoQueue from \"./views/shopper/ShopperVideoQueue\";\nimport ReduxToastr from \"react-redux-toastr\";\nimport \"react-redux-toastr/lib/css/react-redux-toastr.min.css\";\n\nfunction App() {\n  return (\n    <React.Fragment>\n      <Router basename=\"/nextgenshop-frontend\">\n        <Switch>\n          <Route exact path=\"/\" component={Main} />\n          <Route path=\"/login\" component={Login} />\n          <Route path=\"/shop/queue\" component={CashierVideoQueue} />\n          <Route path=\"/cashier/queue\" component={ShopperVideoQueue} />\n        </Switch>\n      </Router>\n      <ReduxToastr\n        timeOut={5000}\n        newestOnTop={true}\n        position=\"top-center\"\n        transitionIn=\"fadeIn\"\n        transitionOut=\"fadeOut\"\n        progressBar\n        closeOnToastrClick\n        preventDuplicates\n      />\n    </React.Fragment>\n  );\n}\n\nexport default App;\n","import mockUsers from './MockUsers.json';\r\nimport mockProducts from './MockSupermarketDataset.json';\r\nimport { calcTotalPrice } from '../../utils/basketUtils';\r\nimport { types as authTypes } from '../api/auth';\r\nimport { types as productTypes } from '../api/product';\r\nimport { types as basketTypes } from '../api/basket';\r\n\r\nlet mockBasket = localStorage.getItem('basket')\r\n  ? JSON.parse(localStorage.getItem('basket'))\r\n  : {\r\n      basketId: 0,\r\n      items: [],\r\n      totalPrice: 0,\r\n      shopper: 0,\r\n    };\r\n\r\nconst handleRequest = (dispatch, name, req) => {\r\n  let res = {};\r\n  if (name === authTypes.GET_USER) {\r\n    const token = req.headers.authorization.split(' ')[1];\r\n    res = mockUsers.find((user) => user.token === token);\r\n    if (res) {\r\n      dispatch({ type: `${name}_SUCCESS`, response: res });\r\n    } else {\r\n      dispatch({ type: `${name}_FAILURE`, error: 'Invalid token' });\r\n    }\r\n  } else if (name === authTypes.LOGIN) {\r\n    res = mockUsers.find(\r\n      (user) =>\r\n        user.email === req.data.email && user.password === req.data.password\r\n    );\r\n    if (res) {\r\n      dispatch({\r\n        type: `${name}_SUCCESS`,\r\n        response: { user: res, token: res.token },\r\n      });\r\n    } else {\r\n      dispatch({\r\n        type: `${name}_FAILURE`,\r\n        error: 'Incorrect email or password',\r\n      });\r\n    }\r\n  } else if (name === authTypes.LOGOUT) {\r\n    dispatch({ type: `${name}_SUCCESS` });\r\n  } else if (name === productTypes.GET_PRODUCTS) {\r\n    return false;\r\n    // const searchQuery = req.params.query;\r\n    // const searchRetailer = req.params.retailer;\r\n    // const limit = req.params.limit;\r\n    // let products = searchRetailer\r\n    //   ? mockProducts.filter((product) => product.retailer === searchRetailer)\r\n    //   : mockProducts;\r\n    // products = searchQuery\r\n    //   ? products.filter(\r\n    //       (product) =>\r\n    //         product.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n    //         product.productId.toString() === searchQuery\r\n    //     )\r\n    //   : products;\r\n    // if (limit) products = products.slice(0, Math.min(limit, products.length));\r\n    // dispatch({ type: `${name}_SUCCESS`, response: products });\r\n  } else if (name === basketTypes.UPDATE_BASKET) {\r\n    if (req.data.items) {\r\n      mockBasket.items = req.data.items;\r\n    }\r\n    mockBasket.totalPrice = calcTotalPrice(mockBasket.items);\r\n    localStorage.setItem('basket', JSON.stringify(mockBasket));\r\n    dispatch({ type: `${name}_SUCCESS`, response: mockBasket });\r\n  } else if (name === basketTypes.GET_BASKET) {\r\n    dispatch({ type: `${name}_SUCCESS`, response: mockBasket });\r\n  } else if (name === basketTypes.DELETE_BASKET) {\r\n    mockBasket = {\r\n      basketId: 0,\r\n      items: [],\r\n      totalPrice: 0,\r\n      shopper: 0,\r\n    };\r\n    localStorage.setItem('basket', JSON.stringify(mockBasket));\r\n    dispatch({ type: `${name}_SUCCESS`, response: mockBasket });\r\n  } else {\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nexport { handleRequest };\r\n","import axios from 'axios';\r\nimport config from '../config';\r\nimport { handleRequest } from '../store/mock/MockApi';\r\n\r\n// exampleRequest {\r\n//   headers?: any;\r\n//   data?: any;\r\n//   params?: any;\r\n//   url: string;\r\n//   method: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';\r\n// }\r\n\r\nconst apiMiddleware = ({ dispatch }) => (next) => (action) => {\r\n  next(action);\r\n\r\n  if (action.type !== 'API') return;\r\n\r\n  const { name, url, requestData, extraData } = action;\r\n  axios.defaults.baseURL = config.API_URL;\r\n  axios.defaults.headers.common['Content-Type'] = 'application/json';\r\n\r\n  let req = {\r\n    url,\r\n    method: requestData.method,\r\n  };\r\n  if (requestData.headers) {\r\n    req.headers = requestData.headers;\r\n  }\r\n  if (requestData.data) {\r\n    req.data = requestData.data;\r\n  }\r\n  if (requestData.params) {\r\n    req.params = requestData.params;\r\n  }\r\n\r\n  // Use Mock API\r\n  const usedMock = handleRequest(dispatch, name, req);\r\n  if (!usedMock) {\r\n    dispatch({ type: `${name}_REQUEST` });\r\n    axios\r\n      .request(req)\r\n      .then(({ data }) => {\r\n        dispatch({ type: `${name}_SUCCESS`, response: data, extraData });\r\n      })\r\n      .catch((err) => {\r\n        const errorMessage = err.response\r\n          ? err.response.data.error\r\n          : 'An unknown error has occurred';\r\n        dispatch({ type: `${name}_FAILURE`, error: errorMessage });\r\n      });\r\n  }\r\n};\r\n\r\nexport default apiMiddleware;\r\n","import { combineReducers } from 'redux';\r\nimport { reducer as toastr } from 'react-redux-toastr';\r\nimport auth from './api/auth';\r\nimport product from './api/product';\r\nimport basket from './api/basket';\r\nimport tokens from './api/tokens';\r\nimport error from './error';\r\n\r\nconst rootReducer = combineReducers({\r\n  toastr,\r\n  auth,\r\n  product,\r\n  basket,\r\n  tokens,\r\n  error,\r\n});\r\n\r\nexport default rootReducer;\r\n","import thunk from \"redux-thunk\";\nimport { createStore, applyMiddleware, compose } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport apiMiddleware from \"../utils/apiMiddleware\";\nimport config from \"../config\";\nimport rootReducer from \"./rootReducer\";\n\nconst composeEnhancers = config.ENV === \"production\" ? compose : composeWithDevTools;\nconst enhancers = [applyMiddleware(thunk, apiMiddleware)];\nconst store = createStore(rootReducer, composeEnhancers(...enhancers));\n\nexport default store;\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"./store\";\r\nimport \"../src/assets/css/style.css\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}