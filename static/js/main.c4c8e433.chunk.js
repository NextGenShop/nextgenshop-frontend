(this["webpackJsonpnextgenshop-frontend"]=this["webpackJsonpnextgenshop-frontend"]||[]).push([[0],{169:function(e,t,A){},170:function(e,t,A){"use strict";A.r(t);var r={};A.r(r),A.d(r,"GET_BASKET",(function(){return V})),A.d(r,"UPDATE_BASKET",(function(){return w})),A.d(r,"DELETE_BASKET",(function(){return T}));var a={};A.r(a),A.d(a,"updateBasket",(function(){return G})),A.d(a,"getBasket",(function(){return M})),A.d(a,"deleteBasket",(function(){return q})),A.d(a,"clearErrors",(function(){return W}));var n={};A.r(n),A.d(n,"GET_PRODUCTS",(function(){return se}));var c={};A.r(c),A.d(c,"getProducts",(function(){return ue})),A.d(c,"clearErrors",(function(){return de}));var i={};A.r(i),A.d(i,"GET_USER",(function(){return Te})),A.d(i,"LOGIN",(function(){return Ne})),A.d(i,"LOGOUT",(function(){return Le})),A.d(i,"REGISTER",(function(){return De}));var o={};A.r(o),A.d(o,"getUser",(function(){return Fe})),A.d(o,"login",(function(){return Je})),A.d(o,"logout",(function(){return Xe})),A.d(o,"register",(function(){return Ke})),A.d(o,"clearErrors",(function(){return He}));var s=A(0),l=A.n(s),u=A(11),d=A.n(u),p=A(41),m=A(15),h=A(29),j=A(218),g=A(58),b=A(239),f=A(234),O=A(108),x=A.n(O),I=A(220),k=A(222),v=A(223),C=A(225),S=A(224),y=A(245),E=A(226),U="data:image/png;base64,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",R=A(18),B=A(12),V="basket/GET_BASKET",w="basket/UPDATE_BASKET",T="basket/DELETE_BASKET",N={items:[],totalPrice:0,shopper:0};function L(e){var t=e.auth.token;return t?{authorization:"Token ".concat(t)}:null}var D="/api/basket",G=function(e,t){return function(A,r){A({type:"API",name:w,url:"".concat(D,"/").concat(e),requestData:{method:"PUT",headers:L(r()),data:t}})}},M=function(e){return function(t,A){t({type:"API",name:V,url:"".concat(D,"/").concat(e),requestData:{method:"GET",headers:L(A())}})}},q=function(e){return function(t,A){t({type:"API",name:T,url:"".concat(D,"/").concat(e),requestData:{method:"DELETE",headers:L(A())}})}},W=function(){return function(e){e({type:"".concat(w,"_CLEARERR")}),e({type:"".concat(V,"_CLEARERR")}),e({type:"".concat(T,"_CLEARERR")})}},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"".concat(V,"_SUCCESS"):case"".concat(w,"_SUCCESS"):return Object(B.a)(Object(B.a)({},e),{},{items:t.response.items,totalPrice:t.response.totalPrice,shopper:t.response.shopper});case"".concat(T,"_SUCCESS"):return N;default:return e}},Y=A(114),F=A(103),J=A(2),X=Object(j.a)((function(e){return{list:{height:"29vh",overflowY:"scroll"},price:{color:e.palette.primary.dark,fontWeight:600,marginRight:e.spacing(2)},total:{fontWeight:"bold"}}}));var K=Object(R.connect)((function(e){return{basket:e.basket}}),(function(e){return{dispatchGetBasket:function(t){return e(a.getBasket(t))},dispatchUpdateBasket:function(t,A){return e(a.updateBasket(t,A))}}}))((function(e){var t=e.shopperId,A=e.dispatchUpdateBasket,r=e.dispatchGetBasket,a=e.basket,n=X();l.a.useEffect((function(){r()}),[r]);var c=function(e){var r=function(e,t){var A=t.items.map((function(t){return t.product.productId===e?t.quantity<=1?null:Object(B.a)(Object(B.a)({},t),{},{quantity:t.quantity-1}):t}));return{items:A=A.filter((function(e){return null!==e}))}}(e,a);A(t,r)};return Object(J.jsxs)(l.a.Fragment,{children:[Object(J.jsx)(I.a,{className:n.list,children:a&&a.items&&a.items.length>0?a.items.map((function(e){return Object(J.jsxs)(k.a,{children:[Object(J.jsx)(v.a,{children:Object(J.jsx)(y.a,{src:U})}),Object(J.jsx)(S.a,{primary:e.product.name,secondary:"Qty: "+e.quantity}),Object(J.jsxs)(C.a,{children:[Object(J.jsxs)(g.a,{className:n.price,display:"inline",children:["\xa3",(e.product.price*e.quantity).toFixed(2)]}),Object(J.jsx)(E.a,{edge:"end","aria-label":"delete",onClick:function(){return c(e.product.productId)},children:Object(J.jsx)(x.a,{})})]})]},e.product.productId)})):Object(J.jsx)(g.a,{variant:"subtitle2",children:"Your shopping basket is empty."})}),Object(J.jsxs)(g.a,{className:n.total,variant:"h6",component:"div",children:["Total:"," ",Object(J.jsxs)(g.a,{variant:"h6",display:"inline",children:["\xa3 ",a&&a.totalPrice?a.totalPrice.toFixed(2):0]})]})]})})),H=A(116),z=A(66),Q=A.n(z),_=Object(j.a)((function(e){return{paper:{display:"flex",color:e.palette.text.secondary,background:"#eeeeee",height:"75vh",alignItems:"center",justifyContent:"center"}}}));function Z(e){e.items;var t=_();return Object(J.jsx)(H.a,{className:t.paper,children:Object(J.jsx)(Q.a,{})})}var $=A(235),ee=A(237),te=A(236),Ae=A(233),re=A(228),ae=A(229),ne=A(232),ce=A(227),ie=A(230),oe=A(231),se="product/GET_PRODUCTS",le={products:[]},ue=function(e,t,A){return function(r,a){var n={};e&&(n.query=e),t&&(n.retailer=t),A&&(n.limit=A),r({type:"API",name:se,url:"/api/product",requestData:{method:"GET",headers:L(a()),params:n}})}},de=function(){return function(e){e({type:"".concat(se,"_CLEARERR")})}},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"".concat(se,"_SUCCESS"):return Object(B.a)(Object(B.a)({},e),{},{products:t.response});default:return e}},me=Object(j.a)((function(e){return{root:{height:"29vh",overflowY:"scroll"},tooltip:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:300,border:"1px solid #dadde9"},card:{display:"flex"},details:{display:"flex",flexDirection:"column"},content:{flex:"1 0 auto"},buttons:{display:"flex",alignItems:"center",paddingLeft:e.spacing(1),paddingBottom:e.spacing(1)},media:{width:80},productText:{fontWeight:"bold",fontSize:"13px"},smallText:{fontSize:"12px"},mb:{marginBottom:e.spacing(2)}}}));var he=Object(R.connect)((function(e){return{products:e.product.products,basket:e.basket}}),(function(e){return{dispatchGetProducts:function(t,A,r){return e(c.getProducts(t,A,r))},dispatchUpdateBasket:function(t,A){return e(a.updateBasket(t,A))}}}))((function(e){var t=e.searchQuery,A=e.retailer,r=e.limit,a=e.tableView,n=e.products,c=e.shopperId,i=e.dispatchGetProducts,o=e.dispatchUpdateBasket,s=e.basket,u=me();l.a.useEffect((function(){i(t,A,r)}),[i,r,A,t]);var d=function(e){var t=function(e,t){var A=t.items.find((function(t){return t.product.productId===e.productId}));return{items:A?t.items.map((function(e){return e.product.productId===A.product.productId?Object(B.a)(Object(B.a)({},e),{},{quantity:e.quantity+1}):e})):[].concat(Object(Y.a)(t.items),[{product:e,quantity:1}])}}(e,s);o(c,t)};return a?Object(J.jsx)(ce.a,{className:u.root,children:Object(J.jsx)(re.a,{size:"small","aria-label":"product catalog table",children:Object(J.jsx)(ae.a,{children:n.map((function(e){return Object(J.jsxs)(ie.a,{children:[Object(J.jsx)(oe.a,{title:Object(J.jsx)("img",{alt:"product",className:u.media,src:U}),children:Object(J.jsx)(ne.a,{component:"th",scope:"row",children:e.name})}),Object(J.jsxs)(ne.a,{align:"right",children:["\xa3 ",e.price.toFixed(2)]}),Object(J.jsx)(ne.a,{align:"right",children:Object(J.jsx)(Ae.a,{variant:"contained",size:"small",color:"primary",onClick:function(){return d(e)},children:"Add to basket"})})]},e.productId)}))})})}):Object(J.jsx)(f.a,{container:!0,spacing:2,className:u.root,children:n.map((function(e){return Object(J.jsx)(f.a,{item:!0,md:4,children:Object(J.jsxs)($.a,{className:u.card,children:[Object(J.jsxs)("div",{className:u.details,children:[Object(J.jsxs)(te.a,{className:u.content,children:[Object(J.jsx)(g.a,{className:u.productText,gutterBottom:!0,variant:"subtitle2",children:e.name}),Object(J.jsxs)(g.a,{className:u.smallText,display:"inline",variant:"body2",color:"textSecondary",component:"p",children:["Price:"," "]}),Object(J.jsxs)(g.a,{className:u.smallText,display:"inline",variant:"body2",color:"primary",component:"p",children:["\xa3 ",e.price.toFixed(2)]}),Object(J.jsx)("br",{}),Object(J.jsxs)(g.a,{className:u.smallText,display:"inline",variant:"body2",color:"textSecondary",component:"p",children:["Retailer:"," "]}),Object(J.jsx)(g.a,{className:u.smallText,display:"inline",variant:"body2",color:"primary",component:"p",children:e.retailer})]}),Object(J.jsx)("div",{className:u.buttons,children:Object(J.jsx)(Ae.a,{variant:"contained",size:"small",color:"primary",onClick:function(){return d(e)},children:"Add to basket"})})]}),Object(J.jsx)(ee.a,{className:u.media,image:U})]})},e.productId)}))})})),je=A(243),ge=A(238),be=A(110),fe=A.n(be),Oe=Object(j.a)((function(e){return{mb:{marginBottom:e.spacing(2)}}}));function xe(e){var t=e.value,A=e.onChange,r=Oe();return Object(J.jsx)(je.a,{className:r.mb,id:"search",label:"Search for a product",fullWidth:!0,value:t,onChange:A,InputProps:{startAdornment:Object(J.jsx)(ge.a,{position:"start",children:Object(J.jsx)(fe.a,{})})}})}var Ie=A(50),ke=Object(j.a)((function(e){return{root:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},media:{height:0,paddingTop:"56.25%"},mr:{marginRight:e.spacing(1)},mt:{marginTop:e.spacing(3)},divider:{marginTop:e.spacing(2),marginBottom:e.spacing(2)}}}));function ve(){var e=ke(),t=l.a.useState(""),A=Object(h.a)(t,2),r=A[0],a=A[1],n=Ie[0].name;return Object(J.jsxs)(b.a,{maxWidth:"xl",className:e.root,children:[Object(J.jsxs)(f.a,{container:!0,spacing:3,children:[Object(J.jsxs)(f.a,{item:!0,md:6,children:[Object(J.jsx)(g.a,{variant:"subtitle1",display:"inline",className:e.mr,children:"Video Call"}),Object(J.jsxs)(g.a,{variant:"subtitle2",display:"inline",children:[" ","Customer Name"]})]}),Object(J.jsx)(f.a,{item:!0,xs:6,children:Object(J.jsx)(f.a,{container:!0,spacing:3,children:Object(J.jsx)(f.a,{item:!0,xs:12,children:Object(J.jsx)(g.a,{variant:"subtitle1",children:"Product Catalogue"})})})})]}),Object(J.jsxs)(f.a,{container:!0,spacing:3,children:[Object(J.jsx)(f.a,{item:!0,md:6,children:Object(J.jsx)(Z,{})}),Object(J.jsx)(f.a,{item:!0,xs:6,children:Object(J.jsx)(f.a,{container:!0,spacing:3,children:Object(J.jsxs)(f.a,{item:!0,xs:12,children:[Object(J.jsx)(xe,{value:r,onChange:function(e){a(e.target.value)}}),Object(J.jsx)(he,{tableView:!0,retailer:n,searchQuery:r,shopperId:0}),Object(J.jsx)("hr",{className:e.mt}),Object(J.jsx)(g.a,{variant:"subtitle1",children:"Customer Basket"}),Object(J.jsx)(K,{shopperId:0})]})})})]})]})}var Ce=A(244);function Se(e){var t=e.value,A=e.onChange,r=Ie.map((function(e){return e.name}));return Object(J.jsx)(Ce.a,{id:"retailers",fullWidth:!0,disableClearable:!0,options:r,value:t,onChange:A,renderInput:function(e){return Object(J.jsx)(je.a,Object(B.a)(Object(B.a)({},e),{},{label:"Retailer"}))}})}var ye=Object(j.a)((function(e){return{paper:{display:"flex",color:e.palette.text.secondary,background:"#eeeeee",height:"75vh",alignItems:"center",justifyContent:"center"}}}));function Ee(){var e=ye();return Object(J.jsx)(H.a,{className:e.paper,children:Object(J.jsx)(Q.a,{})})}var Ue=Object(j.a)((function(e){return{root:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},mt:{marginTop:e.spacing(3)}}}));var Re=Object(R.connect)((function(e){return{authUser:e.auth.user}}),null)((function(e){var t=e.authUser,A=Ue(),r=l.a.useState(""),a=Object(h.a)(r,2),n=a[0],c=a[1],i=l.a.useState(Ie[0].name),o=Object(h.a)(i,2),s=o[0],u=o[1];return Object(J.jsxs)(b.a,{maxWidth:"xl",className:A.root,children:[Object(J.jsxs)(f.a,{container:!0,spacing:3,children:[Object(J.jsx)(f.a,{item:!0,md:6,children:Object(J.jsx)(g.a,{variant:"subtitle1",children:"Artificial Cashier"})}),Object(J.jsx)(f.a,{item:!0,xs:6,children:Object(J.jsx)(g.a,{variant:"subtitle1",children:"Product Catalogue"})})]}),Object(J.jsxs)(f.a,{container:!0,spacing:3,children:[Object(J.jsx)(f.a,{item:!0,md:6,children:Object(J.jsx)(Ee,{})}),Object(J.jsxs)(f.a,{item:!0,xs:6,children:[Object(J.jsxs)(f.a,{container:!0,spacing:3,children:[Object(J.jsx)(f.a,{item:!0,xs:6,children:Object(J.jsx)(xe,{value:n,onChange:function(e){c(e.target.value)}})}),Object(J.jsx)(f.a,{item:!0,xs:6,children:Object(J.jsx)(Se,{value:s,onChange:function(e,t){u(t)}})})]}),Object(J.jsx)(he,{retailer:s,searchQuery:n,limit:9,shopperId:t.userId}),Object(J.jsx)("hr",{className:A.mt}),Object(J.jsx)(g.a,{variant:"subtitle1",children:"Shopping Basket"}),Object(J.jsx)(K,{shopperId:t.userId})]})]})]})})),Be=A(240),Ve=A(241),we=Object(B.a)(Object(B.a)({},{API_URL:"https://api.nextgenshop.co.uk"}),{ENV:"production",HOME_URL:"https://www.nextgenshop.github.io/nextgenshop-frontend",APP_NAME:"NextGenShop"}),Te="auth/GET_USER",Ne="auth/LOGIN",Le="auth/LOGOUT",De="auth/REGISTER",Ge={token:localStorage.getItem("token"),isAuthenticated:!1,user:null},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"".concat(Te,"_SUCCESS"):return Object(B.a)(Object(B.a)({},e),{},{isAuthenticated:!0,user:t.response});case"".concat(Le,"_SUCCESS"):case"".concat(Te,"_FAILURE"):return localStorage.removeItem("token"),Object(B.a)(Object(B.a)({},Ge),{},{token:null});case"".concat(De,"_SUCCESS"):case"".concat(Ne,"_SUCCESS"):return localStorage.setItem("token",t.response.token),Object(B.a)(Object(B.a)({},e),{},{user:t.response.user,token:t.response.token,isAuthenticated:!0});default:return e}},qe=A(80),We=A.n(qe),Pe=A(111),Ye="/api/auth",Fe=function(){return function(e,t){e({type:"API",name:Te,url:"".concat(Ye,"/user/"),requestData:{method:"GET",headers:L(t())}})}},Je=function(e){return function(t){t({type:"API",name:Ne,url:"".concat(Ye,"/login/"),requestData:{method:"POST",data:e}})}},Xe=function(){return function(){var e=Object(Pe.a)(We.a.mark((function e(t,A){return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"API",name:Le,url:"".concat(Ye,"/logout/"),requestData:{method:"GET",headers:L(A())}});case 1:case"end":return e.stop()}}),e)})));return function(t,A){return e.apply(this,arguments)}}()},Ke=function(e){return function(t){t({type:"API",name:De,url:"".concat(Ye,"/register/"),requestData:{method:"POST",data:e}})}},He=function(){return function(e){e({type:"".concat(Ne,"_CLEARERR")}),e({type:"".concat(De,"_CLEARERR")})}},ze=Me,Qe=A(32),_e=A.n(Qe),Ze={timeOut:5e3,showCloseButton:!0,progressBar:!1,transitionIn:"fadeIn",transitionOut:"fadeOut"},$e=function(e,t,A,r){var a="info"===A?Qe.toastr.info:"warning"===A?Qe.toastr.warning:"danger"===A?Qe.toastr.error:Qe.toastr.success;r&&(Ze.onShowComplete=r),a(e,t,Ze)},et=Object(j.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1}}}));var tt=Object(R.connect)((function(e){return{auth:e.auth}}),(function(e){return{dispatchLogout:function(){return e(o.logout())}}}))((function(e){var t=e.auth,A=e.dispatchLogout,r=et();return Object(J.jsx)("div",{className:r.root,children:Object(J.jsx)(Be.a,{position:"sticky",children:Object(J.jsxs)(Ve.a,{children:[Object(J.jsx)(g.a,{variant:"h6",className:r.title,children:we.APP_NAME}),t&&t.isAuthenticated?Object(J.jsx)(Ae.a,{color:"inherit",onClick:function(){A(),$e("","You have been logged out!","info")},children:"Logout"}):Object(J.jsxs)(l.a.Fragment,{children:[Object(J.jsx)(Ae.a,{color:"inherit",component:p.b,to:"/login",children:"Login"}),Object(J.jsx)(Ae.a,{color:"inherit",component:p.b,to:"/register",children:"Register"})]})]})})})}));var At=Object(R.connect)((function(e){return{auth:e.auth}}),null)((function(e){var t=e.auth;if(t&&t.isAuthenticated&&t.user){var A="cashier"===t.user.type?Object(J.jsx)(ve,{}):Object(J.jsx)(Re,{});return Object(J.jsxs)(l.a.Fragment,{children:[Object(J.jsx)(tt,{}),A]})}return Object(J.jsx)(m.a,{to:"/login"})})),rt=A(242),at=A(63),nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,A=t.type,r=t.error,a=r;Array.isArray(r)&&(a=r[0]);var n=/(.*)_(REQUEST|FAILURE|CLEARERR)/.exec(A);if(!n)return e;var c=Object(h.a)(n,3),i=c[1],o=c[2];return Object(B.a)(Object(B.a)({},e),{},Object(at.a)({},i,"FAILURE"===o?a:""))},ct=A(83),it=A.n(ct),ot=nt,st=Object(j.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingTop:e.spacing(2),paddingBottom:e.spacing(2),height:"80vh"},heading:{paddingBottom:e.spacing(2)},mr:{marginRight:e.spacing(1)},mt:{marginTop:e.spacing(1)}}}));var lt,ut=(lt=[i.LOGIN],function(e){return it()(lt).map((function(t){return it.a.get(e,"error.".concat(t))})).compact().first()||""}),dt=Object(R.connect)((function(e){return{auth:e.auth,error:ut(e)}}),(function(e){return{dispatchLogin:function(t){return e(o.login(t))},dispatchClearErrors:function(){return e(o.clearErrors())}}}))((function(e){var t=e.auth,A=e.error,r=e.dispatchLogin,a=e.dispatchClearErrors,n=st(),c=l.a.useState(""),i=Object(h.a)(c,2),o=i[0],s=i[1],u=l.a.useState(""),d=Object(h.a)(u,2),p=d[0],j=d[1];return l.a.useEffect((function(){A&&$e("",A,"danger",a)}),[A,a]),t.isAuthenticated?Object(J.jsx)(m.a,{to:"/"}):Object(J.jsxs)(b.a,{className:n.root,maxWidth:"md",children:[Object(J.jsx)(g.a,{variant:"h4",className:n.heading,children:"NextGenShop Login"}),Object(J.jsx)(je.a,{label:"Email",value:o,onChange:function(e){return s(e.target.value)}}),Object(J.jsx)(je.a,{type:"password",label:"Password",value:p,onChange:function(e){return j(e.target.value)}}),Object(J.jsx)(Ae.a,{className:n.mt,color:"primary",variant:"contained",onClick:function(e){(e.preventDefault(),o.trim()&&p)&&r({email:o,password:p});j("")},children:"Login"}),Object(J.jsx)(rt.a,{className:n.mt}),Object(J.jsxs)("div",{className:n.mt,children:[Object(J.jsx)(Ae.a,{className:n.mr,variant:"contained",onClick:function(){r({email:"mockuser1@gmail.com",password:"password"})},children:"Login as shopper"}),Object(J.jsx)(Ae.a,{variant:"contained",onClick:function(){r({email:"mockcashieruser@gmail.com",password:"password"})},children:"Login as cashier"})]}),Object(J.jsx)(g.a,{className:n.mt,variant:"caption",children:"These buttons are for testing purposes."})]})})),pt=Object(j.a)((function(e){return{heading:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},paper:{display:"flex",color:e.palette.text.secondary,background:"#eeeeee",height:"50vh",alignItems:"center",justifyContent:"center"}}}));function mt(){var e=pt();return Object(J.jsxs)(b.a,{maxWidth:"lg",children:[Object(J.jsx)(g.a,{variant:"h2",className:e.heading,children:"NextGenShop Cashier"}),Object(J.jsx)(H.a,{className:e.paper,children:"Waiting for customer..."})]})}var ht=Object(j.a)((function(e){return{heading:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},paper:{display:"flex",color:e.palette.text.secondary,background:"#eeeeee",height:"50vh",alignItems:"center",justifyContent:"center"}}}));function jt(){var e=ht();return Object(J.jsxs)(b.a,{maxWidth:"lg",children:[Object(J.jsx)(g.a,{variant:"h2",className:e.heading,children:"NextGenShop Cashier"}),Object(J.jsx)(H.a,{className:e.paper,children:"Waiting for customer..."})]})}A(150);var gt=function(){return Object(J.jsxs)(l.a.Fragment,{children:[Object(J.jsx)(p.a,{basename:"/nextgenshop-frontend",children:Object(J.jsxs)(m.d,{children:[Object(J.jsx)(m.b,{exact:!0,path:"/",component:At}),Object(J.jsx)(m.b,{path:"/login",component:dt}),Object(J.jsx)(m.b,{path:"/shop/queue",component:mt}),Object(J.jsx)(m.b,{path:"/cashier/queue",component:jt})]})}),Object(J.jsx)(_e.a,{timeOut:5e3,newestOnTop:!0,position:"top-center",transitionIn:"fadeIn",transitionOut:"fadeOut",progressBar:!0,closeOnToastrClick:!0,preventDuplicates:!0})]})},bt=A(112),ft=A(31),Ot=A(113),xt=A(68),It=A.n(xt),kt=A(84),vt=A(85),Ct=localStorage.getItem("basket")?JSON.parse(localStorage.getItem("basket")):{basketId:0,items:[],totalPrice:0,shopper:0},St=function(e,t,A){var a={};if(t===i.GET_USER){var c=A.headers.authorization.split(" ")[1];e((a=kt.find((function(e){return e.token===c})))?{type:"".concat(t,"_SUCCESS"),response:a}:{type:"".concat(t,"_FAILURE"),error:"Invalid token"})}else if(t===i.LOGIN)e((a=kt.find((function(e){return e.email===A.data.email&&e.password===A.data.password})))?{type:"".concat(t,"_SUCCESS"),response:{user:a,token:a.token}}:{type:"".concat(t,"_FAILURE"),error:"Incorrect email or password"});else if(t===i.LOGOUT)e({type:"".concat(t,"_SUCCESS")});else if(t===n.GET_PRODUCTS){var o=A.params.query,s=A.params.retailer,l=A.params.limit,u=s?vt.filter((function(e){return e.retailer===s})):vt;u=o?u.filter((function(e){return e.name.toLowerCase().includes(o.toLowerCase())||e.productId.toString()===o})):u,l&&(u=u.slice(0,Math.min(l,u.length))),e({type:"".concat(t,"_SUCCESS"),response:u})}else t===r.UPDATE_BASKET?(A.data.items&&(Ct.items=A.data.items),Ct.totalPrice=function(e){var t,A=0,r=Object(F.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;A+=a.product.price*a.quantity}}catch(n){r.e(n)}finally{r.f()}return A}(Ct.items),localStorage.setItem("basket",JSON.stringify(Ct)),e({type:"".concat(t,"_SUCCESS"),response:Ct})):t===r.GET_BASKET?e({type:"".concat(t,"_SUCCESS"),response:Ct}):t===r.DELETE_BASKET?(Ct={basketId:0,items:[],totalPrice:0,shopper:0},localStorage.setItem("basket",JSON.stringify(Ct)),e({type:"".concat(t,"_SUCCESS"),response:Ct})):e({type:"".concat(t,"_SUCCESS"),response:A.data})},yt=function(e){var t=e.dispatch;return function(e){return function(A){if(e(A),"API"===A.type){var r=A.name,a=A.url,n=A.requestData,c=A.extraData;It.a.defaults.baseURL=we.API_URL,It.a.defaults.headers.common["Content-Type"]="application/json";var i={url:a,method:n.method};n.headers&&(i.headers=n.headers),n.data&&(i.data=n.data),n.params&&(i.params=n.params),"development"===we.ENV?St(t,r,i):(t({type:"".concat(r,"_REQUEST")}),It.a.request(i).then((function(e){var A=e.data;t({type:"".concat(r,"_SUCCESS"),response:A,extraData:c})})).catch((function(e){var A=e.response?e.response.data.error:"An unknown error has occurred";t({type:"".concat(r,"_FAILURE"),error:A})})))}}}},Et=Object(ft.combineReducers)({toastr:Qe.reducer,auth:ze,product:pe,basket:P,error:ot}),Ut="production"===we.ENV?ft.compose:Ot.composeWithDevTools,Rt=[Object(ft.applyMiddleware)(bt.a,yt)],Bt=Object(ft.createStore)(Et,Ut.apply(void 0,Rt));A(169);d.a.render(Object(J.jsx)(l.a.StrictMode,{children:Object(J.jsx)(R.Provider,{store:Bt,children:Object(J.jsx)(gt,{})})}),document.getElementById("root"))},50:function(e){e.exports=JSON.parse('[{"retailerId":0,"name":"Mock Retailer A"},{"retailerId":1,"name":"Mock Retailer B"},{"retailerId":2,"name":"Mock Retailer C"}]')},84:function(e){e.exports=JSON.parse('[{"userId":0,"fullName":"Mock User 1","email":"mockuser1@gmail.com","password":"password","type":"shopper","token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiTW9jayBVc2VyIDEifQ.CnOm194RXYztVQnGS6viXczUdfzZxDEVzF3UxAEsT8o"},{"userId":1,"fullName":"Mock Cashier User","email":"mockcashieruser@gmail.com","password":"password","type":"cashier","token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiTW9jayBDYXNoaWVyIFVzZXIifQ.bwyFTfHeHgumUDcCouZbwVfrFt7EzBngfxkJ-XXx3Xo"},{"userId":2,"fullName":"Mock User 2","email":"mockuser2@gmail.com","password":"password","type":"shopper","token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiTW9jayBVc2VyIDIifQ.AN6kDMph64I1D2EWiwFSQjTthyMjY_7oyuuOKJKWr6A"}]')},85:function(e){e.exports=JSON.parse('[{"productId":0,"name":"Milk Chocolate Biscuits 9 Pack","price":1.5,"image":"mockImageUrl","retailer":"Mock Retailer A"},{"productId":1,"name":"Cookie Dough Vanilla Ice Cream 465Ml","price":4.5,"image":"mockImageUrl","retailer":"Mock Retailer A"},{"productId":2,"name":"Sparkling Water 330Ml","price":2.5,"image":"mockImageUrl","retailer":"Mock Retailer A"},{"productId":3,"name":"Diced Beef 600G","price":4.9,"image":"mockImageUrl","retailer":"Mock Retailer A"},{"productId":4,"name":"Kitchen Towel 200 Sheets","price":2.5,"image":"mockImageUrl","retailer":"Mock Retailer A"},{"productId":5,"name":"Multipack Crisps 24 X 25G","price":3,"image":"mockImageUrl","retailer":"Mock Retailer A"},{"productId":6,"name":"Dairy Milk Chocolate Bar 110G","price":0.98,"image":"mockImageUrl","retailer":"Mock Retailer A"},{"productId":7,"name":"Granulated Sugar 1Kg","price":0.65,"image":"mockImageUrl","retailer":"Mock Retailer A"},{"productId":8,"name":"Sour Cream & Onion Crisps 200G","price":2.5,"image":"mockImageUrl","retailer":"Mock Retailer A"},{"productId":9,"name":"Large Free Range Eggs 12 Pack","price":2.05,"image":"mockImageUrl","retailer":"Mock Retailer A"},{"productId":10,"name":"Beef Mince 5% Fat 500g ","price":2.6,"image":"mockImageUrl","retailer":"Mock Retailer B"},{"productId":11,"name":"Chicken Breast Fillets 640g ","price":3.6,"image":"mockImageUrl","retailer":"Mock Retailer B"},{"productId":12,"name":"King Prawns 150g ","price":3,"image":"mockImageUrl","retailer":"Mock Retailer B"},{"productId":13,"name":"Chicken Thigh Fillets 640g ","price":3.2,"image":"mockImageUrl","retailer":"Mock Retailer B"},{"productId":14,"name":"British Extra Lean Diced Beef 250g ","price":2.5,"image":"mockImageUrl","retailer":"Mock Retailer B"},{"productId":15,"name":"Fairtrade Bananas x5 ","price":0.8,"image":"mockImageUrl","retailer":"Mock Retailer B"},{"productId":16,"name":"British Semi Skimmed Milk 2.27L (4 pint)","price":1.1,"image":"mockImageUrl","retailer":"Mock Retailer B"},{"productId":17,"name":"British Whole Milk 2.27L (4 pint)","price":1.1,"image":"mockImageUrl","retailer":"Mock Retailer B"},{"productId":18,"name":"Whole Milk 2L","price":1.6,"image":"mockImageUrl","retailer":"Mock Retailer B"},{"productId":19,"name":"White Granulated Sugar 1kg ","price":0.75,"image":"mockImageUrl","retailer":"Mock Retailer B"},{"productId":20,"name":"Smoked Salmon","price":5,"image":"mockImageUrl","retailer":"Mock Retailer C"},{"productId":21,"name":"Seedless Grape Selection","price":2.3,"image":"mockImageUrl","retailer":"Mock Retailer C"},{"productId":22,"name":"Essential British Chicken Mini Breast Fillets","price":3.5,"image":"mockImageUrl","retailer":"Mock Retailer C"},{"productId":23,"name":"Semi Skimmed Milk","price":0.89,"image":"mockImageUrl","retailer":"Mock Retailer C"},{"productId":24,"name":"Large Eggs","price":3.5,"image":"mockImageUrl","retailer":"Mock Retailer C"},{"productId":25,"name":"Beef rump steak","price":4,"image":"mockImageUrl","retailer":"Mock Retailer C"},{"productId":26,"name":"Beef Sirloin Steak","price":4.5,"image":"mockImageUrl","retailer":"Mock Retailer C"},{"productId":27,"name":"Lean Diced British Beef Braising Steak","price":4.25,"image":"mockImageUrl","retailer":"Mock Retailer C"},{"productId":28,"name":"2 Raw Lobster Tails","price":20,"image":"mockImageUrl","retailer":"Mock Retailer C"},{"productId":29,"name":"Tomato Ketchup","price":1.75,"image":"mockImageUrl","retailer":"Mock Retailer C"}]')}},[[170,1,2]]]);
//# sourceMappingURL=main.c4c8e433.chunk.js.map